<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: Contributing to the curl project</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">My Project<span id="projectnumber">&#160;Version 0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Contributing to the curl project </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This document is intended to offer guidelines on how to best contribute to the curl project. This concerns new features as well as corrections to existing flaws or bugs.</p>
<h1><a class="anchor" id="autotoc_md789"></a>
Learning curl</h1>
<h2><a class="anchor" id="autotoc_md790"></a>
Join the Community</h2>
<p>Skip over to <a href="https://curl.se/mail/">https://curl.se/mail/</a> and join the appropriate mailing list(s). Read up on details before you post questions. Read this file before you start sending patches! We prefer questions sent to and discussions being held on the mailing list(s), not sent to individuals.</p>
<p>Before posting to one of the curl mailing lists, please read up on the <a href="https://curl.se/mail/etiquette.html">mailing list etiquette</a>.</p>
<p>We also hang out on IRC in #curl on libera.chat</p>
<p>If you're at all interested in the code side of things, consider clicking 'watch' on the <a href="https://github.com/curl/curl">curl repo on GitHub</a> to be notified of pull requests and new issues posted there.</p>
<h2><a class="anchor" id="autotoc_md791"></a>
License and copyright</h2>
<p>When contributing with code, you agree to put your changes and new code under the same license curl and libcurl is already using unless stated and agreed otherwise.</p>
<p>If you add a larger piece of code, you can opt to make that file or set of files to use a different license as long as they don't enforce any changes to the rest of the package and they make sense. Such "separate parts" can not be GPL licensed (as we don't want copyleft to affect users of libcurl) but they must use "GPL compatible" licenses (as we want to allow users to use libcurl properly in GPL licensed environments).</p>
<p>When changing existing source code, you do not alter the copyright of the original <a class="el" href="structfile.html">file(s)</a>. The copyright will still be owned by the original creator(s) or those who have been assigned copyright by the original author(s).</p>
<p>By submitting a patch to the curl project, you are assumed to have the right to the code and to be allowed by your employer or whatever to hand over that patch/code to us. We will credit you for your changes as far as possible, to give credit but also to keep a trace back to who made what changes. Please always provide us with your full real name when contributing!</p>
<h2><a class="anchor" id="autotoc_md792"></a>
What To Read</h2>
<p>Source code, the man pages, the <a href="https://curl.se/dev/internals.html">INTERNALS document</a>, <a href="https://curl.se/docs/todo.html">TODO</a>, <a href="https://curl.se/docs/knownbugs.html">KNOWN_BUGS</a> and the <a href="https://curl.se/dev/sourceactivity.html">most recent changes</a> in git. Just lurking on the <a href="https://curl.se/mail/list.cgi?list=curl-library">curl-library mailing list</a> will give you a lot of insights on what's going on right now. Asking there is a good idea too.</p>
<h1><a class="anchor" id="autotoc_md793"></a>
Write a good patch</h1>
<h2><a class="anchor" id="autotoc_md794"></a>
Follow code style</h2>
<p>When writing C code, follow the <a href="https://curl.se/dev/code-style.html">CODE_STYLE</a> already established in the project. Consistent style makes code easier to read and mistakes less likely to happen. Run <code>make checksrc</code> before you submit anything, to make sure you follow the basic style. That script doesn't verify everything, but if it complains you know you have work to do.</p>
<h2><a class="anchor" id="autotoc_md795"></a>
Non-clobbering All Over</h2>
<p>When you write new functionality or fix bugs, it is important that you don't fiddle all over the source files and functions. Remember that it is likely that other people have done changes in the same source files as you have and possibly even in the same functions. If you bring completely new functionality, try writing it in a new source file. If you fix bugs, try to fix one bug at a time and send them as separate patches.</p>
<h2><a class="anchor" id="autotoc_md796"></a>
Write Separate Changes</h2>
<p>It is annoying when you get a huge patch from someone that is said to fix 511 odd problems, but discussions and opinions don't agree with 510 of them - or 509 of them were already fixed in a different way. Then the person merging this change needs to extract the single interesting patch from somewhere within the huge pile of source, and that creates a lot of extra work.</p>
<p>Preferably, each fix that corrects a problem should be in its own patch/commit with its own description/commit message stating exactly what they correct so that all changes can be selectively applied by the maintainer or other interested parties.</p>
<p>Also, separate changes enable bisecting much better for tracking problems and regression in the future.</p>
<h2><a class="anchor" id="autotoc_md797"></a>
Patch Against Recent Sources</h2>
<p>Please try to get the latest available sources to make your patches against. It makes the lives of the developers so much easier. The very best is if you get the most up-to-date sources from the git repository, but the latest release archive is quite OK as well!</p>
<h2><a class="anchor" id="autotoc_md798"></a>
Documentation</h2>
<p>Writing docs is dead boring and one of the big problems with many open source projects. But someone's gotta do it! It makes things a lot easier if you submit a small description of your fix or your new features with every contribution so that it can be swiftly added to the package documentation.</p>
<p>The documentation is always made in man pages (nroff formatted) or plain ASCII files. All HTML files on the website and in the release archives are generated from the nroff/ASCII versions.</p>
<h2><a class="anchor" id="autotoc_md799"></a>
Test Cases</h2>
<p>Since the introduction of the test suite, we can quickly verify that the main features are working as they're supposed to. To maintain this situation and improve it, all new features and functions that are added need to be tested in the test suite. Every feature that is added should get at least one valid test case that verifies that it works as documented. If every submitter also posts a few test cases, it won't end up as a heavy burden on a single person!</p>
<p>If you don't have test cases or perhaps you have done something that is very hard to write tests for, do explain exactly how you have otherwise tested and verified your changes.</p>
<h1><a class="anchor" id="autotoc_md800"></a>
Sharing Your Changes</h1>
<h2><a class="anchor" id="autotoc_md801"></a>
How to get your changes into the main sources</h2>
<p>Ideally you file a <a href="https://github.com/curl/curl/pulls">pull request on GitHub</a>, but you can also send your plain patch to <a href="https://curl.se/mail/list.cgi?list=curl-library">the curl-library mailing list</a>.</p>
<p>Either way, your change will be reviewed and discussed there and you will be expected to correct flaws pointed out and update accordingly, or the change risks stalling and eventually just getting deleted without action. As a submitter of a change, you are the owner of that change until it has been merged.</p>
<p>Respond on the list or on github about the change and answer questions and/or fix nits/flaws. This is very important. We will take lack of replies as a sign that you're not very anxious to get your patch accepted and we tend to simply drop such changes.</p>
<h2><a class="anchor" id="autotoc_md802"></a>
About pull requests</h2>
<p>With github it is easy to send a <a href="https://github.com/curl/curl/pulls">pull request</a> to the curl project to have changes merged.</p>
<p>We strongly prefer pull requests to mailed patches, as it makes it a proper git commit that is easy to merge and they are easy to track and not that easy to lose in the flood of many emails, like they sometimes do on the mailing lists.</p>
<p>Every pull request submitted will automatically be tested in several different ways. Every pull request is verified for each of the following:</p>
<ul>
<li>... it still builds, warning-free, on Linux and macOS, with both clang and gcc</li>
<li>... it still builds fine on Windows with several MSVC versions</li>
<li>... it still builds with cmake on Linux, with gcc and clang</li>
<li>... it follows rudimentary code style rules</li>
<li>... the test suite still runs 100% fine</li>
<li>... the release tarball (the "dist") still works</li>
<li>... it builds fine in-tree as well as out-of-tree</li>
<li>... code coverage doesn't shrink drastically</li>
</ul>
<p>If the pull-request fails one of these tests, it will show up as a red X and you are expected to fix the problem. If you don't understand when the issue is or have other problems to fix the complaint, just ask and other project members will likely be able to help out.</p>
<p>Consider the following table while looking at pull request failures:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">CI platform as shown in PR   </th><th class="markdownTableHeadNone"><a class="el" href="struct_state.html">State</a>   </th><th class="markdownTableHeadNone">What to look at next    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">CI / codeql   </td><td class="markdownTableBodyNone">stable   </td><td class="markdownTableBodyNone">quality check results    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">CI / fuzzing   </td><td class="markdownTableBodyNone">stable   </td><td class="markdownTableBodyNone">fuzzing results    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">CI / macos ...   </td><td class="markdownTableBodyNone">stable   </td><td class="markdownTableBodyNone">all errors and failures    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Code scanning results / CodeQL   </td><td class="markdownTableBodyNone">stable   </td><td class="markdownTableBodyNone">quality check results    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">FreeBSD FreeBSD: ...   </td><td class="markdownTableBodyNone">stable   </td><td class="markdownTableBodyNone">all errors and failures    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">LGTM analysis: Python   </td><td class="markdownTableBodyNone">stable   </td><td class="markdownTableBodyNone">new findings    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">LGTM analysis: C/C++   </td><td class="markdownTableBodyNone">stable   </td><td class="markdownTableBodyNone">new findings    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">buildbot/curl_winssl_ ...   </td><td class="markdownTableBodyNone">stable   </td><td class="markdownTableBodyNone">all errors and failures    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">continuous-integration/appveyor/pr   </td><td class="markdownTableBodyNone">stable   </td><td class="markdownTableBodyNone">all errors and failures    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">curl.curl (linux ...)   </td><td class="markdownTableBodyNone">stable   </td><td class="markdownTableBodyNone">all errors and failures    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">curl.curl (windows ...)   </td><td class="markdownTableBodyNone">flaky   </td><td class="markdownTableBodyNone">repetitive errors/failures    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">deepcode-ci-bot   </td><td class="markdownTableBodyNone">stable   </td><td class="markdownTableBodyNone">new findings    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">musedev   </td><td class="markdownTableBodyNone">stable   </td><td class="markdownTableBodyNone">new findings   </td></tr>
</table>
<p>Sometimes the tests fail due to a dependency service temporarily being offline or otherwise unavailable, eg. package downloads. In this case you can just try to update your pull requests to rerun the tests later as described below.</p>
<p>You can update your pull requests by pushing new commits or force-pushing changes to existing commits. Force-pushing an amended commit without any actual content changed also allows you to retrigger the tests for that commit.</p>
<p>When you adjust your pull requests after review, consider squashing the commits so that we can review the full updated version more easily.</p>
<h2><a class="anchor" id="autotoc_md803"></a>
Making quality patches</h2>
<p>Make the patch against as recent source versions as possible.</p>
<p>If you've followed the tips in this document and your patch still hasn't been incorporated or responded to after some weeks, consider resubmitting it to the list or better yet: change it to a pull request.</p>
<h2><a class="anchor" id="autotoc_md804"></a>
Write good commit messages</h2>
<p><a class="el" href="class_a.html">A</a> short guide to how to write commit messages in the curl project. </p><pre class="fragment">---- start ----
[area]: [short line describing the main effect]
       -- empty line --
[full description, no wider than 72 columns that describe as much as
possible as to why this change is made, and possibly what things
it fixes and everything else that is related]
       -- empty line --
[Closes/Fixes #1234 - if this closes or fixes a github issue]
[Bug: URL to source of the report or more related discussion]
[Reported-by: John Doe - credit the reporter]
[whatever-else-by: credit all helpers, finders, doers]
---- stop ----
</pre><p> The first line is a succinct description of the change:</p>
<ul>
<li>use the imperative, present tense: "change" not "changed" nor "changes"</li>
<li>don't capitalize first letter</li>
<li>no dot (.) at the end</li>
</ul>
<p>The <code>[area]</code> in the first line can be <code>http2</code>, <code>cookies</code>, <code>openssl</code> or similar. There's no fixed list to select from but using the same "area" as other related changes could make sense.</p>
<p>Don't forget to use commit &ndash;author="" if you commit someone else's work, and make sure that you have your own user and email setup correctly in git before you commit</p>
<h2><a class="anchor" id="autotoc_md805"></a>
Write Access to git Repository</h2>
<p>If you are a very frequent contributor, you may be given push access to the git repository and then you'll be able to push your changes straight into the git repo instead of sending changes as pull requests or by mail as patches.</p>
<p>Just ask if this is what you'd want. You will be required to have posted several high quality patches first, before you can be granted push access.</p>
<h2><a class="anchor" id="autotoc_md806"></a>
How To Make a Patch with git</h2>
<p>You need to first checkout the repository: </p><pre class="fragment">git clone https://github.com/curl/curl.git
</pre><p> You then proceed and edit all the files you like and you commit them to your local repository: </p><pre class="fragment">git commit [file]
</pre><p> As usual, group your commits so that you commit all changes at once that constitute a logical change.</p>
<p>Once you have done all your commits and you're happy with what you see, you can make patches out of your changes that are suitable for mailing: </p><pre class="fragment">git format-patch remotes/origin/master
</pre><p> This creates files in your local directory named NNNN-[name].patch for each commit.</p>
<p>Now send those patches off to the curl-library list. You can of course opt to do that with the 'git send-email' command.</p>
<h2><a class="anchor" id="autotoc_md807"></a>
How To Make a Patch without git</h2>
<p>Keep a copy of the unmodified curl sources. Make your changes in a separate source tree. When you think you have something that you want to offer the curl community, use GNU diff to generate patches.</p>
<p>If you have modified a single file, try something like: </p><pre class="fragment">diff -u unmodified-file.c my-changed-one.c &gt; my-fixes.diff
</pre><p> If you have modified several files, possibly in different directories, you can use diff recursively: </p><pre class="fragment">diff -ur curl-original-dir curl-modified-sources-dir &gt; my-fixes.diff
</pre><p> The GNU diff and GNU patch tools exist for virtually all platforms, including all kinds of Unixes and Windows:</p>
<p>For unix-like operating systems:</p>
<ul>
<li><a href="https://savannah.gnu.org/projects/patch/">https://savannah.gnu.org/projects/patch/</a></li>
<li><a href="https://www.gnu.org/software/diffutils/">https://www.gnu.org/software/diffutils/</a></li>
</ul>
<p>For Windows:</p>
<ul>
<li><a href="https://gnuwin32.sourceforge.io/packages/patch.htm">https://gnuwin32.sourceforge.io/packages/patch.htm</a></li>
<li><a href="https://gnuwin32.sourceforge.io/packages/diffutils.htm">https://gnuwin32.sourceforge.io/packages/diffutils.htm</a></li>
</ul>
<h2><a class="anchor" id="autotoc_md808"></a>
Useful resources</h2>
<ul>
<li><a href="https://www.youtube.com/watch?v=QmZ3W1d6LQI">Webinar on getting code into cURL</a> </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
