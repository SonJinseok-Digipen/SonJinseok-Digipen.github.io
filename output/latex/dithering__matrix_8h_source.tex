\hypertarget{dithering__matrix_8h_source}{}\doxysection{dithering\+\_\+matrix.\+h}
\label{dithering__matrix_8h_source}\index{AseSprite/aseprite/src/render/dithering\_matrix.h@{AseSprite/aseprite/src/render/dithering\_matrix.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ Aseprite\ Render\ Library}}
\DoxyCodeLine{00002\ \textcolor{comment}{//\ Copyright\ (c)\ 2020\ Igara\ Studio\ S.A.}}
\DoxyCodeLine{00003\ \textcolor{comment}{//\ Copyright\ (c)\ 2017\ David\ Capello}}
\DoxyCodeLine{00004\ \textcolor{comment}{//}}
\DoxyCodeLine{00005\ \textcolor{comment}{//\ This\ file\ is\ released\ under\ the\ terms\ of\ the\ MIT\ license.}}
\DoxyCodeLine{00006\ \textcolor{comment}{//\ Read\ LICENSE.txt\ for\ more\ information.}}
\DoxyCodeLine{00007\ }
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#ifndef\ RENDER\_DITHERING\_MATRIX\_H\_INCLUDED}}
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#define\ RENDER\_DITHERING\_MATRIX\_H\_INCLUDED}}
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00011\ }
\DoxyCodeLine{00012\ \textcolor{preprocessor}{\#include\ <algorithm>}}
\DoxyCodeLine{00013\ \textcolor{preprocessor}{\#include\ <vector>}}
\DoxyCodeLine{00014\ }
\DoxyCodeLine{00015\ \textcolor{keyword}{namespace\ }render\ \{}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{classrender_1_1_dithering_matrix}{DitheringMatrix}}\ \{}
\DoxyCodeLine{00018\ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00019\ \ \ \ \ \mbox{\hyperlink{classrender_1_1_dithering_matrix}{DitheringMatrix}}()}
\DoxyCodeLine{00020\ \ \ \ \ \ \ :\ m\_rows(1),\ m\_cols(1)}
\DoxyCodeLine{00021\ \ \ \ \ \ \ ,\ m\_matrix(1,\ 1)}
\DoxyCodeLine{00022\ \ \ \ \ \ \ ,\ m\_maxValue(1)\ \{}
\DoxyCodeLine{00023\ \ \ \ \ \}}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00025\ \ \ \ \ \mbox{\hyperlink{classrender_1_1_dithering_matrix}{DitheringMatrix}}(\textcolor{keywordtype}{int}\ rows,\ \textcolor{keywordtype}{int}\ cols)}
\DoxyCodeLine{00026\ \ \ \ \ \ \ :\ m\_rows(rows),\ m\_cols(cols)}
\DoxyCodeLine{00027\ \ \ \ \ \ \ ,\ m\_matrix(rows*cols,\ 0)}
\DoxyCodeLine{00028\ \ \ \ \ \ \ ,\ m\_maxValue(1)\ \{}
\DoxyCodeLine{00029\ \ \ \ \ \}}
\DoxyCodeLine{00030\ }
\DoxyCodeLine{00031\ \ \ \ \ \textcolor{keywordtype}{int}\ rows()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ m\_rows;\ \}}
\DoxyCodeLine{00032\ \ \ \ \ \textcolor{keywordtype}{int}\ cols()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ m\_cols;\ \}}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00034\ \ \ \ \ \textcolor{keywordtype}{int}\ maxValue()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ m\_maxValue;\ \}}
\DoxyCodeLine{00035\ \ \ \ \ \textcolor{keywordtype}{void}\ calcMaxValue()\ \{}
\DoxyCodeLine{00036\ \ \ \ \ \ \ m\_maxValue\ =\ *std::max\_element(m\_matrix.begin(),}
\DoxyCodeLine{00037\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_matrix.end());}
\DoxyCodeLine{00038\ \ \ \ \ \ \ m\_maxValue\ =\ std::max(m\_maxValue,\ 1);}
\DoxyCodeLine{00039\ \ \ \ \ \}}
\DoxyCodeLine{00040\ }
\DoxyCodeLine{00041\ \ \ \ \ \textcolor{keywordtype}{int}\ operator()(\textcolor{keywordtype}{int}\ i,\ \textcolor{keywordtype}{int}\ j)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00042\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ m\_matrix[(i\%m\_rows)*m\_cols\ +\ (j\%m\_cols)];}
\DoxyCodeLine{00043\ \ \ \ \ \}}
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00045\ \ \ \ \ \textcolor{keywordtype}{int}\&\ operator()(\textcolor{keywordtype}{int}\ i,\ \textcolor{keywordtype}{int}\ j)\ \{}
\DoxyCodeLine{00046\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ m\_matrix[(i\%m\_rows)*m\_cols\ +\ (j\%m\_cols)];}
\DoxyCodeLine{00047\ \ \ \ \ \}}
\DoxyCodeLine{00048\ }
\DoxyCodeLine{00049\ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00050\ \ \ \ \ \textcolor{keywordtype}{int}\ m\_rows,\ m\_cols;}
\DoxyCodeLine{00051\ \ \ \ \ std::vector<int>\ m\_matrix;}
\DoxyCodeLine{00052\ \ \ \ \ \textcolor{keywordtype}{int}\ m\_maxValue;}
\DoxyCodeLine{00053\ \ \ \};}
\DoxyCodeLine{00054\ }
\DoxyCodeLine{00055\ \ \ \textcolor{comment}{//\ Creates\ a\ Bayer\ dither\ matrix.}}
\DoxyCodeLine{00056\ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{classrender_1_1_bayer_matrix}{BayerMatrix}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classrender_1_1_dithering_matrix}{DitheringMatrix}}\ \{}
\DoxyCodeLine{00057\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ D2[4];}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00059\ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00060\ \ \ \ \ \mbox{\hyperlink{classrender_1_1_bayer_matrix}{BayerMatrix}}(\textcolor{keywordtype}{int}\ n)\ :\ \mbox{\hyperlink{classrender_1_1_dithering_matrix}{DitheringMatrix}}(n,\ n)\ \{}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i=0;\ i<n;\ ++i)}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ j=0;\ j<n;\ ++j)}
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{operator}()(i,\ j)\ =\ Dn(i,\ j,\ n);}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00065\ \ \ \ \ \ \ calcMaxValue();}
\DoxyCodeLine{00066\ \ \ \ \ \}}
\DoxyCodeLine{00067\ }
\DoxyCodeLine{00068\ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00069\ \ \ \ \ \textcolor{keywordtype}{int}\ Dn(\textcolor{keywordtype}{int}\ i,\ \textcolor{keywordtype}{int}\ j,\ \textcolor{keywordtype}{int}\ n)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00070\ \ \ \ \ \ \ ASSERT(i\ >=\ 0\ \&\&\ i\ <\ n);}
\DoxyCodeLine{00071\ \ \ \ \ \ \ ASSERT(j\ >=\ 0\ \&\&\ j\ <\ n);}
\DoxyCodeLine{00072\ }
\DoxyCodeLine{00073\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (n\ ==\ 2)}
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ D2[i*2\ +\ j];}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \ \ +\ 4*Dn(i\%(n/2),\ j\%(n/2),\ n/2)}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ \ \ +\ \ \ Dn(i/(n/2),\ j/(n/2),\ 2);}
\DoxyCodeLine{00079\ \ \ \ \ \}}
\DoxyCodeLine{00080\ \ \ \};}
\DoxyCodeLine{00081\ }
\DoxyCodeLine{00082\ \}\ \textcolor{comment}{//\ namespace\ render}}
\DoxyCodeLine{00083\ }
\DoxyCodeLine{00084\ \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
