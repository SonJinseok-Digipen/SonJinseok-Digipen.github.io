\hypertarget{cexcept_8h_source}{}\doxysection{cexcept.\+h}
\label{cexcept_8h_source}\index{AseSprite/aseprite/third\_party/libpng/contrib/visupng/cexcept.h@{AseSprite/aseprite/third\_party/libpng/contrib/visupng/cexcept.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*===}}
\DoxyCodeLine{00002\ \textcolor{comment}{cexcept.h\ 2.0.1\ (2008-\/Jul-\/19-\/Sat)}}
\DoxyCodeLine{00003\ \textcolor{comment}{http://www.nicemice.net/cexcept/}}
\DoxyCodeLine{00004\ \textcolor{comment}{Adam\ M.\ Costello}}
\DoxyCodeLine{00005\ \textcolor{comment}{http://www.nicemice.net/amc/}}
\DoxyCodeLine{00006\ \textcolor{comment}{}}
\DoxyCodeLine{00007\ \textcolor{comment}{An\ interface\ for\ exception-\/handling\ in\ ANSI\ C\ (C89\ and\ subsequent\ ISO}}
\DoxyCodeLine{00008\ \textcolor{comment}{standards),\ developed\ jointly\ with\ Cosmin\ Truta.}}
\DoxyCodeLine{00009\ \textcolor{comment}{}}
\DoxyCodeLine{00010\ \textcolor{comment}{\ \ \ \ Copyright\ (c)\ 2000-\/2008\ Adam\ M.\ Costello\ and\ Cosmin\ Truta.}}
\DoxyCodeLine{00011\ \textcolor{comment}{\ \ \ \ This\ software\ may\ be\ modified\ only\ if\ its\ author\ and\ version}}
\DoxyCodeLine{00012\ \textcolor{comment}{\ \ \ \ information\ is\ updated\ accurately,\ and\ may\ be\ redistributed}}
\DoxyCodeLine{00013\ \textcolor{comment}{\ \ \ \ only\ if\ accompanied\ by\ this\ unaltered\ notice.\ \ Subject\ to\ those}}
\DoxyCodeLine{00014\ \textcolor{comment}{\ \ \ \ restrictions,\ permission\ is\ granted\ to\ anyone\ to\ do\ anything}}
\DoxyCodeLine{00015\ \textcolor{comment}{\ \ \ \ with\ this\ software.\ \ The\ copyright\ holders\ make\ no\ guarantees}}
\DoxyCodeLine{00016\ \textcolor{comment}{\ \ \ \ regarding\ this\ software,\ and\ are\ not\ responsible\ for\ any\ damage}}
\DoxyCodeLine{00017\ \textcolor{comment}{\ \ \ \ resulting\ from\ its\ use.}}
\DoxyCodeLine{00018\ \textcolor{comment}{}}
\DoxyCodeLine{00019\ \textcolor{comment}{The\ cexcept\ interface\ is\ not\ compatible\ with\ and\ cannot\ interact}}
\DoxyCodeLine{00020\ \textcolor{comment}{with\ system\ exceptions\ (like\ division\ by\ zero\ or\ memory\ segmentation}}
\DoxyCodeLine{00021\ \textcolor{comment}{violation),\ compiler-\/generated\ exceptions\ (like\ C++\ exceptions),\ or}}
\DoxyCodeLine{00022\ \textcolor{comment}{other\ exception-\/handling\ interfaces.}}
\DoxyCodeLine{00023\ \textcolor{comment}{}}
\DoxyCodeLine{00024\ \textcolor{comment}{When\ using\ this\ interface\ across\ multiple\ .c\ files,\ do\ not\ include}}
\DoxyCodeLine{00025\ \textcolor{comment}{this\ header\ file\ directly.\ \ Instead,\ create\ a\ wrapper\ header\ file\ that}}
\DoxyCodeLine{00026\ \textcolor{comment}{includes\ this\ header\ file\ and\ then\ invokes\ the\ define\_exception\_type}}
\DoxyCodeLine{00027\ \textcolor{comment}{macro\ (see\ below).\ \ The\ .c\ files\ should\ then\ include\ that\ header\ file.}}
\DoxyCodeLine{00028\ \textcolor{comment}{}}
\DoxyCodeLine{00029\ \textcolor{comment}{The\ interface\ consists\ of\ one\ type,\ one\ well-\/known\ name,\ and\ six\ macros.}}
\DoxyCodeLine{00030\ \textcolor{comment}{}}
\DoxyCodeLine{00031\ \textcolor{comment}{}}
\DoxyCodeLine{00032\ \textcolor{comment}{define\_exception\_type(type\_name);}}
\DoxyCodeLine{00033\ \textcolor{comment}{}}
\DoxyCodeLine{00034\ \textcolor{comment}{\ \ \ \ This\ macro\ is\ used\ like\ an\ external\ declaration.\ \ It\ specifies}}
\DoxyCodeLine{00035\ \textcolor{comment}{\ \ \ \ the\ type\ of\ object\ that\ gets\ copied\ from\ the\ exception\ thrower\ to}}
\DoxyCodeLine{00036\ \textcolor{comment}{\ \ \ \ the\ exception\ catcher.\ \ The\ type\_name\ can\ be\ any\ type\ that\ can\ be}}
\DoxyCodeLine{00037\ \textcolor{comment}{\ \ \ \ assigned\ to,\ that\ is,\ a\ non-\/constant\ arithmetic\ type,\ struct,\ union,}}
\DoxyCodeLine{00038\ \textcolor{comment}{\ \ \ \ or\ pointer.\ \ Examples:}}
\DoxyCodeLine{00039\ \textcolor{comment}{}}
\DoxyCodeLine{00040\ \textcolor{comment}{\ \ \ \ \ \ \ \ define\_exception\_type(int);}}
\DoxyCodeLine{00041\ \textcolor{comment}{}}
\DoxyCodeLine{00042\ \textcolor{comment}{\ \ \ \ \ \ \ \ enum\ exception\ \{\ out\_of\_memory,\ bad\_arguments,\ disk\_full\ \};}}
\DoxyCodeLine{00043\ \textcolor{comment}{\ \ \ \ \ \ \ \ define\_exception\_type(enum\ exception);}}
\DoxyCodeLine{00044\ \textcolor{comment}{}}
\DoxyCodeLine{00045\ \textcolor{comment}{\ \ \ \ \ \ \ \ struct\ exception\ \{\ int\ code;\ const\ char\ *msg;\ \};}}
\DoxyCodeLine{00046\ \textcolor{comment}{\ \ \ \ \ \ \ \ define\_exception\_type(struct\ exception);}}
\DoxyCodeLine{00047\ \textcolor{comment}{}}
\DoxyCodeLine{00048\ \textcolor{comment}{\ \ \ \ Because\ throwing\ an\ exception\ causes\ the\ object\ to\ be\ copied\ (not}}
\DoxyCodeLine{00049\ \textcolor{comment}{\ \ \ \ just\ once,\ but\ twice),\ programmers\ may\ wish\ to\ consider\ size\ when}}
\DoxyCodeLine{00050\ \textcolor{comment}{\ \ \ \ choosing\ the\ exception\ type.}}
\DoxyCodeLine{00051\ \textcolor{comment}{}}
\DoxyCodeLine{00052\ \textcolor{comment}{}}
\DoxyCodeLine{00053\ \textcolor{comment}{struct\ exception\_context;}}
\DoxyCodeLine{00054\ \textcolor{comment}{}}
\DoxyCodeLine{00055\ \textcolor{comment}{\ \ \ \ This\ type\ may\ be\ used\ after\ the\ define\_exception\_type()\ macro\ has}}
\DoxyCodeLine{00056\ \textcolor{comment}{\ \ \ \ been\ invoked.\ \ A\ struct\ exception\_context\ must\ be\ known\ to\ both}}
\DoxyCodeLine{00057\ \textcolor{comment}{\ \ \ \ the\ thrower\ and\ the\ catcher.\ \ It\ is\ expected\ that\ there\ be\ one}}
\DoxyCodeLine{00058\ \textcolor{comment}{\ \ \ \ context\ for\ each\ thread\ that\ uses\ exceptions.\ \ It\ would\ certainly}}
\DoxyCodeLine{00059\ \textcolor{comment}{\ \ \ \ be\ dangerous\ for\ multiple\ threads\ to\ access\ the\ same\ context.}}
\DoxyCodeLine{00060\ \textcolor{comment}{\ \ \ \ One\ thread\ can\ use\ multiple\ contexts,\ but\ that\ is\ likely\ to\ be}}
\DoxyCodeLine{00061\ \textcolor{comment}{\ \ \ \ confusing\ and\ not\ typically\ useful.\ \ The\ application\ can\ allocate}}
\DoxyCodeLine{00062\ \textcolor{comment}{\ \ \ \ this\ structure\ in\ any\ way\ it\ pleases-\/-\/automatic,\ static,\ or\ dynamic.}}
\DoxyCodeLine{00063\ \textcolor{comment}{\ \ \ \ The\ application\ programmer\ should\ pretend\ not\ to\ know\ the\ structure}}
\DoxyCodeLine{00064\ \textcolor{comment}{\ \ \ \ members,\ which\ are\ subject\ to\ change.}}
\DoxyCodeLine{00065\ \textcolor{comment}{}}
\DoxyCodeLine{00066\ \textcolor{comment}{}}
\DoxyCodeLine{00067\ \textcolor{comment}{struct\ exception\_context\ *the\_exception\_context;}}
\DoxyCodeLine{00068\ \textcolor{comment}{}}
\DoxyCodeLine{00069\ \textcolor{comment}{\ \ \ \ The\ Try/Catch\ and\ Throw\ statements\ (described\ below)\ implicitly}}
\DoxyCodeLine{00070\ \textcolor{comment}{\ \ \ \ refer\ to\ a\ context,\ using\ the\ name\ the\_exception\_context.\ \ It\ is}}
\DoxyCodeLine{00071\ \textcolor{comment}{\ \ \ \ the\ application's\ responsibility\ to\ make\ sure\ that\ this\ name\ yields}}
\DoxyCodeLine{00072\ \textcolor{comment}{\ \ \ \ the\ address\ of\ a\ mutable\ (non-\/constant)\ struct\ exception\_context}}
\DoxyCodeLine{00073\ \textcolor{comment}{\ \ \ \ wherever\ those\ statements\ are\ used.\ \ Subject\ to\ that\ constraint,\ the}}
\DoxyCodeLine{00074\ \textcolor{comment}{\ \ \ \ application\ may\ declare\ a\ variable\ of\ this\ name\ anywhere\ it\ likes}}
\DoxyCodeLine{00075\ \textcolor{comment}{\ \ \ \ (inside\ a\ function,\ in\ a\ parameter\ list,\ or\ externally),\ and\ may}}
\DoxyCodeLine{00076\ \textcolor{comment}{\ \ \ \ use\ whatever\ storage\ class\ specifiers\ (static,\ extern,\ etc)\ or\ type}}
\DoxyCodeLine{00077\ \textcolor{comment}{\ \ \ \ qualifiers\ (const,\ volatile,\ etc)\ it\ likes.\ \ Examples:}}
\DoxyCodeLine{00078\ \textcolor{comment}{}}
\DoxyCodeLine{00079\ \textcolor{comment}{\ \ \ \ \ \ \ \ static\ struct\ exception\_context}}
\DoxyCodeLine{00080\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ *\ const\ the\_exception\_context\ =\ \&foo;}}
\DoxyCodeLine{00081\ \textcolor{comment}{}}
\DoxyCodeLine{00082\ \textcolor{comment}{\ \ \ \ \ \ \ \ \{\ struct\ exception\_context\ *the\_exception\_context\ =\ bar;\ ...\ \}}}
\DoxyCodeLine{00083\ \textcolor{comment}{}}
\DoxyCodeLine{00084\ \textcolor{comment}{\ \ \ \ \ \ \ \ int\ blah(struct\ exception\_context\ *the\_exception\_context,\ ...);}}
\DoxyCodeLine{00085\ \textcolor{comment}{}}
\DoxyCodeLine{00086\ \textcolor{comment}{\ \ \ \ \ \ \ \ extern\ struct\ exception\_context\ the\_exception\_context[1];}}
\DoxyCodeLine{00087\ \textcolor{comment}{}}
\DoxyCodeLine{00088\ \textcolor{comment}{\ \ \ \ The\ last\ example\ illustrates\ a\ trick\ that\ avoids\ creating\ a\ pointer}}
\DoxyCodeLine{00089\ \textcolor{comment}{\ \ \ \ object\ separate\ from\ the\ structure\ object.}}
\DoxyCodeLine{00090\ \textcolor{comment}{}}
\DoxyCodeLine{00091\ \textcolor{comment}{\ \ \ \ The\ name\ could\ even\ be\ a\ macro,\ for\ example:}}
\DoxyCodeLine{00092\ \textcolor{comment}{}}
\DoxyCodeLine{00093\ \textcolor{comment}{\ \ \ \ \ \ \ \ struct\ exception\_context\ ec\_array[numthreads];}}
\DoxyCodeLine{00094\ \textcolor{comment}{\ \ \ \ \ \ \ \ \#define\ the\_exception\_context\ (ec\_array\ +\ thread\_id)}}
\DoxyCodeLine{00095\ \textcolor{comment}{}}
\DoxyCodeLine{00096\ \textcolor{comment}{\ \ \ \ Be\ aware\ that\ the\_exception\_context\ is\ used\ several\ times\ by\ the}}
\DoxyCodeLine{00097\ \textcolor{comment}{\ \ \ \ Try/Catch/Throw\ macros,\ so\ it\ shouldn't\ be\ expensive\ or\ have\ side}}
\DoxyCodeLine{00098\ \textcolor{comment}{\ \ \ \ effects.\ \ The\ expansion\ must\ be\ a\ drop-\/in\ replacement\ for\ an}}
\DoxyCodeLine{00099\ \textcolor{comment}{\ \ \ \ identifier,\ so\ it's\ safest\ to\ put\ parentheses\ around\ it.}}
\DoxyCodeLine{00100\ \textcolor{comment}{}}
\DoxyCodeLine{00101\ \textcolor{comment}{}}
\DoxyCodeLine{00102\ \textcolor{comment}{void\ init\_exception\_context(struct\ exception\_context\ *ec);}}
\DoxyCodeLine{00103\ \textcolor{comment}{}}
\DoxyCodeLine{00104\ \textcolor{comment}{\ \ \ \ For\ context\ structures\ allocated\ statically\ (by\ an\ external}}
\DoxyCodeLine{00105\ \textcolor{comment}{\ \ \ \ definition\ or\ using\ the\ "{}static"{}\ keyword),\ the\ implicit}}
\DoxyCodeLine{00106\ \textcolor{comment}{\ \ \ \ initialization\ to\ all\ zeros\ is\ sufficient,\ but\ contexts\ allocated}}
\DoxyCodeLine{00107\ \textcolor{comment}{\ \ \ \ by\ other\ means\ must\ be\ initialized\ using\ this\ macro\ before\ they}}
\DoxyCodeLine{00108\ \textcolor{comment}{\ \ \ \ are\ used\ by\ a\ Try/Catch\ statement.\ \ It\ does\ no\ harm\ to\ initialize}}
\DoxyCodeLine{00109\ \textcolor{comment}{\ \ \ \ a\ context\ more\ than\ once\ (by\ using\ this\ macro\ on\ a\ statically}}
\DoxyCodeLine{00110\ \textcolor{comment}{\ \ \ \ allocated\ context,\ or\ using\ this\ macro\ twice\ on\ the\ same\ context),}}
\DoxyCodeLine{00111\ \textcolor{comment}{\ \ \ \ but\ a\ context\ must\ not\ be\ re-\/initialized\ after\ it\ has\ been\ used\ by\ a}}
\DoxyCodeLine{00112\ \textcolor{comment}{\ \ \ \ Try/Catch\ statement.}}
\DoxyCodeLine{00113\ \textcolor{comment}{}}
\DoxyCodeLine{00114\ \textcolor{comment}{}}
\DoxyCodeLine{00115\ \textcolor{comment}{Try\ statement}}
\DoxyCodeLine{00116\ \textcolor{comment}{Catch\ (expression)\ statement}}
\DoxyCodeLine{00117\ \textcolor{comment}{}}
\DoxyCodeLine{00118\ \textcolor{comment}{\ \ \ \ The\ Try/Catch/Throw\ macros\ are\ capitalized\ in\ order\ to\ avoid}}
\DoxyCodeLine{00119\ \textcolor{comment}{\ \ \ \ confusion\ with\ the\ C++\ keywords,\ which\ have\ subtly\ different}}
\DoxyCodeLine{00120\ \textcolor{comment}{\ \ \ \ semantics.}}
\DoxyCodeLine{00121\ \textcolor{comment}{}}
\DoxyCodeLine{00122\ \textcolor{comment}{\ \ \ \ A\ Try/Catch\ statement\ has\ a\ syntax\ similar\ to\ an\ if/else\ statement,}}
\DoxyCodeLine{00123\ \textcolor{comment}{\ \ \ \ except\ that\ the\ parenthesized\ expression\ goes\ after\ the\ second}}
\DoxyCodeLine{00124\ \textcolor{comment}{\ \ \ \ keyword\ rather\ than\ the\ first.\ \ As\ with\ if/else,\ there\ are\ two}}
\DoxyCodeLine{00125\ \textcolor{comment}{\ \ \ \ clauses,\ each\ of\ which\ may\ be\ a\ simple\ statement\ ending\ with\ a}}
\DoxyCodeLine{00126\ \textcolor{comment}{\ \ \ \ semicolon\ or\ a\ brace-\/enclosed\ compound\ statement.\ \ But\ whereas}}
\DoxyCodeLine{00127\ \textcolor{comment}{\ \ \ \ the\ else\ clause\ is\ optional,\ the\ Catch\ clause\ is\ required.\ \ The}}
\DoxyCodeLine{00128\ \textcolor{comment}{\ \ \ \ expression\ must\ be\ a\ modifiable\ lvalue\ (something\ capable\ of\ being}}
\DoxyCodeLine{00129\ \textcolor{comment}{\ \ \ \ assigned\ to)\ of\ the\ same\ type\ (disregarding\ type\ qualifiers)\ that}}
\DoxyCodeLine{00130\ \textcolor{comment}{\ \ \ \ was\ passed\ to\ define\_exception\_type().}}
\DoxyCodeLine{00131\ \textcolor{comment}{}}
\DoxyCodeLine{00132\ \textcolor{comment}{\ \ \ \ If\ a\ Throw\ that\ uses\ the\ same\ exception\ context\ as\ the\ Try/Catch\ is}}
\DoxyCodeLine{00133\ \textcolor{comment}{\ \ \ \ executed\ within\ the\ Try\ clause\ (typically\ within\ a\ function\ called}}
\DoxyCodeLine{00134\ \textcolor{comment}{\ \ \ \ by\ the\ Try\ clause),\ and\ the\ exception\ is\ not\ caught\ by\ a\ nested}}
\DoxyCodeLine{00135\ \textcolor{comment}{\ \ \ \ Try/Catch\ statement,\ then\ a\ copy\ of\ the\ exception\ will\ be\ assigned}}
\DoxyCodeLine{00136\ \textcolor{comment}{\ \ \ \ to\ the\ expression,\ and\ control\ will\ jump\ to\ the\ Catch\ clause.\ \ If\ no}}
\DoxyCodeLine{00137\ \textcolor{comment}{\ \ \ \ such\ Throw\ is\ executed,\ then\ the\ assignment\ is\ not\ performed,\ and}}
\DoxyCodeLine{00138\ \textcolor{comment}{\ \ \ \ the\ Catch\ clause\ is\ not\ executed.}}
\DoxyCodeLine{00139\ \textcolor{comment}{}}
\DoxyCodeLine{00140\ \textcolor{comment}{\ \ \ \ The\ expression\ is\ not\ evaluated\ unless\ and\ until\ the\ exception\ is}}
\DoxyCodeLine{00141\ \textcolor{comment}{\ \ \ \ caught,\ which\ is\ significant\ if\ it\ has\ side\ effects,\ for\ example:}}
\DoxyCodeLine{00142\ \textcolor{comment}{}}
\DoxyCodeLine{00143\ \textcolor{comment}{\ \ \ \ \ \ \ \ Try\ foo();}}
\DoxyCodeLine{00144\ \textcolor{comment}{\ \ \ \ \ \ \ \ Catch\ (p[++i].e)\ \{\ ...\ \}}}
\DoxyCodeLine{00145\ \textcolor{comment}{}}
\DoxyCodeLine{00146\ \textcolor{comment}{\ \ \ \ IMPORTANT:\ Jumping\ into\ or\ out\ of\ a\ Try\ clause\ (for\ example\ via}}
\DoxyCodeLine{00147\ \textcolor{comment}{\ \ \ \ return,\ break,\ continue,\ goto,\ longjmp)\ is\ forbidden-\/-\/the\ compiler}}
\DoxyCodeLine{00148\ \textcolor{comment}{\ \ \ \ will\ not\ complain,\ but\ bad\ things\ will\ happen\ at\ run-\/time.\ \ Jumping}}
\DoxyCodeLine{00149\ \textcolor{comment}{\ \ \ \ into\ or\ out\ of\ a\ Catch\ clause\ is\ okay,\ and\ so\ is\ jumping\ around}}
\DoxyCodeLine{00150\ \textcolor{comment}{\ \ \ \ inside\ a\ Try\ clause.\ \ In\ many\ cases\ where\ one\ is\ tempted\ to\ return}}
\DoxyCodeLine{00151\ \textcolor{comment}{\ \ \ \ from\ a\ Try\ clause,\ it\ will\ suffice\ to\ use\ Throw,\ and\ then\ return}}
\DoxyCodeLine{00152\ \textcolor{comment}{\ \ \ \ from\ the\ Catch\ clause.\ \ Another\ option\ is\ to\ set\ a\ flag\ variable\ and}}
\DoxyCodeLine{00153\ \textcolor{comment}{\ \ \ \ use\ goto\ to\ jump\ to\ the\ end\ of\ the\ Try\ clause,\ then\ check\ the\ flag}}
\DoxyCodeLine{00154\ \textcolor{comment}{\ \ \ \ after\ the\ Try/Catch\ statement.}}
\DoxyCodeLine{00155\ \textcolor{comment}{}}
\DoxyCodeLine{00156\ \textcolor{comment}{\ \ \ \ IMPORTANT:\ The\ values\ of\ any\ non-\/volatile\ automatic\ variables}}
\DoxyCodeLine{00157\ \textcolor{comment}{\ \ \ \ changed\ within\ the\ Try\ clause\ are\ undefined\ after\ an\ exception\ is}}
\DoxyCodeLine{00158\ \textcolor{comment}{\ \ \ \ caught.\ \ Therefore,\ variables\ modified\ inside\ the\ Try\ block\ whose}}
\DoxyCodeLine{00159\ \textcolor{comment}{\ \ \ \ values\ are\ needed\ later\ outside\ the\ Try\ block\ must\ either\ use\ static}}
\DoxyCodeLine{00160\ \textcolor{comment}{\ \ \ \ storage\ or\ be\ declared\ with\ the\ "{}volatile"{}\ type\ qualifier.}}
\DoxyCodeLine{00161\ \textcolor{comment}{}}
\DoxyCodeLine{00162\ \textcolor{comment}{}}
\DoxyCodeLine{00163\ \textcolor{comment}{Throw\ expression;}}
\DoxyCodeLine{00164\ \textcolor{comment}{}}
\DoxyCodeLine{00165\ \textcolor{comment}{\ \ \ \ A\ Throw\ statement\ is\ very\ much\ like\ a\ return\ statement,\ except\ that}}
\DoxyCodeLine{00166\ \textcolor{comment}{\ \ \ \ the\ expression\ is\ required.\ \ Whereas\ return\ jumps\ back\ to\ the\ place}}
\DoxyCodeLine{00167\ \textcolor{comment}{\ \ \ \ where\ the\ current\ function\ was\ called,\ Throw\ jumps\ back\ to\ the\ Catch}}
\DoxyCodeLine{00168\ \textcolor{comment}{\ \ \ \ clause\ of\ the\ innermost\ enclosing\ Try\ clause.\ \ The\ expression\ must}}
\DoxyCodeLine{00169\ \textcolor{comment}{\ \ \ \ be\ compatible\ with\ the\ type\ passed\ to\ define\_exception\_type().\ \ The}}
\DoxyCodeLine{00170\ \textcolor{comment}{\ \ \ \ exception\ must\ be\ caught,\ otherwise\ the\ program\ may\ crash.}}
\DoxyCodeLine{00171\ \textcolor{comment}{}}
\DoxyCodeLine{00172\ \textcolor{comment}{\ \ \ \ Slight\ limitation:\ \ If\ the\ expression\ is\ a\ comma-\/expression,\ it\ must}}
\DoxyCodeLine{00173\ \textcolor{comment}{\ \ \ \ be\ enclosed\ in\ parentheses.}}
\DoxyCodeLine{00174\ \textcolor{comment}{}}
\DoxyCodeLine{00175\ \textcolor{comment}{}}
\DoxyCodeLine{00176\ \textcolor{comment}{Try\ statement}}
\DoxyCodeLine{00177\ \textcolor{comment}{Catch\_anonymous\ statement}}
\DoxyCodeLine{00178\ \textcolor{comment}{}}
\DoxyCodeLine{00179\ \textcolor{comment}{\ \ \ \ When\ the\ value\ of\ the\ exception\ is\ not\ needed,\ a\ Try/Catch\ statement}}
\DoxyCodeLine{00180\ \textcolor{comment}{\ \ \ \ can\ use\ Catch\_anonymous\ instead\ of\ Catch\ (expression).}}
\DoxyCodeLine{00181\ \textcolor{comment}{}}
\DoxyCodeLine{00182\ \textcolor{comment}{}}
\DoxyCodeLine{00183\ \textcolor{comment}{Everything\ below\ this\ point\ is\ for\ the\ benefit\ of\ the\ compiler.\ \ The}}
\DoxyCodeLine{00184\ \textcolor{comment}{application\ programmer\ should\ pretend\ not\ to\ know\ any\ of\ it,\ because\ it}}
\DoxyCodeLine{00185\ \textcolor{comment}{is\ subject\ to\ change.}}
\DoxyCodeLine{00186\ \textcolor{comment}{}}
\DoxyCodeLine{00187\ \textcolor{comment}{===*/}}
\DoxyCodeLine{00188\ }
\DoxyCodeLine{00189\ }
\DoxyCodeLine{00190\ \textcolor{preprocessor}{\#ifndef\ CEXCEPT\_H}}
\DoxyCodeLine{00191\ \textcolor{preprocessor}{\#define\ CEXCEPT\_H}}
\DoxyCodeLine{00192\ }
\DoxyCodeLine{00193\ }
\DoxyCodeLine{00194\ \textcolor{preprocessor}{\#include\ <setjmp.h>}}
\DoxyCodeLine{00195\ }
\DoxyCodeLine{00196\ \textcolor{preprocessor}{\#define\ define\_exception\_type(etype)\ \(\backslash\)}}
\DoxyCodeLine{00197\ \textcolor{preprocessor}{struct\ exception\_context\ \{\ \(\backslash\)}}
\DoxyCodeLine{00198\ \textcolor{preprocessor}{\ \ jmp\_buf\ *penv;\ \(\backslash\)}}
\DoxyCodeLine{00199\ \textcolor{preprocessor}{\ \ int\ caught;\ \(\backslash\)}}
\DoxyCodeLine{00200\ \textcolor{preprocessor}{\ \ volatile\ struct\ \{\ etype\ etmp;\ \}\ v;\ \(\backslash\)}}
\DoxyCodeLine{00201\ \textcolor{preprocessor}{\}}}
\DoxyCodeLine{00202\ }
\DoxyCodeLine{00203\ \textcolor{comment}{/*\ etmp\ must\ be\ volatile\ because\ the\ application\ might\ use\ automatic\ */}}
\DoxyCodeLine{00204\ \textcolor{comment}{/*\ storage\ for\ the\_exception\_context,\ and\ etmp\ is\ modified\ between\ \ \ */}}
\DoxyCodeLine{00205\ \textcolor{comment}{/*\ the\ calls\ to\ setjmp()\ and\ longjmp().\ \ A\ wrapper\ struct\ is\ used\ to\ */}}
\DoxyCodeLine{00206\ \textcolor{comment}{/*\ avoid\ warnings\ about\ a\ duplicate\ volatile\ qualifier\ in\ case\ etype\ */}}
\DoxyCodeLine{00207\ \textcolor{comment}{/*\ already\ includes\ it.\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{00208\ }
\DoxyCodeLine{00209\ \textcolor{preprocessor}{\#define\ init\_exception\_context(ec)\ ((void)((ec)-\/>penv\ =\ 0))}}
\DoxyCodeLine{00210\ }
\DoxyCodeLine{00211\ \textcolor{preprocessor}{\#define\ Try\ \(\backslash\)}}
\DoxyCodeLine{00212\ \textcolor{preprocessor}{\ \ \{\ \(\backslash\)}}
\DoxyCodeLine{00213\ \textcolor{preprocessor}{\ \ \ \ jmp\_buf\ *exception\_\_prev,\ exception\_\_env;\ \(\backslash\)}}
\DoxyCodeLine{00214\ \textcolor{preprocessor}{\ \ \ \ exception\_\_prev\ =\ the\_exception\_context-\/>penv;\ \(\backslash\)}}
\DoxyCodeLine{00215\ \textcolor{preprocessor}{\ \ \ \ the\_exception\_context-\/>penv\ =\ \&exception\_\_env;\ \(\backslash\)}}
\DoxyCodeLine{00216\ \textcolor{preprocessor}{\ \ \ \ if\ (setjmp(exception\_\_env)\ ==\ 0)\ \{\ \(\backslash\)}}
\DoxyCodeLine{00217\ \textcolor{preprocessor}{\ \ \ \ \ \ do}}
\DoxyCodeLine{00218\ }
\DoxyCodeLine{00219\ \textcolor{preprocessor}{\#define\ exception\_\_catch(action)\ \(\backslash\)}}
\DoxyCodeLine{00220\ \textcolor{preprocessor}{\ \ \ \ \ \ while\ (the\_exception\_context-\/>caught\ =\ 0,\ \(\backslash\)}}
\DoxyCodeLine{00221\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ the\_exception\_context-\/>caught);\ \(\backslash\)}}
\DoxyCodeLine{00222\ \textcolor{preprocessor}{\ \ \ \ \}\ \(\backslash\)}}
\DoxyCodeLine{00223\ \textcolor{preprocessor}{\ \ \ \ else\ \{\ \(\backslash\)}}
\DoxyCodeLine{00224\ \textcolor{preprocessor}{\ \ \ \ \ \ the\_exception\_context-\/>caught\ =\ 1;\ \(\backslash\)}}
\DoxyCodeLine{00225\ \textcolor{preprocessor}{\ \ \ \ \}\ \(\backslash\)}}
\DoxyCodeLine{00226\ \textcolor{preprocessor}{\ \ \ \ the\_exception\_context-\/>penv\ =\ exception\_\_prev;\ \(\backslash\)}}
\DoxyCodeLine{00227\ \textcolor{preprocessor}{\ \ \}\ \(\backslash\)}}
\DoxyCodeLine{00228\ \textcolor{preprocessor}{\ \ if\ (!the\_exception\_context-\/>caught\ ||\ action)\ \{\ \}\ \(\backslash\)}}
\DoxyCodeLine{00229\ \textcolor{preprocessor}{\ \ else}}
\DoxyCodeLine{00230\ }
\DoxyCodeLine{00231\ \textcolor{preprocessor}{\#define\ Catch(e)\ exception\_\_catch(((e)\ =\ the\_exception\_context-\/>v.etmp,\ 0))}}
\DoxyCodeLine{00232\ \textcolor{preprocessor}{\#define\ Catch\_anonymous\ exception\_\_catch(0)}}
\DoxyCodeLine{00233\ }
\DoxyCodeLine{00234\ \textcolor{comment}{/*\ Try\ ends\ with\ do,\ and\ Catch\ begins\ with\ while(0)\ and\ ends\ with\ \ \ \ \ */}}
\DoxyCodeLine{00235\ \textcolor{comment}{/*\ else,\ to\ ensure\ that\ Try/Catch\ syntax\ is\ similar\ to\ if/else\ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{00236\ \textcolor{comment}{/*\ syntax.\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{00237\ \textcolor{comment}{/*\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{00238\ \textcolor{comment}{/*\ The\ 0\ in\ while(0)\ is\ expressed\ as\ x=0,x\ in\ order\ to\ appease\ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{00239\ \textcolor{comment}{/*\ compilers\ that\ warn\ about\ constant\ expressions\ inside\ while().\ \ \ \ \ */}}
\DoxyCodeLine{00240\ \textcolor{comment}{/*\ Most\ compilers\ should\ still\ recognize\ that\ the\ condition\ is\ always\ */}}
\DoxyCodeLine{00241\ \textcolor{comment}{/*\ false\ and\ avoid\ generating\ code\ for\ it.\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{00242\ }
\DoxyCodeLine{00243\ \textcolor{preprocessor}{\#define\ Throw\ \(\backslash\)}}
\DoxyCodeLine{00244\ \textcolor{preprocessor}{\ \ for\ (;;\ longjmp(*the\_exception\_context-\/>penv,\ 1))\ \(\backslash\)}}
\DoxyCodeLine{00245\ \textcolor{preprocessor}{\ \ \ \ the\_exception\_context-\/>v.etmp\ =}}
\DoxyCodeLine{00246\ }
\DoxyCodeLine{00247\ }
\DoxyCodeLine{00248\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ CEXCEPT\_H\ */}\textcolor{preprocessor}{}}

\end{DoxyCode}
