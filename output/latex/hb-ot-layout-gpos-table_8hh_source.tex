\hypertarget{hb-ot-layout-gpos-table_8hh_source}{}\doxysection{hb-\/ot-\/layout-\/gpos-\/table.hh}
\label{hb-ot-layout-gpos-table_8hh_source}\index{AseSprite/aseprite/third\_party/harfbuzz/src/hb-\/ot-\/layout-\/gpos-\/table.hh@{AseSprite/aseprite/third\_party/harfbuzz/src/hb-\/ot-\/layout-\/gpos-\/table.hh}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*}}
\DoxyCodeLine{00002\ \textcolor{comment}{\ *\ Copyright\ ©\ 2007,2008,2009,2010\ \ Red\ Hat,\ Inc.}}
\DoxyCodeLine{00003\ \textcolor{comment}{\ *\ Copyright\ ©\ 2010,2012,2013\ \ Google,\ Inc.}}
\DoxyCodeLine{00004\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00005\ \textcolor{comment}{\ *\ \ This\ is\ part\ of\ HarfBuzz,\ a\ text\ shaping\ library.}}
\DoxyCodeLine{00006\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00007\ \textcolor{comment}{\ *\ Permission\ is\ hereby\ granted,\ without\ written\ agreement\ and\ without}}
\DoxyCodeLine{00008\ \textcolor{comment}{\ *\ license\ or\ royalty\ fees,\ to\ use,\ copy,\ modify,\ and\ distribute\ this}}
\DoxyCodeLine{00009\ \textcolor{comment}{\ *\ software\ and\ its\ documentation\ for\ any\ purpose,\ provided\ that\ the}}
\DoxyCodeLine{00010\ \textcolor{comment}{\ *\ above\ copyright\ notice\ and\ the\ following\ two\ paragraphs\ appear\ in}}
\DoxyCodeLine{00011\ \textcolor{comment}{\ *\ all\ copies\ of\ this\ software.}}
\DoxyCodeLine{00012\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00013\ \textcolor{comment}{\ *\ IN\ NO\ EVENT\ SHALL\ THE\ COPYRIGHT\ HOLDER\ BE\ LIABLE\ TO\ ANY\ PARTY\ FOR}}
\DoxyCodeLine{00014\ \textcolor{comment}{\ *\ DIRECT,\ INDIRECT,\ SPECIAL,\ INCIDENTAL,\ OR\ CONSEQUENTIAL\ DAMAGES}}
\DoxyCodeLine{00015\ \textcolor{comment}{\ *\ ARISING\ OUT\ OF\ THE\ USE\ OF\ THIS\ SOFTWARE\ AND\ ITS\ DOCUMENTATION,\ EVEN}}
\DoxyCodeLine{00016\ \textcolor{comment}{\ *\ IF\ THE\ COPYRIGHT\ HOLDER\ HAS\ BEEN\ ADVISED\ OF\ THE\ POSSIBILITY\ OF\ SUCH}}
\DoxyCodeLine{00017\ \textcolor{comment}{\ *\ DAMAGE.}}
\DoxyCodeLine{00018\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00019\ \textcolor{comment}{\ *\ THE\ COPYRIGHT\ HOLDER\ SPECIFICALLY\ DISCLAIMS\ ANY\ WARRANTIES,\ INCLUDING,}}
\DoxyCodeLine{00020\ \textcolor{comment}{\ *\ BUT\ NOT\ LIMITED\ TO,\ THE\ IMPLIED\ WARRANTIES\ OF\ MERCHANTABILITY\ AND}}
\DoxyCodeLine{00021\ \textcolor{comment}{\ *\ FITNESS\ FOR\ A\ PARTICULAR\ PURPOSE.\ \ THE\ SOFTWARE\ PROVIDED\ HEREUNDER\ IS}}
\DoxyCodeLine{00022\ \textcolor{comment}{\ *\ ON\ AN\ "{}AS\ IS"{}\ BASIS,\ AND\ THE\ COPYRIGHT\ HOLDER\ HAS\ NO\ OBLIGATION\ TO}}
\DoxyCodeLine{00023\ \textcolor{comment}{\ *\ PROVIDE\ MAINTENANCE,\ SUPPORT,\ UPDATES,\ ENHANCEMENTS,\ OR\ MODIFICATIONS.}}
\DoxyCodeLine{00024\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00025\ \textcolor{comment}{\ *\ Red\ Hat\ Author(s):\ Behdad\ Esfahbod}}
\DoxyCodeLine{00026\ \textcolor{comment}{\ *\ Google\ Author(s):\ Behdad\ Esfahbod}}
\DoxyCodeLine{00027\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00028\ }
\DoxyCodeLine{00029\ \textcolor{preprocessor}{\#ifndef\ HB\_OT\_LAYOUT\_GPOS\_TABLE\_HH}}
\DoxyCodeLine{00030\ \textcolor{preprocessor}{\#define\ HB\_OT\_LAYOUT\_GPOS\_TABLE\_HH}}
\DoxyCodeLine{00031\ }
\DoxyCodeLine{00032\ \textcolor{preprocessor}{\#include\ "{}hb-\/ot-\/layout-\/gsubgpos.hh"{}}}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00034\ }
\DoxyCodeLine{00035\ \textcolor{keyword}{namespace\ }OT\ \{}
\DoxyCodeLine{00036\ }
\DoxyCodeLine{00037\ \textcolor{keyword}{struct\ }MarkArray;}
\DoxyCodeLine{00038\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ Markclass\_closure\_and\_remap\_indexes\ (\textcolor{keyword}{const}\ Coverage\ \ \&mark\_coverage,}
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ MarkArray\ \&mark\_array,}
\DoxyCodeLine{00040\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structhb__set__t}{hb\_set\_t}}\ \ \&glyphset,}
\DoxyCodeLine{00041\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structhb__map__t}{hb\_map\_t}}*\ \ \ \ \ \ \ \ klass\_mapping\ \textcolor{comment}{/*\ INOUT\ */});}
\DoxyCodeLine{00042\ }
\DoxyCodeLine{00043\ \textcolor{comment}{/*\ buffer\ **position**\ var\ allocations\ */}}
\DoxyCodeLine{00044\ \textcolor{preprocessor}{\#define\ attach\_chain()\ var.i16[0]\ }\textcolor{comment}{/*\ glyph\ to\ which\ this\ attaches\ to,\ relative\ to\ current\ glyphs;\ negative\ for\ going\ back,\ positive\ for\ forward.\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00045\ \textcolor{preprocessor}{\#define\ attach\_type()\ var.u8[2]\ }\textcolor{comment}{/*\ attachment\ type\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00046\ \textcolor{comment}{/*\ Note!\ if\ attach\_chain()\ is\ zero,\ the\ value\ of\ attach\_type()\ is\ irrelevant.\ */}}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00048\ \textcolor{keyword}{enum}\ attach\_type\_t\ \{}
\DoxyCodeLine{00049\ \ \ ATTACH\_TYPE\_NONE\ \ =\ 0X00,}
\DoxyCodeLine{00050\ }
\DoxyCodeLine{00051\ \ \ \textcolor{comment}{/*\ Each\ attachment\ should\ be\ either\ a\ mark\ or\ a\ cursive;\ can't\ be\ both.\ */}}
\DoxyCodeLine{00052\ \ \ ATTACH\_TYPE\_MARK\ \ =\ 0X01,}
\DoxyCodeLine{00053\ \ \ ATTACH\_TYPE\_CURSIVE\ \ \ =\ 0X02,}
\DoxyCodeLine{00054\ \};}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00056\ }
\DoxyCodeLine{00057\ \textcolor{comment}{/*\ Shared\ Tables:\ ValueRecord,\ Anchor\ Table,\ and\ MarkArray\ */}}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00059\ \textcolor{keyword}{typedef}\ HBUINT16\ \mbox{\hyperlink{union_value}{Value}};}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00061\ \textcolor{keyword}{typedef}\ UnsizedArrayOf<Value>\ ValueRecord;}
\DoxyCodeLine{00062\ }
\DoxyCodeLine{00063\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_o_t_1_1_value_format}{ValueFormat}}\ :\ \mbox{\hyperlink{struct_o_t_1_1_int_type}{HBUINT16}}}
\DoxyCodeLine{00064\ \{}
\DoxyCodeLine{00065\ \ \ \textcolor{keyword}{enum}\ Flags\ \{}
\DoxyCodeLine{00066\ \ \ \ \ xPlacement\ \ =\ 0x0001u,\ \ \textcolor{comment}{/*\ Includes\ horizontal\ adjustment\ for\ placement\ */}}
\DoxyCodeLine{00067\ \ \ \ \ yPlacement\ \ =\ 0x0002u,\ \ \textcolor{comment}{/*\ Includes\ vertical\ adjustment\ for\ placement\ */}}
\DoxyCodeLine{00068\ \ \ \ \ xAdvance\ \ \ \ =\ 0x0004u,\ \ \textcolor{comment}{/*\ Includes\ horizontal\ adjustment\ for\ advance\ */}}
\DoxyCodeLine{00069\ \ \ \ \ yAdvance\ \ \ \ =\ 0x0008u,\ \ \textcolor{comment}{/*\ Includes\ vertical\ adjustment\ for\ advance\ */}}
\DoxyCodeLine{00070\ \ \ \ \ xPlaDevice\ \ =\ 0x0010u,\ \ \textcolor{comment}{/*\ Includes\ horizontal\ Device\ table\ for\ placement\ */}}
\DoxyCodeLine{00071\ \ \ \ \ yPlaDevice\ \ =\ 0x0020u,\ \ \textcolor{comment}{/*\ Includes\ vertical\ Device\ table\ for\ placement\ */}}
\DoxyCodeLine{00072\ \ \ \ \ xAdvDevice\ \ =\ 0x0040u,\ \ \textcolor{comment}{/*\ Includes\ horizontal\ Device\ table\ for\ advance\ */}}
\DoxyCodeLine{00073\ \ \ \ \ yAdvDevice\ \ =\ 0x0080u,\ \ \textcolor{comment}{/*\ Includes\ vertical\ Device\ table\ for\ advance\ */}}
\DoxyCodeLine{00074\ \ \ \ \ ignored\ =\ 0x0F00u,\ \ \textcolor{comment}{/*\ Was\ used\ in\ TrueType\ Open\ for\ MM\ fonts\ */}}
\DoxyCodeLine{00075\ \ \ \ \ reserved\ \ \ \ =\ 0xF000u,\ \ \textcolor{comment}{/*\ For\ future\ use\ */}}
\DoxyCodeLine{00076\ }
\DoxyCodeLine{00077\ \ \ \ \ devices\ =\ 0x00F0u\ \ \ \textcolor{comment}{/*\ Mask\ for\ having\ any\ Device\ table\ */}}
\DoxyCodeLine{00078\ \ \ \};}
\DoxyCodeLine{00079\ }
\DoxyCodeLine{00080\ \textcolor{comment}{/*\ All\ fields\ are\ options.\ \ Only\ those\ available\ advance\ the\ value\ pointer.\ */}}
\DoxyCodeLine{00081\ \textcolor{preprocessor}{\#if\ 0}}
\DoxyCodeLine{00082\ \ \ \mbox{\hyperlink{struct_o_t_1_1_int_type}{HBINT16}}\ \ \ \ \ \ \ \ xPlacement;\ \textcolor{comment}{/*\ Horizontal\ adjustment\ for}}
\DoxyCodeLine{00083\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ placement-\/-\/in\ design\ units\ */}}
\DoxyCodeLine{00084\ \ \ \mbox{\hyperlink{struct_o_t_1_1_int_type}{HBINT16}}\ \ \ \ \ \ \ \ yPlacement;\ \textcolor{comment}{/*\ Vertical\ adjustment\ for}}
\DoxyCodeLine{00085\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ placement-\/-\/in\ design\ units\ */}}
\DoxyCodeLine{00086\ \ \ \mbox{\hyperlink{struct_o_t_1_1_int_type}{HBINT16}}\ \ \ \ \ \ \ \ xAdvance;\ \ \ \textcolor{comment}{/*\ Horizontal\ adjustment\ for}}
\DoxyCodeLine{00087\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ advance-\/-\/in\ design\ units\ (only\ used}}
\DoxyCodeLine{00088\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ for\ horizontal\ writing)\ */}}
\DoxyCodeLine{00089\ \ \ \mbox{\hyperlink{struct_o_t_1_1_int_type}{HBINT16}}\ \ \ \ \ \ \ \ yAdvance;\ \ \ \textcolor{comment}{/*\ Vertical\ adjustment\ for\ advance-\/-\/in}}
\DoxyCodeLine{00090\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ design\ units\ (only\ used\ for\ vertical}}
\DoxyCodeLine{00091\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ writing)\ */}}
\DoxyCodeLine{00092\ \ \ \mbox{\hyperlink{struct_o_t_1_1_offset_to}{Offset16To<Device>}}\ \ xPlaDevice;\ \textcolor{comment}{/*\ Offset\ to\ Device\ table\ for}}
\DoxyCodeLine{00093\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ horizontal\ placement-\/-\/measured\ from}}
\DoxyCodeLine{00094\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ beginning\ of\ PosTable\ (may\ be\ NULL)\ */}}
\DoxyCodeLine{00095\ \ \ \mbox{\hyperlink{struct_o_t_1_1_offset_to}{Offset16To<Device>}}\ \ yPlaDevice;\ \textcolor{comment}{/*\ Offset\ to\ Device\ table\ for\ vertical}}
\DoxyCodeLine{00096\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ placement-\/-\/measured\ from\ beginning}}
\DoxyCodeLine{00097\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ of\ PosTable\ (may\ be\ NULL)\ */}}
\DoxyCodeLine{00098\ \ \ \mbox{\hyperlink{struct_o_t_1_1_offset_to}{Offset16To<Device>}}\ \ xAdvDevice;\ \textcolor{comment}{/*\ Offset\ to\ Device\ table\ for}}
\DoxyCodeLine{00099\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ horizontal\ advance-\/-\/measured\ from}}
\DoxyCodeLine{00100\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ beginning\ of\ PosTable\ (may\ be\ NULL)\ */}}
\DoxyCodeLine{00101\ \ \ \mbox{\hyperlink{struct_o_t_1_1_offset_to}{Offset16To<Device>}}\ \ yAdvDevice;\ \textcolor{comment}{/*\ Offset\ to\ Device\ table\ for\ vertical}}
\DoxyCodeLine{00102\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ advance-\/-\/measured\ from\ beginning\ of}}
\DoxyCodeLine{00103\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ PosTable\ (may\ be\ NULL)\ */}}
\DoxyCodeLine{00104\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00105\ }
\DoxyCodeLine{00106\ \ \ \mbox{\hyperlink{struct_o_t_1_1_int_type}{IntType}}\&\ operator\ =\ (uint16\_t\ i)\ \{\ v\ =\ i;\ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};\ \}}
\DoxyCodeLine{00107\ }
\DoxyCodeLine{00108\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ get\_len\ ()\textcolor{keyword}{\ const\ \ }\{\ \textcolor{keywordflow}{return}\ hb\_popcount\ ((\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int})\ *\textcolor{keyword}{this});\ \}}
\DoxyCodeLine{00109\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ get\_size\ ()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ get\_len\ ()\ *\ Value::static\_size;\ \}}
\DoxyCodeLine{00110\ }
\DoxyCodeLine{00111\ \ \ \textcolor{keywordtype}{bool}\ apply\_value\ (\mbox{\hyperlink{struct_o_t_1_1hb__ot__apply__context__t}{hb\_ot\_apply\_context\_t}}\ *c,}
\DoxyCodeLine{00112\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \ *base,}
\DoxyCodeLine{00113\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1_int_type}{Value}}\ \ \ \ \ \ \ \ \ \ \ *values,}
\DoxyCodeLine{00114\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structhb__glyph__position__t}{hb\_glyph\_position\_t}}\ \ \ \&glyph\_pos)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00115\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00116\ \ \ \ \ \textcolor{keywordtype}{bool}\ ret\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00117\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ format\ =\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00118\ \ \ \ \ \textcolor{keywordflow}{if}\ (!format)\ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{00119\ }
\DoxyCodeLine{00120\ \ \ \ \ \mbox{\hyperlink{structhb__font__t}{hb\_font\_t}}\ *font\ =\ c-\/>font;}
\DoxyCodeLine{00121\ \ \ \ \ \textcolor{keywordtype}{bool}\ horizontal\ =}
\DoxyCodeLine{00122\ \textcolor{preprocessor}{\#ifndef\ HB\_NO\_VERTICAL}}
\DoxyCodeLine{00123\ \ \ \ \ \ \ HB\_DIRECTION\_IS\_HORIZONTAL\ (c-\/>direction)}
\DoxyCodeLine{00124\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00125\ \ \ \ \ \ \ \textcolor{keyword}{true}}
\DoxyCodeLine{00126\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00127\ \ \ \ \ \ \ ;}
\DoxyCodeLine{00128\ }
\DoxyCodeLine{00129\ \ \ \ \ \textcolor{keywordflow}{if}\ (format\ \&\ xPlacement)\ glyph\_pos.x\_offset\ \ +=\ font-\/>em\_scale\_x\ (get\_short\ (values++,\ \&ret));}
\DoxyCodeLine{00130\ \ \ \ \ \textcolor{keywordflow}{if}\ (format\ \&\ yPlacement)\ glyph\_pos.y\_offset\ \ +=\ font-\/>em\_scale\_y\ (get\_short\ (values++,\ \&ret));}
\DoxyCodeLine{00131\ \ \ \ \ \textcolor{keywordflow}{if}\ (format\ \&\ xAdvance)\ \{}
\DoxyCodeLine{00132\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (likely\ (horizontal))\ glyph\_pos.x\_advance\ +=\ font-\/>em\_scale\_x\ (get\_short\ (values,\ \&ret));}
\DoxyCodeLine{00133\ \ \ \ \ \ \ values++;}
\DoxyCodeLine{00134\ \ \ \ \ \}}
\DoxyCodeLine{00135\ \ \ \ \ \textcolor{comment}{/*\ y\_advance\ values\ grow\ downward\ but\ font-\/space\ grows\ upward,\ hence\ negation\ */}}
\DoxyCodeLine{00136\ \ \ \ \ \textcolor{keywordflow}{if}\ (format\ \&\ yAdvance)\ \{}
\DoxyCodeLine{00137\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!horizontal))\ glyph\_pos.y\_advance\ -\/=\ font-\/>em\_scale\_y\ (get\_short\ (values,\ \&ret));}
\DoxyCodeLine{00138\ \ \ \ \ \ \ values++;}
\DoxyCodeLine{00139\ \ \ \ \ \}}
\DoxyCodeLine{00140\ }
\DoxyCodeLine{00141\ \ \ \ \ \textcolor{keywordflow}{if}\ (!has\_device\ ())\ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{00142\ }
\DoxyCodeLine{00143\ \ \ \ \ \textcolor{keywordtype}{bool}\ use\_x\_device\ =\ font-\/>x\_ppem\ ||\ font-\/>num\_coords;}
\DoxyCodeLine{00144\ \ \ \ \ \textcolor{keywordtype}{bool}\ use\_y\_device\ =\ font-\/>y\_ppem\ ||\ font-\/>num\_coords;}
\DoxyCodeLine{00145\ }
\DoxyCodeLine{00146\ \ \ \ \ \textcolor{keywordflow}{if}\ (!use\_x\_device\ \&\&\ !use\_y\_device)\ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{00147\ }
\DoxyCodeLine{00148\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1_variation_store}{VariationStore}}\ \&store\ =\ c-\/>var\_store;}
\DoxyCodeLine{00149\ }
\DoxyCodeLine{00150\ \ \ \ \ \textcolor{comment}{/*\ pixel\ -\/>\ fractional\ pixel\ */}}
\DoxyCodeLine{00151\ \ \ \ \ \textcolor{keywordflow}{if}\ (format\ \&\ xPlaDevice)\ \{}
\DoxyCodeLine{00152\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (use\_x\_device)\ glyph\_pos.x\_offset\ \ +=\ (base\ +\ get\_device\ (values,\ \&ret)).get\_x\_delta\ (font,\ store);}
\DoxyCodeLine{00153\ \ \ \ \ \ \ values++;}
\DoxyCodeLine{00154\ \ \ \ \ \}}
\DoxyCodeLine{00155\ \ \ \ \ \textcolor{keywordflow}{if}\ (format\ \&\ yPlaDevice)\ \{}
\DoxyCodeLine{00156\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (use\_y\_device)\ glyph\_pos.y\_offset\ \ +=\ (base\ +\ get\_device\ (values,\ \&ret)).get\_y\_delta\ (font,\ store);}
\DoxyCodeLine{00157\ \ \ \ \ \ \ values++;}
\DoxyCodeLine{00158\ \ \ \ \ \}}
\DoxyCodeLine{00159\ \ \ \ \ \textcolor{keywordflow}{if}\ (format\ \&\ xAdvDevice)\ \{}
\DoxyCodeLine{00160\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (horizontal\ \&\&\ use\_x\_device)\ glyph\_pos.x\_advance\ +=\ (base\ +\ get\_device\ (values,\ \&ret)).get\_x\_delta\ (font,\ store);}
\DoxyCodeLine{00161\ \ \ \ \ \ \ values++;}
\DoxyCodeLine{00162\ \ \ \ \ \}}
\DoxyCodeLine{00163\ \ \ \ \ \textcolor{keywordflow}{if}\ (format\ \&\ yAdvDevice)\ \{}
\DoxyCodeLine{00164\ \ \ \ \ \ \ \textcolor{comment}{/*\ y\_advance\ values\ grow\ downward\ but\ font-\/space\ grows\ upward,\ hence\ negation\ */}}
\DoxyCodeLine{00165\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!horizontal\ \&\&\ use\_y\_device)\ glyph\_pos.y\_advance\ -\/=\ (base\ +\ get\_device\ (values,\ \&ret)).get\_y\_delta\ (font,\ store);}
\DoxyCodeLine{00166\ \ \ \ \ \ \ values++;}
\DoxyCodeLine{00167\ \ \ \ \ \}}
\DoxyCodeLine{00168\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{00169\ \ \ \}}
\DoxyCodeLine{00170\ }
\DoxyCodeLine{00171\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ get\_effective\_format\ (\textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1_int_type}{Value}}\ *values)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00172\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00173\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ format\ =\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00174\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ flag\ =\ xPlacement;\ flag\ <=\ yAdvDevice;\ flag\ =\ flag\ <<\ 1)\ \{}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (format\ \&\ flag)\ should\_drop\ (*values++,\ (Flags)\ flag,\ \&format);}
\DoxyCodeLine{00176\ \ \ \ \ \}}
\DoxyCodeLine{00177\ }
\DoxyCodeLine{00178\ \ \ \ \ \textcolor{keywordflow}{return}\ format;}
\DoxyCodeLine{00179\ \ \ \}}
\DoxyCodeLine{00180\ }
\DoxyCodeLine{00181\ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Iterator,}
\DoxyCodeLine{00182\ \ \ \ \ \ \ hb\_requires\ (hb\_is\_iterator\ (Iterator))>}
\DoxyCodeLine{00183\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ get\_effective\_format\ (Iterator\ it)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00184\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ new\_format\ =\ 0;}
\DoxyCodeLine{00185\ }
\DoxyCodeLine{00186\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{const}\ \mbox{\hyperlink{structhb__array__t}{hb\_array\_t<const\ Value>}}\&\ values\ :\ it)}
\DoxyCodeLine{00187\ \ \ \ \ \ \ new\_format\ =\ new\_format\ |\ get\_effective\_format\ (\&values);}
\DoxyCodeLine{00188\ }
\DoxyCodeLine{00189\ \ \ \ \ \textcolor{keywordflow}{return}\ new\_format;}
\DoxyCodeLine{00190\ \ \ \}}
\DoxyCodeLine{00191\ }
\DoxyCodeLine{00192\ \ \ \textcolor{keywordtype}{void}\ copy\_values\ (\mbox{\hyperlink{structhb__serialize__context__t}{hb\_serialize\_context\_t}}\ *c,}
\DoxyCodeLine{00193\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ new\_format,}
\DoxyCodeLine{00194\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}\ *base,}
\DoxyCodeLine{00195\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1_int_type}{Value}}\ *values,}
\DoxyCodeLine{00196\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structhb__map__t}{hb\_map\_t}}\ *layout\_variation\_idx\_map)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00197\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00198\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ format\ =\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00199\ \ \ \ \ \textcolor{keywordflow}{if}\ (!format)\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00200\ }
\DoxyCodeLine{00201\ \ \ \ \ \textcolor{keywordflow}{if}\ (format\ \&\ xPlacement)\ copy\_value\ (c,\ new\_format,\ xPlacement,\ *values++);}
\DoxyCodeLine{00202\ \ \ \ \ \textcolor{keywordflow}{if}\ (format\ \&\ yPlacement)\ copy\_value\ (c,\ new\_format,\ yPlacement,\ *values++);}
\DoxyCodeLine{00203\ \ \ \ \ \textcolor{keywordflow}{if}\ (format\ \&\ xAdvance)\ \ \ copy\_value\ (c,\ new\_format,\ xAdvance,\ *values++);}
\DoxyCodeLine{00204\ \ \ \ \ \textcolor{keywordflow}{if}\ (format\ \&\ yAdvance)\ \ \ copy\_value\ (c,\ new\_format,\ yAdvance,\ *values++);}
\DoxyCodeLine{00205\ }
\DoxyCodeLine{00206\ \ \ \ \ \textcolor{keywordflow}{if}\ (format\ \&\ xPlaDevice)\ copy\_device\ (c,\ base,\ values++,\ layout\_variation\_idx\_map);}
\DoxyCodeLine{00207\ \ \ \ \ \textcolor{keywordflow}{if}\ (format\ \&\ yPlaDevice)\ copy\_device\ (c,\ base,\ values++,\ layout\_variation\_idx\_map);}
\DoxyCodeLine{00208\ \ \ \ \ \textcolor{keywordflow}{if}\ (format\ \&\ xAdvDevice)\ copy\_device\ (c,\ base,\ values++,\ layout\_variation\_idx\_map);}
\DoxyCodeLine{00209\ \ \ \ \ \textcolor{keywordflow}{if}\ (format\ \&\ yAdvDevice)\ copy\_device\ (c,\ base,\ values++,\ layout\_variation\_idx\_map);}
\DoxyCodeLine{00210\ \ \ \}}
\DoxyCodeLine{00211\ }
\DoxyCodeLine{00212\ \ \ \textcolor{keywordtype}{void}\ copy\_value\ (\mbox{\hyperlink{structhb__serialize__context__t}{hb\_serialize\_context\_t}}\ *c,}
\DoxyCodeLine{00213\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ new\_format,}
\DoxyCodeLine{00214\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Flags\ flag,}
\DoxyCodeLine{00215\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_o_t_1_1_int_type}{Value}}\ \mbox{\hyperlink{classvalue}{value}})\textcolor{keyword}{\ const}}
\DoxyCodeLine{00216\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00217\ \ \ \ \ \textcolor{comment}{//\ Filter\ by\ new\ format.}}
\DoxyCodeLine{00218\ \ \ \ \ \textcolor{keywordflow}{if}\ (!(new\_format\ \&\ flag))\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00219\ \ \ \ \ c-\/>copy\ (\mbox{\hyperlink{classvalue}{value}});}
\DoxyCodeLine{00220\ \ \ \}}
\DoxyCodeLine{00221\ }
\DoxyCodeLine{00222\ \ \ \textcolor{keywordtype}{void}\ collect\_variation\_indices\ (\mbox{\hyperlink{struct_o_t_1_1hb__collect__variation__indices__context__t}{hb\_collect\_variation\_indices\_context\_t}}\ *c,}
\DoxyCodeLine{00223\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}\ *base,}
\DoxyCodeLine{00224\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structhb__array__t}{hb\_array\_t<const\ Value>}}\&\ values)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00225\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00226\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ format\ =\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00227\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ i\ =\ 0;}
\DoxyCodeLine{00228\ \ \ \ \ \textcolor{keywordflow}{if}\ (format\ \&\ xPlacement)\ i++;}
\DoxyCodeLine{00229\ \ \ \ \ \textcolor{keywordflow}{if}\ (format\ \&\ yPlacement)\ i++;}
\DoxyCodeLine{00230\ \ \ \ \ \textcolor{keywordflow}{if}\ (format\ \&\ xAdvance)\ i++;}
\DoxyCodeLine{00231\ \ \ \ \ \textcolor{keywordflow}{if}\ (format\ \&\ yAdvance)\ i++;}
\DoxyCodeLine{00232\ \ \ \ \ \textcolor{keywordflow}{if}\ (format\ \&\ xPlaDevice)}
\DoxyCodeLine{00233\ \ \ \ \ \{}
\DoxyCodeLine{00234\ \ \ \ \ \ \ (base\ +\ get\_device\ (\&(values[i]))).collect\_variation\_indices\ (c-\/>layout\_variation\_indices);}
\DoxyCodeLine{00235\ \ \ \ \ \ \ i++;}
\DoxyCodeLine{00236\ \ \ \ \ \}}
\DoxyCodeLine{00237\ }
\DoxyCodeLine{00238\ \ \ \ \ \textcolor{keywordflow}{if}\ (format\ \&\ ValueFormat::yPlaDevice)}
\DoxyCodeLine{00239\ \ \ \ \ \{}
\DoxyCodeLine{00240\ \ \ \ \ \ \ (base\ +\ get\_device\ (\&(values[i]))).collect\_variation\_indices\ (c-\/>layout\_variation\_indices);}
\DoxyCodeLine{00241\ \ \ \ \ \ \ i++;}
\DoxyCodeLine{00242\ \ \ \ \ \}}
\DoxyCodeLine{00243\ }
\DoxyCodeLine{00244\ \ \ \ \ \textcolor{keywordflow}{if}\ (format\ \&\ ValueFormat::xAdvDevice)}
\DoxyCodeLine{00245\ \ \ \ \ \{}
\DoxyCodeLine{00246\ }
\DoxyCodeLine{00247\ \ \ \ \ \ \ (base\ +\ get\_device\ (\&(values[i]))).collect\_variation\_indices\ (c-\/>layout\_variation\_indices);}
\DoxyCodeLine{00248\ \ \ \ \ \ \ i++;}
\DoxyCodeLine{00249\ \ \ \ \ \}}
\DoxyCodeLine{00250\ }
\DoxyCodeLine{00251\ \ \ \ \ \textcolor{keywordflow}{if}\ (format\ \&\ ValueFormat::yAdvDevice)}
\DoxyCodeLine{00252\ \ \ \ \ \{}
\DoxyCodeLine{00253\ }
\DoxyCodeLine{00254\ \ \ \ \ \ \ (base\ +\ get\_device\ (\&(values[i]))).collect\_variation\_indices\ (c-\/>layout\_variation\_indices);}
\DoxyCodeLine{00255\ \ \ \ \ \ \ i++;}
\DoxyCodeLine{00256\ \ \ \ \ \}}
\DoxyCodeLine{00257\ \ \ \}}
\DoxyCodeLine{00258\ }
\DoxyCodeLine{00259\ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00260\ \ \ \textcolor{keywordtype}{bool}\ sanitize\_value\_devices\ (\mbox{\hyperlink{structhb__sanitize__context__t}{hb\_sanitize\_context\_t}}\ *c,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}\ *base,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1_int_type}{Value}}\ *values)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00261\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00262\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ format\ =\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00263\ }
\DoxyCodeLine{00264\ \ \ \ \ \textcolor{keywordflow}{if}\ (format\ \&\ xPlacement)\ values++;}
\DoxyCodeLine{00265\ \ \ \ \ \textcolor{keywordflow}{if}\ (format\ \&\ yPlacement)\ values++;}
\DoxyCodeLine{00266\ \ \ \ \ \textcolor{keywordflow}{if}\ (format\ \&\ xAdvance)\ \ \ values++;}
\DoxyCodeLine{00267\ \ \ \ \ \textcolor{keywordflow}{if}\ (format\ \&\ yAdvance)\ \ \ values++;}
\DoxyCodeLine{00268\ }
\DoxyCodeLine{00269\ \ \ \ \ \textcolor{keywordflow}{if}\ ((format\ \&\ xPlaDevice)\ \&\&\ !get\_device\ (values++).sanitize\ (c,\ base))\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00270\ \ \ \ \ \textcolor{keywordflow}{if}\ ((format\ \&\ yPlaDevice)\ \&\&\ !get\_device\ (values++).sanitize\ (c,\ base))\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00271\ \ \ \ \ \textcolor{keywordflow}{if}\ ((format\ \&\ xAdvDevice)\ \&\&\ !get\_device\ (values++).sanitize\ (c,\ base))\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00272\ \ \ \ \ \textcolor{keywordflow}{if}\ ((format\ \&\ yAdvDevice)\ \&\&\ !get\_device\ (values++).sanitize\ (c,\ base))\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00273\ }
\DoxyCodeLine{00274\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00275\ \ \ \}}
\DoxyCodeLine{00276\ }
\DoxyCodeLine{00277\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{struct_o_t_1_1_offset_to}{Offset16To<Device>}}\&\ get\_device\ (\mbox{\hyperlink{struct_o_t_1_1_int_type}{Value}}*\ \mbox{\hyperlink{classvalue}{value}})}
\DoxyCodeLine{00278\ \ \ \{}
\DoxyCodeLine{00279\ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{static\_cast<}\mbox{\hyperlink{struct_o_t_1_1_offset_to}{Offset16To<Device>}}\ *\textcolor{keyword}{>}\ (\mbox{\hyperlink{classvalue}{value}});}
\DoxyCodeLine{00280\ \ \ \}}
\DoxyCodeLine{00281\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1_offset_to}{Offset16To<Device>}}\&\ get\_device\ (\textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1_int_type}{Value}}*\ \mbox{\hyperlink{classvalue}{value}},\ \textcolor{keywordtype}{bool}\ *worked=\textcolor{keyword}{nullptr})}
\DoxyCodeLine{00282\ \ \ \{}
\DoxyCodeLine{00283\ \ \ \ \ \textcolor{keywordflow}{if}\ (worked)\ *worked\ |=\ bool\ (*\mbox{\hyperlink{classvalue}{value}});}
\DoxyCodeLine{00284\ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{static\_cast<}\textcolor{keyword}{const\ }\mbox{\hyperlink{struct_o_t_1_1_offset_to}{Offset16To<Device>}}\ *\textcolor{keyword}{>}\ (\mbox{\hyperlink{classvalue}{value}});}
\DoxyCodeLine{00285\ \ \ \}}
\DoxyCodeLine{00286\ }
\DoxyCodeLine{00287\ \ \ \textcolor{keywordtype}{bool}\ copy\_device\ (\mbox{\hyperlink{structhb__serialize__context__t}{hb\_serialize\_context\_t}}\ *c,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}\ *base,}
\DoxyCodeLine{00288\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1_int_type}{Value}}\ *src\_value,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structhb__map__t}{hb\_map\_t}}\ *layout\_variation\_idx\_map)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00289\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00290\ \ \ \ \ \mbox{\hyperlink{struct_o_t_1_1_int_type}{Value}}\ \ *dst\_value\ =\ c-\/>copy\ (*src\_value);}
\DoxyCodeLine{00291\ }
\DoxyCodeLine{00292\ \ \ \ \ \textcolor{keywordflow}{if}\ (!dst\_value)\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00293\ \ \ \ \ \textcolor{keywordflow}{if}\ (*dst\_value\ ==\ 0)\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00294\ }
\DoxyCodeLine{00295\ \ \ \ \ *dst\_value\ =\ 0;}
\DoxyCodeLine{00296\ \ \ \ \ c-\/>push\ ();}
\DoxyCodeLine{00297\ \ \ \ \ \textcolor{keywordflow}{if}\ ((base\ +\ get\_device\ (src\_value)).copy\ (c,\ layout\_variation\_idx\_map))}
\DoxyCodeLine{00298\ \ \ \ \ \{}
\DoxyCodeLine{00299\ \ \ \ \ \ \ c-\/>add\_link\ (*dst\_value,\ c-\/>pop\_pack\ ());}
\DoxyCodeLine{00300\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00301\ \ \ \ \ \}}
\DoxyCodeLine{00302\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00303\ \ \ \ \ \{}
\DoxyCodeLine{00304\ \ \ \ \ \ \ c-\/>pop\_discard\ ();}
\DoxyCodeLine{00305\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00306\ \ \ \ \ \}}
\DoxyCodeLine{00307\ \ \ \}}
\DoxyCodeLine{00308\ }
\DoxyCodeLine{00309\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1_int_type}{HBINT16}}\&\ get\_short\ (\textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1_int_type}{Value}}*\ \mbox{\hyperlink{classvalue}{value}},\ \textcolor{keywordtype}{bool}\ *worked=\textcolor{keyword}{nullptr})}
\DoxyCodeLine{00310\ \ \ \{}
\DoxyCodeLine{00311\ \ \ \ \ \textcolor{keywordflow}{if}\ (worked)\ *worked\ |=\ bool\ (*\mbox{\hyperlink{classvalue}{value}});}
\DoxyCodeLine{00312\ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const\ }\mbox{\hyperlink{struct_o_t_1_1_int_type}{HBINT16}}\ *\textcolor{keyword}{>}\ (\mbox{\hyperlink{classvalue}{value}});}
\DoxyCodeLine{00313\ \ \ \}}
\DoxyCodeLine{00314\ }
\DoxyCodeLine{00315\ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00316\ }
\DoxyCodeLine{00317\ \ \ \textcolor{keywordtype}{bool}\ has\_device\ ()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00318\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00319\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ format\ =\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00320\ \ \ \ \ \textcolor{keywordflow}{return}\ (format\ \&\ devices)\ !=\ 0;}
\DoxyCodeLine{00321\ \ \ \}}
\DoxyCodeLine{00322\ }
\DoxyCodeLine{00323\ \ \ \textcolor{keywordtype}{bool}\ sanitize\_value\ (\mbox{\hyperlink{structhb__sanitize__context__t}{hb\_sanitize\_context\_t}}\ *c,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}\ *base,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1_int_type}{Value}}\ *values)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00324\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00325\ \ \ \ \ TRACE\_SANITIZE\ (\textcolor{keyword}{this});}
\DoxyCodeLine{00326\ \ \ \ \ return\_trace\ (c-\/>check\_range\ (values,\ get\_size\ ())\ \&\&\ (!has\_device\ ()\ ||\ sanitize\_value\_devices\ (c,\ base,\ values)));}
\DoxyCodeLine{00327\ \ \ \}}
\DoxyCodeLine{00328\ }
\DoxyCodeLine{00329\ \ \ \textcolor{keywordtype}{bool}\ sanitize\_values\ (\mbox{\hyperlink{structhb__sanitize__context__t}{hb\_sanitize\_context\_t}}\ *c,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}\ *base,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1_int_type}{Value}}\ *values,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ count)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00330\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00331\ \ \ \ \ TRACE\_SANITIZE\ (\textcolor{keyword}{this});}
\DoxyCodeLine{00332\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ len\ =\ get\_len\ ();}
\DoxyCodeLine{00333\ }
\DoxyCodeLine{00334\ \ \ \ \ \textcolor{keywordflow}{if}\ (!c-\/>check\_range\ (values,\ count,\ get\_size\ ()))\ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{00335\ }
\DoxyCodeLine{00336\ \ \ \ \ \textcolor{keywordflow}{if}\ (!has\_device\ ())\ return\_trace\ (\textcolor{keyword}{true});}
\DoxyCodeLine{00337\ }
\DoxyCodeLine{00338\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ count;\ i++)\ \{}
\DoxyCodeLine{00339\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!sanitize\_value\_devices\ (c,\ base,\ values))}
\DoxyCodeLine{00340\ \ \ \ \ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{00341\ \ \ \ \ \ \ values\ +=\ len;}
\DoxyCodeLine{00342\ \ \ \ \ \}}
\DoxyCodeLine{00343\ }
\DoxyCodeLine{00344\ \ \ \ \ return\_trace\ (\textcolor{keyword}{true});}
\DoxyCodeLine{00345\ \ \ \}}
\DoxyCodeLine{00346\ }
\DoxyCodeLine{00347\ \ \ \textcolor{comment}{/*\ Just\ sanitize\ referenced\ Device\ tables.\ \ Doesn't\ check\ the\ values\ themselves.\ */}}
\DoxyCodeLine{00348\ \ \ \textcolor{keywordtype}{bool}\ sanitize\_values\_stride\_unsafe\ (\mbox{\hyperlink{structhb__sanitize__context__t}{hb\_sanitize\_context\_t}}\ *c,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}\ *base,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1_int_type}{Value}}\ *values,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ count,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ stride)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00349\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00350\ \ \ \ \ TRACE\_SANITIZE\ (\textcolor{keyword}{this});}
\DoxyCodeLine{00351\ }
\DoxyCodeLine{00352\ \ \ \ \ \textcolor{keywordflow}{if}\ (!has\_device\ ())\ return\_trace\ (\textcolor{keyword}{true});}
\DoxyCodeLine{00353\ }
\DoxyCodeLine{00354\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ count;\ i++)\ \{}
\DoxyCodeLine{00355\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!sanitize\_value\_devices\ (c,\ base,\ values))}
\DoxyCodeLine{00356\ \ \ \ \ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{00357\ \ \ \ \ \ \ values\ +=\ stride;}
\DoxyCodeLine{00358\ \ \ \ \ \}}
\DoxyCodeLine{00359\ }
\DoxyCodeLine{00360\ \ \ \ \ return\_trace\ (\textcolor{keyword}{true});}
\DoxyCodeLine{00361\ \ \ \}}
\DoxyCodeLine{00362\ }
\DoxyCodeLine{00363\ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00364\ }
\DoxyCodeLine{00365\ \ \ \textcolor{keywordtype}{void}\ should\_drop\ (\mbox{\hyperlink{struct_o_t_1_1_int_type}{Value}}\ \mbox{\hyperlink{classvalue}{value}},\ Flags\ flag,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}*\ format)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00366\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00367\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classvalue}{value}})\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00368\ \ \ \ \ *format\ =\ *format\ \&\ \string~flag;}
\DoxyCodeLine{00369\ \ \ \}}
\DoxyCodeLine{00370\ }
\DoxyCodeLine{00371\ \};}
\DoxyCodeLine{00372\ }
\DoxyCodeLine{00373\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Iterator,\ \textcolor{keyword}{typename}\ SrcLookup>}
\DoxyCodeLine{00374\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ SinglePos\_serialize\ (\mbox{\hyperlink{structhb__serialize__context__t}{hb\_serialize\_context\_t}}\ *c,}
\DoxyCodeLine{00375\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ SrcLookup\ *src,}
\DoxyCodeLine{00376\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Iterator\ it,}
\DoxyCodeLine{00377\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structhb__map__t}{hb\_map\_t}}\ *layout\_variation\_idx\_map);}
\DoxyCodeLine{00378\ }
\DoxyCodeLine{00379\ }
\DoxyCodeLine{00380\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_o_t_1_1_anchor_format1}{AnchorFormat1}}}
\DoxyCodeLine{00381\ \{}
\DoxyCodeLine{00382\ \ \ \textcolor{keywordtype}{void}\ get\_anchor\ (\mbox{\hyperlink{struct_o_t_1_1hb__ot__apply__context__t}{hb\_ot\_apply\_context\_t}}\ *c,\ hb\_codepoint\_t\ glyph\_id\ HB\_UNUSED,}
\DoxyCodeLine{00383\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ *x,\ \textcolor{keywordtype}{float}\ *y)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00384\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00385\ \ \ \ \ \mbox{\hyperlink{structhb__font__t}{hb\_font\_t}}\ *font\ =\ c-\/>font;}
\DoxyCodeLine{00386\ \ \ \ \ *x\ =\ font-\/>em\_fscale\_x\ (xCoordinate);}
\DoxyCodeLine{00387\ \ \ \ \ *y\ =\ font-\/>em\_fscale\_y\ (yCoordinate);}
\DoxyCodeLine{00388\ \ \ \}}
\DoxyCodeLine{00389\ }
\DoxyCodeLine{00390\ \ \ \textcolor{keywordtype}{bool}\ sanitize\ (\mbox{\hyperlink{structhb__sanitize__context__t}{hb\_sanitize\_context\_t}}\ *c)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00391\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00392\ \ \ \ \ TRACE\_SANITIZE\ (\textcolor{keyword}{this});}
\DoxyCodeLine{00393\ \ \ \ \ return\_trace\ (c-\/>check\_struct\ (\textcolor{keyword}{this}));}
\DoxyCodeLine{00394\ \ \ \}}
\DoxyCodeLine{00395\ }
\DoxyCodeLine{00396\ \ \ \mbox{\hyperlink{struct_o_t_1_1_anchor_format1}{AnchorFormat1}}*\ copy\ (\mbox{\hyperlink{structhb__serialize__context__t}{hb\_serialize\_context\_t}}\ *c)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00397\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00398\ \ \ \ \ TRACE\_SERIALIZE\ (\textcolor{keyword}{this});}
\DoxyCodeLine{00399\ \ \ \ \ \mbox{\hyperlink{struct_o_t_1_1_anchor_format1}{AnchorFormat1}}*\ out\ =\ c-\/>embed<\mbox{\hyperlink{struct_o_t_1_1_anchor_format1}{AnchorFormat1}}>\ (\textcolor{keyword}{this});}
\DoxyCodeLine{00400\ \ \ \ \ \textcolor{keywordflow}{if}\ (!out)\ return\_trace\ (out);}
\DoxyCodeLine{00401\ \ \ \ \ out-\/>format\ =\ 1;}
\DoxyCodeLine{00402\ \ \ \ \ return\_trace\ (out);}
\DoxyCodeLine{00403\ \ \ \}}
\DoxyCodeLine{00404\ }
\DoxyCodeLine{00405\ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00406\ \ \ \mbox{\hyperlink{struct_o_t_1_1_int_type}{HBUINT16}}\ \ format;\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Format\ identifier-\/-\/format\ =\ 1\ */}}
\DoxyCodeLine{00407\ \ \ \mbox{\hyperlink{struct_o_t_1_1_int_type}{FWORD}}\ \ \ \ \ \ \ \ xCoordinate;\ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Horizontal\ value-\/-\/in\ design\ units\ */}}
\DoxyCodeLine{00408\ \ \ \mbox{\hyperlink{struct_o_t_1_1_int_type}{FWORD}}\ \ \ \ \ \ \ \ yCoordinate;\ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Vertical\ value-\/-\/in\ design\ units\ */}}
\DoxyCodeLine{00409\ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00410\ \ \ DEFINE\_SIZE\_STATIC\ (6);}
\DoxyCodeLine{00411\ \};}
\DoxyCodeLine{00412\ }
\DoxyCodeLine{00413\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_o_t_1_1_anchor_format2}{AnchorFormat2}}}
\DoxyCodeLine{00414\ \{}
\DoxyCodeLine{00415\ \ \ \textcolor{keywordtype}{void}\ get\_anchor\ (\mbox{\hyperlink{struct_o_t_1_1hb__ot__apply__context__t}{hb\_ot\_apply\_context\_t}}\ *c,\ hb\_codepoint\_t\ glyph\_id,}
\DoxyCodeLine{00416\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ *x,\ \textcolor{keywordtype}{float}\ *y)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00417\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00418\ \ \ \ \ \mbox{\hyperlink{structhb__font__t}{hb\_font\_t}}\ *font\ =\ c-\/>font;}
\DoxyCodeLine{00419\ }
\DoxyCodeLine{00420\ \textcolor{preprocessor}{\#ifdef\ HB\_NO\_HINTING}}
\DoxyCodeLine{00421\ \ \ \ \ *x\ =\ font-\/>em\_fscale\_x\ (xCoordinate);}
\DoxyCodeLine{00422\ \ \ \ \ *y\ =\ font-\/>em\_fscale\_y\ (yCoordinate);}
\DoxyCodeLine{00423\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00424\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00425\ }
\DoxyCodeLine{00426\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ x\_ppem\ =\ font-\/>x\_ppem;}
\DoxyCodeLine{00427\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ y\_ppem\ =\ font-\/>y\_ppem;}
\DoxyCodeLine{00428\ \ \ \ \ hb\_position\_t\ cx\ =\ 0,\ cy\ =\ 0;}
\DoxyCodeLine{00429\ \ \ \ \ \textcolor{keywordtype}{bool}\ ret;}
\DoxyCodeLine{00430\ }
\DoxyCodeLine{00431\ \ \ \ \ ret\ =\ (x\_ppem\ ||\ y\_ppem)\ \&\&}
\DoxyCodeLine{00432\ \ \ \ \ \ \ font-\/>get\_glyph\_contour\_point\_for\_origin\ (glyph\_id,\ anchorPoint,\ HB\_DIRECTION\_LTR,\ \&cx,\ \&cy);}
\DoxyCodeLine{00433\ \ \ \ \ *x\ =\ ret\ \&\&\ x\_ppem\ ?\ cx\ :\ font-\/>em\_fscale\_x\ (xCoordinate);}
\DoxyCodeLine{00434\ \ \ \ \ *y\ =\ ret\ \&\&\ y\_ppem\ ?\ cy\ :\ font-\/>em\_fscale\_y\ (yCoordinate);}
\DoxyCodeLine{00435\ \ \ \}}
\DoxyCodeLine{00436\ }
\DoxyCodeLine{00437\ \ \ \textcolor{keywordtype}{bool}\ sanitize\ (\mbox{\hyperlink{structhb__sanitize__context__t}{hb\_sanitize\_context\_t}}\ *c)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00438\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00439\ \ \ \ \ TRACE\_SANITIZE\ (\textcolor{keyword}{this});}
\DoxyCodeLine{00440\ \ \ \ \ return\_trace\ (c-\/>check\_struct\ (\textcolor{keyword}{this}));}
\DoxyCodeLine{00441\ \ \ \}}
\DoxyCodeLine{00442\ }
\DoxyCodeLine{00443\ \ \ \mbox{\hyperlink{struct_o_t_1_1_anchor_format2}{AnchorFormat2}}*\ copy\ (\mbox{\hyperlink{structhb__serialize__context__t}{hb\_serialize\_context\_t}}\ *c)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00444\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00445\ \ \ \ \ TRACE\_SERIALIZE\ (\textcolor{keyword}{this});}
\DoxyCodeLine{00446\ \ \ \ \ return\_trace\ (c-\/>embed<\mbox{\hyperlink{struct_o_t_1_1_anchor_format2}{AnchorFormat2}}>\ (\textcolor{keyword}{this}));}
\DoxyCodeLine{00447\ \ \ \}}
\DoxyCodeLine{00448\ }
\DoxyCodeLine{00449\ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00450\ \ \ \mbox{\hyperlink{struct_o_t_1_1_int_type}{HBUINT16}}\ \ format;\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Format\ identifier-\/-\/format\ =\ 2\ */}}
\DoxyCodeLine{00451\ \ \ \mbox{\hyperlink{struct_o_t_1_1_int_type}{FWORD}}\ \ \ \ \ \ \ \ xCoordinate;\ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Horizontal\ value-\/-\/in\ design\ units\ */}}
\DoxyCodeLine{00452\ \ \ \mbox{\hyperlink{struct_o_t_1_1_int_type}{FWORD}}\ \ \ \ \ \ \ \ yCoordinate;\ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Vertical\ value-\/-\/in\ design\ units\ */}}
\DoxyCodeLine{00453\ \ \ \mbox{\hyperlink{struct_o_t_1_1_int_type}{HBUINT16}}\ \ anchorPoint;\ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Index\ to\ glyph\ contour\ point\ */}}
\DoxyCodeLine{00454\ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00455\ \ \ DEFINE\_SIZE\_STATIC\ (8);}
\DoxyCodeLine{00456\ \};}
\DoxyCodeLine{00457\ }
\DoxyCodeLine{00458\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_o_t_1_1_anchor_format3}{AnchorFormat3}}}
\DoxyCodeLine{00459\ \{}
\DoxyCodeLine{00460\ \ \ \textcolor{keywordtype}{void}\ get\_anchor\ (\mbox{\hyperlink{struct_o_t_1_1hb__ot__apply__context__t}{hb\_ot\_apply\_context\_t}}\ *c,\ hb\_codepoint\_t\ glyph\_id\ HB\_UNUSED,}
\DoxyCodeLine{00461\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ *x,\ \textcolor{keywordtype}{float}\ *y)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00462\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00463\ \ \ \ \ \mbox{\hyperlink{structhb__font__t}{hb\_font\_t}}\ *font\ =\ c-\/>font;}
\DoxyCodeLine{00464\ \ \ \ \ *x\ =\ font-\/>em\_fscale\_x\ (xCoordinate);}
\DoxyCodeLine{00465\ \ \ \ \ *y\ =\ font-\/>em\_fscale\_y\ (yCoordinate);}
\DoxyCodeLine{00466\ }
\DoxyCodeLine{00467\ \ \ \ \ \textcolor{keywordflow}{if}\ (font-\/>x\_ppem\ ||\ font-\/>num\_coords)}
\DoxyCodeLine{00468\ \ \ \ \ \ \ *x\ +=\ (\textcolor{keyword}{this}+xDeviceTable).get\_x\_delta\ (font,\ c-\/>var\_store);}
\DoxyCodeLine{00469\ \ \ \ \ \textcolor{keywordflow}{if}\ (font-\/>y\_ppem\ ||\ font-\/>num\_coords)}
\DoxyCodeLine{00470\ \ \ \ \ \ \ *y\ +=\ (\textcolor{keyword}{this}+yDeviceTable).get\_y\_delta\ (font,\ c-\/>var\_store);}
\DoxyCodeLine{00471\ \ \ \}}
\DoxyCodeLine{00472\ }
\DoxyCodeLine{00473\ \ \ \textcolor{keywordtype}{bool}\ sanitize\ (\mbox{\hyperlink{structhb__sanitize__context__t}{hb\_sanitize\_context\_t}}\ *c)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00474\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00475\ \ \ \ \ TRACE\_SANITIZE\ (\textcolor{keyword}{this});}
\DoxyCodeLine{00476\ \ \ \ \ return\_trace\ (c-\/>check\_struct\ (\textcolor{keyword}{this})\ \&\&\ xDeviceTable.sanitize\ (c,\ \textcolor{keyword}{this})\ \&\&\ yDeviceTable.sanitize\ (c,\ \textcolor{keyword}{this}));}
\DoxyCodeLine{00477\ \ \ \}}
\DoxyCodeLine{00478\ }
\DoxyCodeLine{00479\ \ \ \mbox{\hyperlink{struct_o_t_1_1_anchor_format3}{AnchorFormat3}}*\ copy\ (\mbox{\hyperlink{structhb__serialize__context__t}{hb\_serialize\_context\_t}}\ *c,}
\DoxyCodeLine{00480\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structhb__map__t}{hb\_map\_t}}\ *layout\_variation\_idx\_map)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00481\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00482\ \ \ \ \ TRACE\_SERIALIZE\ (\textcolor{keyword}{this});}
\DoxyCodeLine{00483\ \ \ \ \ \textcolor{keywordflow}{if}\ (!layout\_variation\_idx\_map)\ return\_trace\ (\textcolor{keyword}{nullptr});}
\DoxyCodeLine{00484\ }
\DoxyCodeLine{00485\ \ \ \ \ \textcolor{keyword}{auto}\ *out\ =\ c-\/>embed<\mbox{\hyperlink{struct_o_t_1_1_anchor_format3}{AnchorFormat3}}>\ (\textcolor{keyword}{this});}
\DoxyCodeLine{00486\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!out))\ return\_trace\ (\textcolor{keyword}{nullptr});}
\DoxyCodeLine{00487\ }
\DoxyCodeLine{00488\ \ \ \ \ out-\/>xDeviceTable.serialize\_copy\ (c,\ xDeviceTable,\ \textcolor{keyword}{this},\ 0,\ hb\_serialize\_context\_t::Head,\ layout\_variation\_idx\_map);}
\DoxyCodeLine{00489\ \ \ \ \ out-\/>yDeviceTable.serialize\_copy\ (c,\ yDeviceTable,\ \textcolor{keyword}{this},\ 0,\ hb\_serialize\_context\_t::Head,\ layout\_variation\_idx\_map);}
\DoxyCodeLine{00490\ \ \ \ \ return\_trace\ (out);}
\DoxyCodeLine{00491\ \ \ \}}
\DoxyCodeLine{00492\ }
\DoxyCodeLine{00493\ \ \ \textcolor{keywordtype}{void}\ collect\_variation\_indices\ (\mbox{\hyperlink{struct_o_t_1_1hb__collect__variation__indices__context__t}{hb\_collect\_variation\_indices\_context\_t}}\ *c)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00494\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00495\ \ \ \ \ (\textcolor{keyword}{this}+xDeviceTable).collect\_variation\_indices\ (c-\/>layout\_variation\_indices);}
\DoxyCodeLine{00496\ \ \ \ \ (\textcolor{keyword}{this}+yDeviceTable).collect\_variation\_indices\ (c-\/>layout\_variation\_indices);}
\DoxyCodeLine{00497\ \ \ \}}
\DoxyCodeLine{00498\ }
\DoxyCodeLine{00499\ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00500\ \ \ \mbox{\hyperlink{struct_o_t_1_1_int_type}{HBUINT16}}\ \ format;\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Format\ identifier-\/-\/format\ =\ 3\ */}}
\DoxyCodeLine{00501\ \ \ \mbox{\hyperlink{struct_o_t_1_1_int_type}{FWORD}}\ \ \ \ \ \ \ \ xCoordinate;\ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Horizontal\ value-\/-\/in\ design\ units\ */}}
\DoxyCodeLine{00502\ \ \ \mbox{\hyperlink{struct_o_t_1_1_int_type}{FWORD}}\ \ \ \ \ \ \ \ yCoordinate;\ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Vertical\ value-\/-\/in\ design\ units\ */}}
\DoxyCodeLine{00503\ \ \ \mbox{\hyperlink{struct_o_t_1_1_offset_to}{Offset16To<Device>}}}
\DoxyCodeLine{00504\ \ \ \ \ \ \ \ \ xDeviceTable;\ \ \ \ \ \ \ \textcolor{comment}{/*\ Offset\ to\ Device\ table\ for\ X}}
\DoxyCodeLine{00505\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ coordinate-\/-\/\ from\ beginning\ of}}
\DoxyCodeLine{00506\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ Anchor\ table\ (may\ be\ NULL)\ */}}
\DoxyCodeLine{00507\ \ \ \mbox{\hyperlink{struct_o_t_1_1_offset_to}{Offset16To<Device>}}}
\DoxyCodeLine{00508\ \ \ \ \ \ \ \ \ yDeviceTable;\ \ \ \ \ \ \ \textcolor{comment}{/*\ Offset\ to\ Device\ table\ for\ Y}}
\DoxyCodeLine{00509\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ coordinate-\/-\/\ from\ beginning\ of}}
\DoxyCodeLine{00510\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ Anchor\ table\ (may\ be\ NULL)\ */}}
\DoxyCodeLine{00511\ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00512\ \ \ DEFINE\_SIZE\_STATIC\ (10);}
\DoxyCodeLine{00513\ \};}
\DoxyCodeLine{00514\ }
\DoxyCodeLine{00515\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_o_t_1_1_anchor}{Anchor}}}
\DoxyCodeLine{00516\ \{}
\DoxyCodeLine{00517\ \ \ \textcolor{keywordtype}{void}\ get\_anchor\ (\mbox{\hyperlink{struct_o_t_1_1hb__ot__apply__context__t}{hb\_ot\_apply\_context\_t}}\ *c,\ hb\_codepoint\_t\ glyph\_id,}
\DoxyCodeLine{00518\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ *x,\ \textcolor{keywordtype}{float}\ *y)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00519\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00520\ \ \ \ \ *x\ =\ *y\ =\ 0;}
\DoxyCodeLine{00521\ \ \ \ \ \textcolor{keywordflow}{switch}\ (u.format)\ \{}
\DoxyCodeLine{00522\ \ \ \ \ \textcolor{keywordflow}{case}\ 1:\ u.format1.get\_anchor\ (c,\ glyph\_id,\ x,\ y);\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00523\ \ \ \ \ \textcolor{keywordflow}{case}\ 2:\ u.format2.get\_anchor\ (c,\ glyph\_id,\ x,\ y);\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00524\ \ \ \ \ \textcolor{keywordflow}{case}\ 3:\ u.format3.get\_anchor\ (c,\ glyph\_id,\ x,\ y);\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00525\ \ \ \ \ \textcolor{keywordflow}{default}:\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00526\ \ \ \ \ \}}
\DoxyCodeLine{00527\ \ \ \}}
\DoxyCodeLine{00528\ }
\DoxyCodeLine{00529\ \ \ \textcolor{keywordtype}{bool}\ sanitize\ (\mbox{\hyperlink{structhb__sanitize__context__t}{hb\_sanitize\_context\_t}}\ *c)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00530\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00531\ \ \ \ \ TRACE\_SANITIZE\ (\textcolor{keyword}{this});}
\DoxyCodeLine{00532\ \ \ \ \ \textcolor{keywordflow}{if}\ (!u.format.sanitize\ (c))\ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{00533\ \ \ \ \ \textcolor{keywordflow}{switch}\ (u.format)\ \{}
\DoxyCodeLine{00534\ \ \ \ \ \textcolor{keywordflow}{case}\ 1:\ return\_trace\ (u.format1.sanitize\ (c));}
\DoxyCodeLine{00535\ \ \ \ \ \textcolor{keywordflow}{case}\ 2:\ return\_trace\ (u.format2.sanitize\ (c));}
\DoxyCodeLine{00536\ \ \ \ \ \textcolor{keywordflow}{case}\ 3:\ return\_trace\ (u.format3.sanitize\ (c));}
\DoxyCodeLine{00537\ \ \ \ \ \textcolor{keywordflow}{default}:return\_trace\ (\textcolor{keyword}{true});}
\DoxyCodeLine{00538\ \ \ \ \ \}}
\DoxyCodeLine{00539\ \ \ \}}
\DoxyCodeLine{00540\ }
\DoxyCodeLine{00541\ \ \ \textcolor{keywordtype}{bool}\ subset\ (\mbox{\hyperlink{structhb__subset__context__t}{hb\_subset\_context\_t}}\ *c)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00542\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00543\ \ \ \ \ TRACE\_SUBSET\ (\textcolor{keyword}{this});}
\DoxyCodeLine{00544\ \ \ \ \ \textcolor{keywordflow}{switch}\ (u.format)\ \{}
\DoxyCodeLine{00545\ \ \ \ \ \textcolor{keywordflow}{case}\ 1:\ return\_trace\ (\textcolor{keywordtype}{bool}\ (\textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{struct_o_t_1_1_anchor}{Anchor}}\ *\textcolor{keyword}{>}\ (u.format1.copy\ (c-\/>serializer))));}
\DoxyCodeLine{00546\ \ \ \ \ \textcolor{keywordflow}{case}\ 2:}
\DoxyCodeLine{00547\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (c-\/>plan-\/>flags\ \&\ HB\_SUBSET\_FLAGS\_NO\_HINTING)}
\DoxyCodeLine{00548\ \ \ \ \ \ \ \{}
\DoxyCodeLine{00549\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ AnchorFormat\ 2\ just\ containins\ extra\ hinting\ information,\ so}}
\DoxyCodeLine{00550\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ if\ hints\ are\ being\ dropped\ convert\ to\ format\ 1.}}
\DoxyCodeLine{00551\ \ \ \ \ \ \ \ \ return\_trace\ (\textcolor{keywordtype}{bool}\ (\textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{struct_o_t_1_1_anchor}{Anchor}}\ *\textcolor{keyword}{>}\ (u.format1.copy\ (c-\/>serializer))));}
\DoxyCodeLine{00552\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00553\ \ \ \ \ \ \ return\_trace\ (\textcolor{keywordtype}{bool}\ (\textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{struct_o_t_1_1_anchor}{Anchor}}\ *\textcolor{keyword}{>}\ (u.format2.copy\ (c-\/>serializer))));}
\DoxyCodeLine{00554\ \ \ \ \ \textcolor{keywordflow}{case}\ 3:\ return\_trace\ (\textcolor{keywordtype}{bool}\ (\textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{struct_o_t_1_1_anchor}{Anchor}}\ *\textcolor{keyword}{>}\ (u.format3.copy\ (c-\/>serializer,}
\DoxyCodeLine{00555\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ c-\/>plan-\/>layout\_variation\_idx\_map))));}
\DoxyCodeLine{00556\ \ \ \ \ \textcolor{keywordflow}{default}:return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{00557\ \ \ \ \ \}}
\DoxyCodeLine{00558\ \ \ \}}
\DoxyCodeLine{00559\ }
\DoxyCodeLine{00560\ \ \ \textcolor{keywordtype}{void}\ collect\_variation\_indices\ (\mbox{\hyperlink{struct_o_t_1_1hb__collect__variation__indices__context__t}{hb\_collect\_variation\_indices\_context\_t}}\ *c)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00561\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00562\ \ \ \ \ \textcolor{keywordflow}{switch}\ (u.format)\ \{}
\DoxyCodeLine{00563\ \ \ \ \ \textcolor{keywordflow}{case}\ 1:\ \textcolor{keywordflow}{case}\ 2:}
\DoxyCodeLine{00564\ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00565\ \ \ \ \ \textcolor{keywordflow}{case}\ 3:}
\DoxyCodeLine{00566\ \ \ \ \ \ \ u.format3.collect\_variation\_indices\ (c);}
\DoxyCodeLine{00567\ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00568\ \ \ \ \ \textcolor{keywordflow}{default}:\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00569\ \ \ \ \ \}}
\DoxyCodeLine{00570\ \ \ \}}
\DoxyCodeLine{00571\ }
\DoxyCodeLine{00572\ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00573\ \ \ \textcolor{keyword}{union\ }\{}
\DoxyCodeLine{00574\ \ \ \mbox{\hyperlink{struct_o_t_1_1_int_type}{HBUINT16}}\ \ \ \ \ \ format;\ \ \ \ \ \textcolor{comment}{/*\ Format\ identifier\ */}}
\DoxyCodeLine{00575\ \ \ \mbox{\hyperlink{struct_o_t_1_1_anchor_format1}{AnchorFormat1}}\ \ \ \ \ \ \ \ format1;}
\DoxyCodeLine{00576\ \ \ \mbox{\hyperlink{struct_o_t_1_1_anchor_format2}{AnchorFormat2}}\ \ \ \ \ \ \ \ format2;}
\DoxyCodeLine{00577\ \ \ \mbox{\hyperlink{struct_o_t_1_1_anchor_format3}{AnchorFormat3}}\ \ \ \ \ \ \ \ format3;}
\DoxyCodeLine{00578\ \ \ \}\ u;}
\DoxyCodeLine{00579\ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00580\ \ \ DEFINE\_SIZE\_UNION\ (2,\ format);}
\DoxyCodeLine{00581\ \};}
\DoxyCodeLine{00582\ }
\DoxyCodeLine{00583\ }
\DoxyCodeLine{00584\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_o_t_1_1_anchor_matrix}{AnchorMatrix}}}
\DoxyCodeLine{00585\ \{}
\DoxyCodeLine{00586\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1_anchor}{Anchor}}\&\ get\_anchor\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ row,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ col,}
\DoxyCodeLine{00587\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ cols,\ \textcolor{keywordtype}{bool}\ *found)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00588\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00589\ \ \ \ \ *found\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00590\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (row\ >=\ rows\ ||\ col\ >=\ cols))\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{struct_null}{Null}}\ (\mbox{\hyperlink{struct_o_t_1_1_anchor}{Anchor}});}
\DoxyCodeLine{00591\ \ \ \ \ *found\ =\ !matrixZ[row\ *\ cols\ +\ col].is\_null\ ();}
\DoxyCodeLine{00592\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{this}+matrixZ[row\ *\ cols\ +\ col];}
\DoxyCodeLine{00593\ \ \ \}}
\DoxyCodeLine{00594\ }
\DoxyCodeLine{00595\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Iterator,}
\DoxyCodeLine{00596\ \ \ \ \ \ \ \ \ hb\_requires\ (hb\_is\_iterator\ (Iterator))>}
\DoxyCodeLine{00597\ \ \ \textcolor{keywordtype}{void}\ collect\_variation\_indices\ (\mbox{\hyperlink{struct_o_t_1_1hb__collect__variation__indices__context__t}{hb\_collect\_variation\_indices\_context\_t}}\ *c,}
\DoxyCodeLine{00598\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Iterator\ index\_iter)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00599\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00600\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ i\ :\ index\_iter)}
\DoxyCodeLine{00601\ \ \ \ \ \ \ (\textcolor{keyword}{this}+matrixZ[i]).collect\_variation\_indices\ (c);}
\DoxyCodeLine{00602\ \ \ \}}
\DoxyCodeLine{00603\ }
\DoxyCodeLine{00604\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Iterator,}
\DoxyCodeLine{00605\ \ \ \ \ \ \ hb\_requires\ (hb\_is\_iterator\ (Iterator))>}
\DoxyCodeLine{00606\ \ \ \textcolor{keywordtype}{bool}\ subset\ (\mbox{\hyperlink{structhb__subset__context__t}{hb\_subset\_context\_t}}\ *c,}
\DoxyCodeLine{00607\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \ \ \ \ \ \ \ \ \ \ \ \ num\_rows,}
\DoxyCodeLine{00608\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Iterator\ \ \ \ \ \ \ \ \ \ \ \ \ index\_iter)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00609\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00610\ \ \ \ \ TRACE\_SUBSET\ (\textcolor{keyword}{this});}
\DoxyCodeLine{00611\ }
\DoxyCodeLine{00612\ \ \ \ \ \textcolor{keyword}{auto}\ *out\ =\ c-\/>serializer-\/>start\_embed\ (\textcolor{keyword}{this});}
\DoxyCodeLine{00613\ }
\DoxyCodeLine{00614\ \ \ \ \ \textcolor{keywordflow}{if}\ (!index\_iter)\ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{00615\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!c-\/>serializer-\/>extend\_min\ (out)))\ \ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{00616\ }
\DoxyCodeLine{00617\ \ \ \ \ out-\/>rows\ =\ num\_rows;}
\DoxyCodeLine{00618\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ i\ :\ index\_iter)}
\DoxyCodeLine{00619\ \ \ \ \ \{}
\DoxyCodeLine{00620\ \ \ \ \ \ \ \textcolor{keyword}{auto}\ *offset\ =\ c-\/>serializer-\/>embed\ (matrixZ[i]);}
\DoxyCodeLine{00621\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!offset)\ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{00622\ \ \ \ \ \ \ offset-\/>serialize\_subset\ (c,\ matrixZ[i],\ \textcolor{keyword}{this});}
\DoxyCodeLine{00623\ \ \ \ \ \}}
\DoxyCodeLine{00624\ }
\DoxyCodeLine{00625\ \ \ \ \ return\_trace\ (\textcolor{keyword}{true});}
\DoxyCodeLine{00626\ \ \ \}}
\DoxyCodeLine{00627\ }
\DoxyCodeLine{00628\ \ \ \textcolor{keywordtype}{bool}\ sanitize\ (\mbox{\hyperlink{structhb__sanitize__context__t}{hb\_sanitize\_context\_t}}\ *c,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ cols)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00629\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00630\ \ \ \ \ TRACE\_SANITIZE\ (\textcolor{keyword}{this});}
\DoxyCodeLine{00631\ \ \ \ \ \textcolor{keywordflow}{if}\ (!c-\/>check\_struct\ (\textcolor{keyword}{this}))\ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{00632\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (hb\_unsigned\_mul\_overflows\ (rows,\ cols)))\ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{00633\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ count\ =\ rows\ *\ cols;}
\DoxyCodeLine{00634\ \ \ \ \ \textcolor{keywordflow}{if}\ (!c-\/>check\_array\ (matrixZ.arrayZ,\ count))\ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{00635\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ count;\ i++)}
\DoxyCodeLine{00636\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!matrixZ[i].sanitize\ (c,\ \textcolor{keyword}{this}))\ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{00637\ \ \ \ \ return\_trace\ (\textcolor{keyword}{true});}
\DoxyCodeLine{00638\ \ \ \}}
\DoxyCodeLine{00639\ }
\DoxyCodeLine{00640\ \ \ \mbox{\hyperlink{struct_o_t_1_1_int_type}{HBUINT16}}\ \ rows;\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Number\ of\ rows\ */}}
\DoxyCodeLine{00641\ \ \ \mbox{\hyperlink{struct_o_t_1_1_unsized_array_of}{UnsizedArrayOf<Offset16To<Anchor>}}>}
\DoxyCodeLine{00642\ \ \ \ \ \ \ \ \ matrixZ;\ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Matrix\ of\ offsets\ to\ Anchor\ tables-\/-\/}}
\DoxyCodeLine{00643\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ from\ beginning\ of\ AnchorMatrix\ table\ */}}
\DoxyCodeLine{00644\ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00645\ \ \ DEFINE\_SIZE\_ARRAY\ (2,\ matrixZ);}
\DoxyCodeLine{00646\ \};}
\DoxyCodeLine{00647\ }
\DoxyCodeLine{00648\ }
\DoxyCodeLine{00649\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_o_t_1_1_mark_record}{MarkRecord}}}
\DoxyCodeLine{00650\ \{}
\DoxyCodeLine{00651\ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_o_t_1_1_mark_array}{MarkArray}};}
\DoxyCodeLine{00652\ }
\DoxyCodeLine{00653\ \ \ \textcolor{keywordtype}{unsigned}\ get\_class\ ()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ (\textcolor{keywordtype}{unsigned})\ klass;\ \}}
\DoxyCodeLine{00654\ \ \ \textcolor{keywordtype}{bool}\ sanitize\ (\mbox{\hyperlink{structhb__sanitize__context__t}{hb\_sanitize\_context\_t}}\ *c,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}\ *base)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00655\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00656\ \ \ \ \ TRACE\_SANITIZE\ (\textcolor{keyword}{this});}
\DoxyCodeLine{00657\ \ \ \ \ return\_trace\ (c-\/>check\_struct\ (\textcolor{keyword}{this})\ \&\&\ markAnchor.sanitize\ (c,\ base));}
\DoxyCodeLine{00658\ \ \ \}}
\DoxyCodeLine{00659\ }
\DoxyCodeLine{00660\ \ \ \mbox{\hyperlink{struct_o_t_1_1_mark_record}{MarkRecord}}\ *subset\ (\mbox{\hyperlink{structhb__subset__context__t}{hb\_subset\_context\_t}}\ \ \ \ *c,}
\DoxyCodeLine{00661\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \ \ *src\_base,}
\DoxyCodeLine{00662\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structhb__map__t}{hb\_map\_t}}\ \ \ \ \ \ \ \ \ *klass\_mapping)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00663\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00664\ \ \ \ \ TRACE\_SUBSET\ (\textcolor{keyword}{this});}
\DoxyCodeLine{00665\ \ \ \ \ \textcolor{keyword}{auto}\ *out\ =\ c-\/>serializer-\/>embed\ (\textcolor{keyword}{this});}
\DoxyCodeLine{00666\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!out))\ return\_trace\ (\textcolor{keyword}{nullptr});}
\DoxyCodeLine{00667\ }
\DoxyCodeLine{00668\ \ \ \ \ out-\/>klass\ =\ klass\_mapping-\/>get\ (klass);}
\DoxyCodeLine{00669\ \ \ \ \ out-\/>markAnchor.serialize\_subset\ (c,\ markAnchor,\ src\_base);}
\DoxyCodeLine{00670\ \ \ \ \ return\_trace\ (out);}
\DoxyCodeLine{00671\ \ \ \}}
\DoxyCodeLine{00672\ }
\DoxyCodeLine{00673\ \ \ \textcolor{keywordtype}{void}\ collect\_variation\_indices\ (\mbox{\hyperlink{struct_o_t_1_1hb__collect__variation__indices__context__t}{hb\_collect\_variation\_indices\_context\_t}}\ *c,}
\DoxyCodeLine{00674\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}\ *src\_base)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00675\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00676\ \ \ \ \ (src\_base+markAnchor).collect\_variation\_indices\ (c);}
\DoxyCodeLine{00677\ \ \ \}}
\DoxyCodeLine{00678\ }
\DoxyCodeLine{00679\ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00680\ \ \ \mbox{\hyperlink{struct_o_t_1_1_int_type}{HBUINT16}}\ \ klass;\ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Class\ defined\ for\ this\ mark\ */}}
\DoxyCodeLine{00681\ \ \ \mbox{\hyperlink{struct_o_t_1_1_offset_to}{Offset16To<Anchor>}}}
\DoxyCodeLine{00682\ \ \ \ \ \ \ \ \ markAnchor;\ \ \ \ \ \textcolor{comment}{/*\ Offset\ to\ Anchor\ table-\/-\/from}}
\DoxyCodeLine{00683\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ beginning\ of\ MarkArray\ table\ */}}
\DoxyCodeLine{00684\ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00685\ \ \ DEFINE\_SIZE\_STATIC\ (4);}
\DoxyCodeLine{00686\ \};}
\DoxyCodeLine{00687\ }
\DoxyCodeLine{00688\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_o_t_1_1_mark_array}{MarkArray}}\ :\ \mbox{\hyperlink{struct_o_t_1_1_array_of}{Array16Of}}<MarkRecord>\ \ \textcolor{comment}{/*\ Array\ of\ MarkRecords-\/-\/in\ Coverage\ order\ */}}
\DoxyCodeLine{00689\ \{}
\DoxyCodeLine{00690\ \ \ \textcolor{keywordtype}{bool}\ apply\ (\mbox{\hyperlink{struct_o_t_1_1hb__ot__apply__context__t}{hb\_ot\_apply\_context\_t}}\ *c,}
\DoxyCodeLine{00691\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ mark\_index,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ glyph\_index,}
\DoxyCodeLine{00692\ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1_anchor_matrix}{AnchorMatrix}}\ \&anchors,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ class\_count,}
\DoxyCodeLine{00693\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ glyph\_pos)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00694\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00695\ \ \ \ \ TRACE\_APPLY\ (\textcolor{keyword}{this});}
\DoxyCodeLine{00696\ \ \ \ \ \mbox{\hyperlink{structhb__buffer__t}{hb\_buffer\_t}}\ *\mbox{\hyperlink{classbuffer}{buffer}}\ =\ c-\/>buffer;}
\DoxyCodeLine{00697\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1_mark_record}{MarkRecord}}\ \&record\ =\ \mbox{\hyperlink{struct_o_t_1_1_array_of}{Array16Of<MarkRecord>::operator[]}}(mark\_index);}
\DoxyCodeLine{00698\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ mark\_class\ =\ record.klass;}
\DoxyCodeLine{00699\ }
\DoxyCodeLine{00700\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1_anchor}{Anchor}}\&\ mark\_anchor\ =\ \textcolor{keyword}{this}\ +\ record.markAnchor;}
\DoxyCodeLine{00701\ \ \ \ \ \textcolor{keywordtype}{bool}\ found;}
\DoxyCodeLine{00702\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1_anchor}{Anchor}}\&\ glyph\_anchor\ =\ anchors.get\_anchor\ (glyph\_index,\ mark\_class,\ class\_count,\ \&found);}
\DoxyCodeLine{00703\ \ \ \ \ \textcolor{comment}{/*\ If\ this\ subtable\ doesn't\ have\ an\ anchor\ for\ this\ base\ and\ this\ class,}}
\DoxyCodeLine{00704\ \textcolor{comment}{\ \ \ \ \ *\ return\ false\ such\ that\ the\ subsequent\ subtables\ have\ a\ chance\ at\ it.\ */}}
\DoxyCodeLine{00705\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!found))\ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{00706\ }
\DoxyCodeLine{00707\ \ \ \ \ \textcolor{keywordtype}{float}\ mark\_x,\ mark\_y,\ base\_x,\ base\_y;}
\DoxyCodeLine{00708\ }
\DoxyCodeLine{00709\ \ \ \ \ \mbox{\hyperlink{classbuffer}{buffer}}-\/>unsafe\_to\_break\ (glyph\_pos,\ \mbox{\hyperlink{classbuffer}{buffer}}-\/>idx\ +\ 1);}
\DoxyCodeLine{00710\ \ \ \ \ mark\_anchor.get\_anchor\ (c,\ \mbox{\hyperlink{classbuffer}{buffer}}-\/>cur().codepoint,\ \&mark\_x,\ \&mark\_y);}
\DoxyCodeLine{00711\ \ \ \ \ glyph\_anchor.get\_anchor\ (c,\ \mbox{\hyperlink{classbuffer}{buffer}}-\/>info[glyph\_pos].codepoint,\ \&base\_x,\ \&base\_y);}
\DoxyCodeLine{00712\ }
\DoxyCodeLine{00713\ \ \ \ \ \mbox{\hyperlink{structhb__glyph__position__t}{hb\_glyph\_position\_t}}\ \&o\ =\ \mbox{\hyperlink{classbuffer}{buffer}}-\/>cur\_pos();}
\DoxyCodeLine{00714\ \ \ \ \ o.x\_offset\ =\ roundf\ (base\_x\ -\/\ mark\_x);}
\DoxyCodeLine{00715\ \ \ \ \ o.y\_offset\ =\ roundf\ (base\_y\ -\/\ mark\_y);}
\DoxyCodeLine{00716\ \ \ \ \ o.attach\_type()\ =\ ATTACH\_TYPE\_MARK;}
\DoxyCodeLine{00717\ \ \ \ \ o.attach\_chain()\ =\ (int)\ glyph\_pos\ -\/\ (\textcolor{keywordtype}{int})\ \mbox{\hyperlink{classbuffer}{buffer}}-\/>idx;}
\DoxyCodeLine{00718\ \ \ \ \ \mbox{\hyperlink{classbuffer}{buffer}}-\/>scratch\_flags\ |=\ HB\_BUFFER\_SCRATCH\_FLAG\_HAS\_GPOS\_ATTACHMENT;}
\DoxyCodeLine{00719\ }
\DoxyCodeLine{00720\ \ \ \ \ \mbox{\hyperlink{classbuffer}{buffer}}-\/>idx++;}
\DoxyCodeLine{00721\ \ \ \ \ return\_trace\ (\textcolor{keyword}{true});}
\DoxyCodeLine{00722\ \ \ \}}
\DoxyCodeLine{00723\ }
\DoxyCodeLine{00724\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Iterator,}
\DoxyCodeLine{00725\ \ \ \ \ \ \ hb\_requires\ (hb\_is\_iterator\ (Iterator))>}
\DoxyCodeLine{00726\ \ \ \textcolor{keywordtype}{bool}\ subset\ (\mbox{\hyperlink{structhb__subset__context__t}{hb\_subset\_context\_t}}\ *c,}
\DoxyCodeLine{00727\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Iterator\ \ \ \ \ \ \ \ \ coverage,}
\DoxyCodeLine{00728\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structhb__map__t}{hb\_map\_t}}\ \ \ \ \ \ *klass\_mapping)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00729\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00730\ \ \ \ \ TRACE\_SUBSET\ (\textcolor{keyword}{this});}
\DoxyCodeLine{00731\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structhb__set__t}{hb\_set\_t}}\ \&glyphset\ =\ *c-\/>plan-\/>glyphset\_gsub\ ();}
\DoxyCodeLine{00732\ }
\DoxyCodeLine{00733\ \ \ \ \ \textcolor{keyword}{auto}*\ out\ =\ c-\/>serializer-\/>start\_embed\ (\textcolor{keyword}{this});}
\DoxyCodeLine{00734\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!c-\/>serializer-\/>extend\_min\ (out)))\ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{00735\ }
\DoxyCodeLine{00736\ \ \ \ \ \textcolor{keyword}{auto}\ mark\_iter\ =}
\DoxyCodeLine{00737\ \ \ \ \ +\ hb\_zip\ (coverage,\ this-\/>iter\ ())}
\DoxyCodeLine{00738\ \ \ \ \ |\ hb\_filter\ (glyphset,\ hb\_first)}
\DoxyCodeLine{00739\ \ \ \ \ |\ hb\_map\ (hb\_second)}
\DoxyCodeLine{00740\ \ \ \ \ ;}
\DoxyCodeLine{00741\ }
\DoxyCodeLine{00742\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ new\_length\ =\ 0;}
\DoxyCodeLine{00743\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ mark\_record\ :\ mark\_iter)\ \{}
\DoxyCodeLine{00744\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!mark\_record.subset\ (c,\ \textcolor{keyword}{this},\ klass\_mapping)))}
\DoxyCodeLine{00745\ \ \ \ \ \ \ \ \ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{00746\ \ \ \ \ \ \ new\_length++;}
\DoxyCodeLine{00747\ \ \ \ \ \}}
\DoxyCodeLine{00748\ }
\DoxyCodeLine{00749\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!c-\/>serializer-\/>check\_assign\ (out-\/>len,\ new\_length,}
\DoxyCodeLine{00750\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ HB\_SERIALIZE\_ERROR\_ARRAY\_OVERFLOW)))}
\DoxyCodeLine{00751\ \ \ \ \ \ \ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{00752\ }
\DoxyCodeLine{00753\ \ \ \ \ return\_trace\ (\textcolor{keyword}{true});}
\DoxyCodeLine{00754\ \ \ \}}
\DoxyCodeLine{00755\ }
\DoxyCodeLine{00756\ \ \ \textcolor{keywordtype}{bool}\ sanitize\ (\mbox{\hyperlink{structhb__sanitize__context__t}{hb\_sanitize\_context\_t}}\ *c)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00757\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00758\ \ \ \ \ TRACE\_SANITIZE\ (\textcolor{keyword}{this});}
\DoxyCodeLine{00759\ \ \ \ \ return\_trace\ (\mbox{\hyperlink{struct_o_t_1_1_array_of}{Array16Of<MarkRecord>::sanitize}}\ (c,\ \textcolor{keyword}{this}));}
\DoxyCodeLine{00760\ \ \ \}}
\DoxyCodeLine{00761\ \};}
\DoxyCodeLine{00762\ }
\DoxyCodeLine{00763\ }
\DoxyCodeLine{00764\ \textcolor{comment}{/*\ Lookups\ */}}
\DoxyCodeLine{00765\ }
\DoxyCodeLine{00766\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_o_t_1_1_single_pos_format1}{SinglePosFormat1}}}
\DoxyCodeLine{00767\ \{}
\DoxyCodeLine{00768\ \ \ \textcolor{keywordtype}{bool}\ intersects\ (\textcolor{keyword}{const}\ \mbox{\hyperlink{structhb__set__t}{hb\_set\_t}}\ *glyphs)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00769\ \textcolor{keyword}{\ \ }\{\ \textcolor{keywordflow}{return}\ (\textcolor{keyword}{this}+coverage).intersects\ (glyphs);\ \}}
\DoxyCodeLine{00770\ }
\DoxyCodeLine{00771\ \ \ \textcolor{keywordtype}{void}\ closure\_lookups\ (\mbox{\hyperlink{struct_o_t_1_1hb__closure__lookups__context__t}{hb\_closure\_lookups\_context\_t}}\ *c)\textcolor{keyword}{\ const\ }\{\}}
\DoxyCodeLine{00772\ \ \ \textcolor{keywordtype}{void}\ collect\_variation\_indices\ (\mbox{\hyperlink{struct_o_t_1_1hb__collect__variation__indices__context__t}{hb\_collect\_variation\_indices\_context\_t}}\ *c)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00773\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00774\ \ \ \ \ \textcolor{keywordflow}{if}\ (!valueFormat.has\_device\ ())\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00775\ }
\DoxyCodeLine{00776\ \ \ \ \ \textcolor{keyword}{auto}\ it\ =}
\DoxyCodeLine{00777\ \ \ \ \ +\ hb\_iter\ (\textcolor{keyword}{this}+coverage)}
\DoxyCodeLine{00778\ \ \ \ \ |\ hb\_filter\ (c-\/>glyph\_set)}
\DoxyCodeLine{00779\ \ \ \ \ ;}
\DoxyCodeLine{00780\ }
\DoxyCodeLine{00781\ \ \ \ \ \textcolor{keywordflow}{if}\ (!it)\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00782\ \ \ \ \ valueFormat.collect\_variation\_indices\ (c,\ \textcolor{keyword}{this},\ values.as\_array\ (valueFormat.get\_len\ ()));}
\DoxyCodeLine{00783\ \ \ \}}
\DoxyCodeLine{00784\ }
\DoxyCodeLine{00785\ \ \ \textcolor{keywordtype}{void}\ collect\_glyphs\ (\mbox{\hyperlink{struct_o_t_1_1hb__collect__glyphs__context__t}{hb\_collect\_glyphs\_context\_t}}\ *c)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00786\ \textcolor{keyword}{\ \ }\{\ \textcolor{keywordflow}{if}\ (unlikely\ (!(\textcolor{keyword}{this}+coverage).collect\_coverage\ (c-\/>input)))\ \textcolor{keywordflow}{return};\ \}}
\DoxyCodeLine{00787\ }
\DoxyCodeLine{00788\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1_coverage}{Coverage}}\ \&get\_coverage\ ()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{this}+coverage;\ \}}
\DoxyCodeLine{00789\ }
\DoxyCodeLine{00790\ \ \ \mbox{\hyperlink{struct_o_t_1_1_value_format}{ValueFormat}}\ get\_value\_format\ ()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ valueFormat;\ \}}
\DoxyCodeLine{00791\ }
\DoxyCodeLine{00792\ \ \ \textcolor{keywordtype}{bool}\ apply\ (\mbox{\hyperlink{struct_o_t_1_1hb__ot__apply__context__t}{hb\_ot\_apply\_context\_t}}\ *c)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00793\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00794\ \ \ \ \ TRACE\_APPLY\ (\textcolor{keyword}{this});}
\DoxyCodeLine{00795\ \ \ \ \ \mbox{\hyperlink{structhb__buffer__t}{hb\_buffer\_t}}\ *\mbox{\hyperlink{classbuffer}{buffer}}\ =\ c-\/>buffer;}
\DoxyCodeLine{00796\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ index\ =\ (\textcolor{keyword}{this}+coverage).get\_coverage\ \ (\mbox{\hyperlink{classbuffer}{buffer}}-\/>cur().codepoint);}
\DoxyCodeLine{00797\ \ \ \ \ \textcolor{keywordflow}{if}\ (likely\ (index\ ==\ NOT\_COVERED))\ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{00798\ }
\DoxyCodeLine{00799\ \ \ \ \ valueFormat.apply\_value\ (c,\ \textcolor{keyword}{this},\ values,\ \mbox{\hyperlink{classbuffer}{buffer}}-\/>cur\_pos());}
\DoxyCodeLine{00800\ }
\DoxyCodeLine{00801\ \ \ \ \ \mbox{\hyperlink{classbuffer}{buffer}}-\/>idx++;}
\DoxyCodeLine{00802\ \ \ \ \ return\_trace\ (\textcolor{keyword}{true});}
\DoxyCodeLine{00803\ \ \ \}}
\DoxyCodeLine{00804\ }
\DoxyCodeLine{00805\ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Iterator,}
\DoxyCodeLine{00806\ \ \ \ \ \ \ \textcolor{keyword}{typename}\ SrcLookup,}
\DoxyCodeLine{00807\ \ \ \ \ \ \ hb\_requires\ (hb\_is\_iterator\ (Iterator))>}
\DoxyCodeLine{00808\ \ \ \textcolor{keywordtype}{void}\ serialize\ (\mbox{\hyperlink{structhb__serialize__context__t}{hb\_serialize\_context\_t}}\ *c,}
\DoxyCodeLine{00809\ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ SrcLookup\ *src,}
\DoxyCodeLine{00810\ \ \ \ \ \ \ \ \ \ \ Iterator\ it,}
\DoxyCodeLine{00811\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_o_t_1_1_value_format}{ValueFormat}}\ newFormat,}
\DoxyCodeLine{00812\ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structhb__map__t}{hb\_map\_t}}\ *layout\_variation\_idx\_map)}
\DoxyCodeLine{00813\ \ \ \{}
\DoxyCodeLine{00814\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!c-\/>extend\_min\ (\textcolor{keyword}{this})))\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00815\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!c-\/>check\_assign\ (valueFormat,}
\DoxyCodeLine{00816\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ newFormat,}
\DoxyCodeLine{00817\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ HB\_SERIALIZE\_ERROR\_INT\_OVERFLOW)))\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00818\ }
\DoxyCodeLine{00819\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{const}\ \mbox{\hyperlink{structhb__array__t}{hb\_array\_t<const\ Value>}}\&\ \_\ :\ +\ it\ |\ hb\_map\ (hb\_second))}
\DoxyCodeLine{00820\ \ \ \ \ \{}
\DoxyCodeLine{00821\ \ \ \ \ \ \ src-\/>get\_value\_format\ ().copy\_values\ (c,\ newFormat,\ src,\ \ \&\_,\ layout\_variation\_idx\_map);}
\DoxyCodeLine{00822\ \ \ \ \ \ \ \textcolor{comment}{//\ Only\ serialize\ the\ first\ entry\ in\ the\ iterator,\ the\ rest\ are\ assumed\ to}}
\DoxyCodeLine{00823\ \ \ \ \ \ \ \textcolor{comment}{//\ be\ the\ same.}}
\DoxyCodeLine{00824\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00825\ \ \ \ \ \}}
\DoxyCodeLine{00826\ }
\DoxyCodeLine{00827\ \ \ \ \ \textcolor{keyword}{auto}\ glyphs\ =}
\DoxyCodeLine{00828\ \ \ \ \ +\ it}
\DoxyCodeLine{00829\ \ \ \ \ |\ hb\_map\_retains\_sorting\ (hb\_first)}
\DoxyCodeLine{00830\ \ \ \ \ ;}
\DoxyCodeLine{00831\ }
\DoxyCodeLine{00832\ \ \ \ \ coverage.serialize\_serialize\ (c,\ glyphs);}
\DoxyCodeLine{00833\ \ \ \}}
\DoxyCodeLine{00834\ }
\DoxyCodeLine{00835\ \ \ \textcolor{keywordtype}{bool}\ subset\ (\mbox{\hyperlink{structhb__subset__context__t}{hb\_subset\_context\_t}}\ *c)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00836\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00837\ \ \ \ \ TRACE\_SUBSET\ (\textcolor{keyword}{this});}
\DoxyCodeLine{00838\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structhb__set__t}{hb\_set\_t}}\ \&glyphset\ =\ *c-\/>plan-\/>glyphset\_gsub\ ();}
\DoxyCodeLine{00839\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structhb__map__t}{hb\_map\_t}}\ \&glyph\_map\ =\ *c-\/>plan-\/>glyph\_map;}
\DoxyCodeLine{00840\ }
\DoxyCodeLine{00841\ \ \ \ \ \textcolor{keyword}{auto}\ it\ =}
\DoxyCodeLine{00842\ \ \ \ \ +\ hb\_iter\ (\textcolor{keyword}{this}+coverage)}
\DoxyCodeLine{00843\ \ \ \ \ |\ hb\_filter\ (glyphset)}
\DoxyCodeLine{00844\ \ \ \ \ |\ hb\_map\_retains\_sorting\ (glyph\_map)}
\DoxyCodeLine{00845\ \ \ \ \ |\ hb\_zip\ (hb\_repeat\ (values.as\_array\ (valueFormat.get\_len\ ())))}
\DoxyCodeLine{00846\ \ \ \ \ ;}
\DoxyCodeLine{00847\ }
\DoxyCodeLine{00848\ \ \ \ \ \textcolor{keywordtype}{bool}\ ret\ =\ bool\ (it);}
\DoxyCodeLine{00849\ \ \ \ \ SinglePos\_serialize\ (c-\/>serializer,\ \textcolor{keyword}{this},\ it,\ c-\/>plan-\/>layout\_variation\_idx\_map);}
\DoxyCodeLine{00850\ \ \ \ \ return\_trace\ (ret);}
\DoxyCodeLine{00851\ \ \ \}}
\DoxyCodeLine{00852\ }
\DoxyCodeLine{00853\ \ \ \textcolor{keywordtype}{bool}\ sanitize\ (\mbox{\hyperlink{structhb__sanitize__context__t}{hb\_sanitize\_context\_t}}\ *c)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00854\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00855\ \ \ \ \ TRACE\_SANITIZE\ (\textcolor{keyword}{this});}
\DoxyCodeLine{00856\ \ \ \ \ return\_trace\ (c-\/>check\_struct\ (\textcolor{keyword}{this})\ \&\&}
\DoxyCodeLine{00857\ \ \ \ \ \ \ \ \ \ \ coverage.sanitize\ (c,\ \textcolor{keyword}{this})\ \&\&}
\DoxyCodeLine{00858\ \ \ \ \ \ \ \ \ \ \ valueFormat.sanitize\_value\ (c,\ \textcolor{keyword}{this},\ values));}
\DoxyCodeLine{00859\ \ \ \}}
\DoxyCodeLine{00860\ }
\DoxyCodeLine{00861\ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00862\ \ \ \mbox{\hyperlink{struct_o_t_1_1_int_type}{HBUINT16}}\ \ format;\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Format\ identifier-\/-\/format\ =\ 1\ */}}
\DoxyCodeLine{00863\ \ \ \mbox{\hyperlink{struct_o_t_1_1_offset_to}{Offset16To<Coverage>}}}
\DoxyCodeLine{00864\ \ \ \ \ \ \ \ \ coverage;\ \ \ \ \ \ \ \textcolor{comment}{/*\ Offset\ to\ Coverage\ table-\/-\/from}}
\DoxyCodeLine{00865\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ beginning\ of\ subtable\ */}}
\DoxyCodeLine{00866\ \ \ \mbox{\hyperlink{struct_o_t_1_1_value_format}{ValueFormat}}\ \ \ \ valueFormat;\ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Defines\ the\ types\ of\ data\ in\ the}}
\DoxyCodeLine{00867\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ ValueRecord\ */}}
\DoxyCodeLine{00868\ \ \ \mbox{\hyperlink{struct_o_t_1_1_unsized_array_of}{ValueRecord}}\ \ \ \ values;\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Defines\ positioning}}
\DoxyCodeLine{00869\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ value(s)-\/-\/applied\ to\ all\ glyphs\ in}}
\DoxyCodeLine{00870\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ the\ Coverage\ table\ */}}
\DoxyCodeLine{00871\ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00872\ \ \ DEFINE\_SIZE\_ARRAY\ (6,\ values);}
\DoxyCodeLine{00873\ \};}
\DoxyCodeLine{00874\ }
\DoxyCodeLine{00875\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_o_t_1_1_single_pos_format2}{SinglePosFormat2}}}
\DoxyCodeLine{00876\ \{}
\DoxyCodeLine{00877\ \ \ \textcolor{keywordtype}{bool}\ intersects\ (\textcolor{keyword}{const}\ \mbox{\hyperlink{structhb__set__t}{hb\_set\_t}}\ *glyphs)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00878\ \textcolor{keyword}{\ \ }\{\ \textcolor{keywordflow}{return}\ (\textcolor{keyword}{this}+coverage).intersects\ (glyphs);\ \}}
\DoxyCodeLine{00879\ }
\DoxyCodeLine{00880\ \ \ \textcolor{keywordtype}{void}\ closure\_lookups\ (\mbox{\hyperlink{struct_o_t_1_1hb__closure__lookups__context__t}{hb\_closure\_lookups\_context\_t}}\ *c)\textcolor{keyword}{\ const\ }\{\}}
\DoxyCodeLine{00881\ \ \ \textcolor{keywordtype}{void}\ collect\_variation\_indices\ (\mbox{\hyperlink{struct_o_t_1_1hb__collect__variation__indices__context__t}{hb\_collect\_variation\_indices\_context\_t}}\ *c)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00882\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00883\ \ \ \ \ \textcolor{keywordflow}{if}\ (!valueFormat.has\_device\ ())\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00884\ }
\DoxyCodeLine{00885\ \ \ \ \ \textcolor{keyword}{auto}\ it\ =}
\DoxyCodeLine{00886\ \ \ \ \ +\ hb\_zip\ (\textcolor{keyword}{this}+coverage,\ hb\_range\ ((\textcolor{keywordtype}{unsigned})\ valueCount))}
\DoxyCodeLine{00887\ \ \ \ \ |\ hb\_filter\ (c-\/>glyph\_set,\ hb\_first)}
\DoxyCodeLine{00888\ \ \ \ \ ;}
\DoxyCodeLine{00889\ }
\DoxyCodeLine{00890\ \ \ \ \ \textcolor{keywordflow}{if}\ (!it)\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00891\ }
\DoxyCodeLine{00892\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ sub\_length\ =\ valueFormat.get\_len\ ();}
\DoxyCodeLine{00893\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structhb__array__t}{hb\_array\_t<const\ Value>}}\ values\_array\ =\ values.as\_array\ (valueCount\ *\ sub\_length);}
\DoxyCodeLine{00894\ }
\DoxyCodeLine{00895\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ i\ :\ +\ it}
\DoxyCodeLine{00896\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ |\ hb\_map\ (hb\_second))}
\DoxyCodeLine{00897\ \ \ \ \ \ \ valueFormat.collect\_variation\_indices\ (c,\ \textcolor{keyword}{this},\ values\_array.sub\_array\ (i\ *\ sub\_length,\ sub\_length));}
\DoxyCodeLine{00898\ }
\DoxyCodeLine{00899\ \ \ \}}
\DoxyCodeLine{00900\ }
\DoxyCodeLine{00901\ \ \ \textcolor{keywordtype}{void}\ collect\_glyphs\ (\mbox{\hyperlink{struct_o_t_1_1hb__collect__glyphs__context__t}{hb\_collect\_glyphs\_context\_t}}\ *c)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00902\ \textcolor{keyword}{\ \ }\{\ \textcolor{keywordflow}{if}\ (unlikely\ (!(\textcolor{keyword}{this}+coverage).collect\_coverage\ (c-\/>input)))\ \textcolor{keywordflow}{return};\ \}}
\DoxyCodeLine{00903\ }
\DoxyCodeLine{00904\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1_coverage}{Coverage}}\ \&get\_coverage\ ()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{this}+coverage;\ \}}
\DoxyCodeLine{00905\ }
\DoxyCodeLine{00906\ \ \ \mbox{\hyperlink{struct_o_t_1_1_value_format}{ValueFormat}}\ get\_value\_format\ ()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ valueFormat;\ \}}
\DoxyCodeLine{00907\ }
\DoxyCodeLine{00908\ \ \ \textcolor{keywordtype}{bool}\ apply\ (\mbox{\hyperlink{struct_o_t_1_1hb__ot__apply__context__t}{hb\_ot\_apply\_context\_t}}\ *c)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00909\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00910\ \ \ \ \ TRACE\_APPLY\ (\textcolor{keyword}{this});}
\DoxyCodeLine{00911\ \ \ \ \ \mbox{\hyperlink{structhb__buffer__t}{hb\_buffer\_t}}\ *\mbox{\hyperlink{classbuffer}{buffer}}\ =\ c-\/>buffer;}
\DoxyCodeLine{00912\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ index\ =\ (\textcolor{keyword}{this}+coverage).get\_coverage\ \ (\mbox{\hyperlink{classbuffer}{buffer}}-\/>cur().codepoint);}
\DoxyCodeLine{00913\ \ \ \ \ \textcolor{keywordflow}{if}\ (likely\ (index\ ==\ NOT\_COVERED))\ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{00914\ }
\DoxyCodeLine{00915\ \ \ \ \ \textcolor{keywordflow}{if}\ (likely\ (index\ >=\ valueCount))\ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{00916\ }
\DoxyCodeLine{00917\ \ \ \ \ valueFormat.apply\_value\ (c,\ \textcolor{keyword}{this},}
\DoxyCodeLine{00918\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&values[index\ *\ valueFormat.get\_len\ ()],}
\DoxyCodeLine{00919\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classbuffer}{buffer}}-\/>cur\_pos());}
\DoxyCodeLine{00920\ }
\DoxyCodeLine{00921\ \ \ \ \ \mbox{\hyperlink{classbuffer}{buffer}}-\/>idx++;}
\DoxyCodeLine{00922\ \ \ \ \ return\_trace\ (\textcolor{keyword}{true});}
\DoxyCodeLine{00923\ \ \ \}}
\DoxyCodeLine{00924\ }
\DoxyCodeLine{00925\ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Iterator,}
\DoxyCodeLine{00926\ \ \ \ \ \ \ \textcolor{keyword}{typename}\ SrcLookup,}
\DoxyCodeLine{00927\ \ \ \ \ \ \ hb\_requires\ (hb\_is\_iterator\ (Iterator))>}
\DoxyCodeLine{00928\ \ \ \textcolor{keywordtype}{void}\ serialize\ (\mbox{\hyperlink{structhb__serialize__context__t}{hb\_serialize\_context\_t}}\ *c,}
\DoxyCodeLine{00929\ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ SrcLookup\ *src,}
\DoxyCodeLine{00930\ \ \ \ \ \ \ \ \ \ \ Iterator\ it,}
\DoxyCodeLine{00931\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_o_t_1_1_value_format}{ValueFormat}}\ newFormat,}
\DoxyCodeLine{00932\ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structhb__map__t}{hb\_map\_t}}\ *layout\_variation\_idx\_map)}
\DoxyCodeLine{00933\ \ \ \{}
\DoxyCodeLine{00934\ \ \ \ \ \textcolor{keyword}{auto}\ out\ =\ c-\/>extend\_min\ (\textcolor{keyword}{this});}
\DoxyCodeLine{00935\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!out))\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00936\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!c-\/>check\_assign\ (valueFormat,\ newFormat,\ HB\_SERIALIZE\_ERROR\_INT\_OVERFLOW)))\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00937\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!c-\/>check\_assign\ (valueCount,\ it.len\ (),\ HB\_SERIALIZE\_ERROR\_ARRAY\_OVERFLOW)))\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00938\ }
\DoxyCodeLine{00939\ \ \ \ \ +\ it}
\DoxyCodeLine{00940\ \ \ \ \ |\ hb\_map\ (hb\_second)}
\DoxyCodeLine{00941\ \ \ \ \ |\ hb\_apply\ ([\&]\ (\mbox{\hyperlink{structhb__array__t}{hb\_array\_t<const\ Value>}}\ \_)}
\DoxyCodeLine{00942\ \ \ \ \ \{\ src-\/>get\_value\_format\ ().copy\_values\ (c,\ newFormat,\ src,\ \&\_,\ layout\_variation\_idx\_map);\ \})}
\DoxyCodeLine{00943\ \ \ \ \ ;}
\DoxyCodeLine{00944\ }
\DoxyCodeLine{00945\ \ \ \ \ \textcolor{keyword}{auto}\ glyphs\ =}
\DoxyCodeLine{00946\ \ \ \ \ +\ it}
\DoxyCodeLine{00947\ \ \ \ \ |\ hb\_map\_retains\_sorting\ (hb\_first)}
\DoxyCodeLine{00948\ \ \ \ \ ;}
\DoxyCodeLine{00949\ }
\DoxyCodeLine{00950\ \ \ \ \ coverage.serialize\_serialize\ (c,\ glyphs);}
\DoxyCodeLine{00951\ \ \ \}}
\DoxyCodeLine{00952\ }
\DoxyCodeLine{00953\ \ \ \textcolor{keywordtype}{bool}\ subset\ (\mbox{\hyperlink{structhb__subset__context__t}{hb\_subset\_context\_t}}\ *c)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00954\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00955\ \ \ \ \ TRACE\_SUBSET\ (\textcolor{keyword}{this});}
\DoxyCodeLine{00956\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structhb__set__t}{hb\_set\_t}}\ \&glyphset\ =\ *c-\/>plan-\/>glyphset\_gsub\ ();}
\DoxyCodeLine{00957\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structhb__map__t}{hb\_map\_t}}\ \&glyph\_map\ =\ *c-\/>plan-\/>glyph\_map;}
\DoxyCodeLine{00958\ }
\DoxyCodeLine{00959\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ sub\_length\ =\ valueFormat.get\_len\ ();}
\DoxyCodeLine{00960\ \ \ \ \ \textcolor{keyword}{auto}\ values\_array\ =\ values.as\_array\ (valueCount\ *\ sub\_length);}
\DoxyCodeLine{00961\ }
\DoxyCodeLine{00962\ \ \ \ \ \textcolor{keyword}{auto}\ it\ =}
\DoxyCodeLine{00963\ \ \ \ \ +\ hb\_zip\ (\textcolor{keyword}{this}+coverage,\ hb\_range\ ((\textcolor{keywordtype}{unsigned})\ valueCount))}
\DoxyCodeLine{00964\ \ \ \ \ |\ hb\_filter\ (glyphset,\ hb\_first)}
\DoxyCodeLine{00965\ \ \ \ \ |\ hb\_map\_retains\_sorting\ ([\&]\ (\textcolor{keyword}{const}\ \mbox{\hyperlink{structhb__pair__t}{hb\_pair\_t<hb\_codepoint\_t,\ unsigned>}}\&\ \_)}
\DoxyCodeLine{00966\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00967\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ hb\_pair\ (glyph\_map[\_.first],}
\DoxyCodeLine{00968\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ values\_array.sub\_array\ (\_.second\ *\ sub\_length,}
\DoxyCodeLine{00969\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ sub\_length));}
\DoxyCodeLine{00970\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \})}
\DoxyCodeLine{00971\ \ \ \ \ ;}
\DoxyCodeLine{00972\ }
\DoxyCodeLine{00973\ \ \ \ \ \textcolor{keywordtype}{bool}\ ret\ =\ bool\ (it);}
\DoxyCodeLine{00974\ \ \ \ \ SinglePos\_serialize\ (c-\/>serializer,\ \textcolor{keyword}{this},\ it,\ c-\/>plan-\/>layout\_variation\_idx\_map);}
\DoxyCodeLine{00975\ \ \ \ \ return\_trace\ (ret);}
\DoxyCodeLine{00976\ \ \ \}}
\DoxyCodeLine{00977\ }
\DoxyCodeLine{00978\ \ \ \textcolor{keywordtype}{bool}\ sanitize\ (\mbox{\hyperlink{structhb__sanitize__context__t}{hb\_sanitize\_context\_t}}\ *c)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00979\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00980\ \ \ \ \ TRACE\_SANITIZE\ (\textcolor{keyword}{this});}
\DoxyCodeLine{00981\ \ \ \ \ return\_trace\ (c-\/>check\_struct\ (\textcolor{keyword}{this})\ \&\&}
\DoxyCodeLine{00982\ \ \ \ \ \ \ \ \ \ \ coverage.sanitize\ (c,\ \textcolor{keyword}{this})\ \&\&}
\DoxyCodeLine{00983\ \ \ \ \ \ \ \ \ \ \ valueFormat.sanitize\_values\ (c,\ \textcolor{keyword}{this},\ values,\ valueCount));}
\DoxyCodeLine{00984\ \ \ \}}
\DoxyCodeLine{00985\ }
\DoxyCodeLine{00986\ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00987\ \ \ \mbox{\hyperlink{struct_o_t_1_1_int_type}{HBUINT16}}\ \ format;\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Format\ identifier-\/-\/format\ =\ 2\ */}}
\DoxyCodeLine{00988\ \ \ \mbox{\hyperlink{struct_o_t_1_1_offset_to}{Offset16To<Coverage>}}}
\DoxyCodeLine{00989\ \ \ \ \ \ \ \ \ coverage;\ \ \ \ \ \ \ \textcolor{comment}{/*\ Offset\ to\ Coverage\ table-\/-\/from}}
\DoxyCodeLine{00990\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ beginning\ of\ subtable\ */}}
\DoxyCodeLine{00991\ \ \ \mbox{\hyperlink{struct_o_t_1_1_value_format}{ValueFormat}}\ \ \ \ valueFormat;\ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Defines\ the\ types\ of\ data\ in\ the}}
\DoxyCodeLine{00992\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ ValueRecord\ */}}
\DoxyCodeLine{00993\ \ \ \mbox{\hyperlink{struct_o_t_1_1_int_type}{HBUINT16}}\ \ valueCount;\ \ \ \ \ \textcolor{comment}{/*\ Number\ of\ ValueRecords\ */}}
\DoxyCodeLine{00994\ \ \ \mbox{\hyperlink{struct_o_t_1_1_unsized_array_of}{ValueRecord}}\ \ \ \ values;\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Array\ of\ ValueRecords-\/-\/positioning}}
\DoxyCodeLine{00995\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ values\ applied\ to\ glyphs\ */}}
\DoxyCodeLine{00996\ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00997\ \ \ DEFINE\_SIZE\_ARRAY\ (8,\ values);}
\DoxyCodeLine{00998\ \};}
\DoxyCodeLine{00999\ }
\DoxyCodeLine{01000\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_o_t_1_1_single_pos}{SinglePos}}}
\DoxyCodeLine{01001\ \{}
\DoxyCodeLine{01002\ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Iterator,}
\DoxyCodeLine{01003\ \ \ \ \ \ \ \ hb\_requires\ (hb\_is\_iterator\ (Iterator))>}
\DoxyCodeLine{01004\ \ \ \textcolor{keywordtype}{unsigned}\ get\_format\ (Iterator\ glyph\_val\_iter\_pairs)}
\DoxyCodeLine{01005\ \ \ \{}
\DoxyCodeLine{01006\ \ \ \ \ \mbox{\hyperlink{structhb__array__t}{hb\_array\_t<const\ Value>}}\ first\_val\_iter\ =\ hb\_second\ (*glyph\_val\_iter\_pairs);}
\DoxyCodeLine{01007\ }
\DoxyCodeLine{01008\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ iter\ :\ glyph\_val\_iter\_pairs)}
\DoxyCodeLine{01009\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ \_\ :\ hb\_zip\ (iter.second,\ first\_val\_iter))}
\DoxyCodeLine{01010\ \ \ \ \ \textcolor{keywordflow}{if}\ (\_.first\ !=\ \_.second)}
\DoxyCodeLine{01011\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 2;}
\DoxyCodeLine{01012\ }
\DoxyCodeLine{01013\ \ \ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{01014\ \ \ \}}
\DoxyCodeLine{01015\ }
\DoxyCodeLine{01016\ }
\DoxyCodeLine{01017\ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Iterator,}
\DoxyCodeLine{01018\ \ \ \ \ \ \ \textcolor{keyword}{typename}\ SrcLookup,}
\DoxyCodeLine{01019\ \ \ \ \ \ \ hb\_requires\ (hb\_is\_iterator\ (Iterator))>}
\DoxyCodeLine{01020\ \ \ \textcolor{keywordtype}{void}\ serialize\ (\mbox{\hyperlink{structhb__serialize__context__t}{hb\_serialize\_context\_t}}\ *c,}
\DoxyCodeLine{01021\ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ SrcLookup*\ src,}
\DoxyCodeLine{01022\ \ \ \ \ \ \ \ \ \ \ Iterator\ glyph\_val\_iter\_pairs,}
\DoxyCodeLine{01023\ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structhb__map__t}{hb\_map\_t}}\ *layout\_variation\_idx\_map)}
\DoxyCodeLine{01024\ \ \ \{}
\DoxyCodeLine{01025\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!c-\/>extend\_min\ (u.format)))\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{01026\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ format\ =\ 2;}
\DoxyCodeLine{01027\ \ \ \ \ \mbox{\hyperlink{struct_o_t_1_1_value_format}{ValueFormat}}\ new\_format\ =\ src-\/>get\_value\_format\ ();}
\DoxyCodeLine{01028\ }
\DoxyCodeLine{01029\ \ \ \ \ \textcolor{keywordflow}{if}\ (glyph\_val\_iter\_pairs)}
\DoxyCodeLine{01030\ \ \ \ \ \{}
\DoxyCodeLine{01031\ \ \ \ \ \ \ format\ =\ get\_format\ (glyph\_val\_iter\_pairs);}
\DoxyCodeLine{01032\ \ \ \ \ \ \ new\_format\ =\ src-\/>get\_value\_format\ ().get\_effective\_format\ (+\ glyph\_val\_iter\_pairs\ |\ hb\_map\ (hb\_second));}
\DoxyCodeLine{01033\ \ \ \ \ \}}
\DoxyCodeLine{01034\ }
\DoxyCodeLine{01035\ \ \ \ \ u.format\ =\ format;}
\DoxyCodeLine{01036\ \ \ \ \ \textcolor{keywordflow}{switch}\ (u.format)\ \{}
\DoxyCodeLine{01037\ \ \ \ \ \textcolor{keywordflow}{case}\ 1:\ u.format1.serialize\ (c,}
\DoxyCodeLine{01038\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ src,}
\DoxyCodeLine{01039\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ glyph\_val\_iter\_pairs,}
\DoxyCodeLine{01040\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ new\_format,}
\DoxyCodeLine{01041\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ layout\_variation\_idx\_map);}
\DoxyCodeLine{01042\ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{01043\ \ \ \ \ \textcolor{keywordflow}{case}\ 2:\ u.format2.serialize\ (c,}
\DoxyCodeLine{01044\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ src,}
\DoxyCodeLine{01045\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ glyph\_val\_iter\_pairs,}
\DoxyCodeLine{01046\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ new\_format,}
\DoxyCodeLine{01047\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ layout\_variation\_idx\_map);}
\DoxyCodeLine{01048\ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{01049\ \ \ \ \ \textcolor{keywordflow}{default}:\textcolor{keywordflow}{return};}
\DoxyCodeLine{01050\ \ \ \ \ \}}
\DoxyCodeLine{01051\ \ \ \}}
\DoxyCodeLine{01052\ }
\DoxyCodeLine{01053\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ context\_t,\ \textcolor{keyword}{typename}\ ...Ts>}
\DoxyCodeLine{01054\ \ \ \textcolor{keyword}{typename}\ context\_t::return\_t\ dispatch\ (context\_t\ *c,\ Ts\&\&...\ ds)\textcolor{keyword}{\ const}}
\DoxyCodeLine{01055\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{01056\ \ \ \ \ TRACE\_DISPATCH\ (\textcolor{keyword}{this},\ u.format);}
\DoxyCodeLine{01057\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!c-\/>may\_dispatch\ (\textcolor{keyword}{this},\ \&u.format)))\ return\_trace\ (c-\/>no\_dispatch\_return\_value\ ());}
\DoxyCodeLine{01058\ \ \ \ \ \textcolor{keywordflow}{switch}\ (u.format)\ \{}
\DoxyCodeLine{01059\ \ \ \ \ \textcolor{keywordflow}{case}\ 1:\ return\_trace\ (c-\/>dispatch\ (u.format1,\ std::forward<Ts>\ (ds)...));}
\DoxyCodeLine{01060\ \ \ \ \ \textcolor{keywordflow}{case}\ 2:\ return\_trace\ (c-\/>dispatch\ (u.format2,\ std::forward<Ts>\ (ds)...));}
\DoxyCodeLine{01061\ \ \ \ \ \textcolor{keywordflow}{default}:return\_trace\ (c-\/>default\_return\_value\ ());}
\DoxyCodeLine{01062\ \ \ \ \ \}}
\DoxyCodeLine{01063\ \ \ \}}
\DoxyCodeLine{01064\ }
\DoxyCodeLine{01065\ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{01066\ \ \ \textcolor{keyword}{union\ }\{}
\DoxyCodeLine{01067\ \ \ \mbox{\hyperlink{struct_o_t_1_1_int_type}{HBUINT16}}\ \ \ \ \ \ format;\ \ \ \ \ \textcolor{comment}{/*\ Format\ identifier\ */}}
\DoxyCodeLine{01068\ \ \ \mbox{\hyperlink{struct_o_t_1_1_single_pos_format1}{SinglePosFormat1}}\ \ format1;}
\DoxyCodeLine{01069\ \ \ \mbox{\hyperlink{struct_o_t_1_1_single_pos_format2}{SinglePosFormat2}}\ \ format2;}
\DoxyCodeLine{01070\ \ \ \}\ u;}
\DoxyCodeLine{01071\ \};}
\DoxyCodeLine{01072\ }
\DoxyCodeLine{01073\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Iterator,\ \textcolor{keyword}{typename}\ SrcLookup>}
\DoxyCodeLine{01074\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}}
\DoxyCodeLine{01075\ SinglePos\_serialize\ (\mbox{\hyperlink{structhb__serialize__context__t}{hb\_serialize\_context\_t}}\ *c,}
\DoxyCodeLine{01076\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ SrcLookup\ *src,}
\DoxyCodeLine{01077\ \ \ \ \ \ \ \ \ \ \ \ \ \ Iterator\ it,}
\DoxyCodeLine{01078\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structhb__map__t}{hb\_map\_t}}\ *layout\_variation\_idx\_map)}
\DoxyCodeLine{01079\ \{\ c-\/>start\_embed<\mbox{\hyperlink{struct_o_t_1_1_single_pos}{SinglePos}}>\ ()-\/>serialize\ (c,\ src,\ it,\ layout\_variation\_idx\_map);\ \}}
\DoxyCodeLine{01080\ }
\DoxyCodeLine{01081\ }
\DoxyCodeLine{01082\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_o_t_1_1_pair_value_record}{PairValueRecord}}}
\DoxyCodeLine{01083\ \{}
\DoxyCodeLine{01084\ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_o_t_1_1_pair_set}{PairSet}};}
\DoxyCodeLine{01085\ }
\DoxyCodeLine{01086\ \ \ \textcolor{keywordtype}{int}\ cmp\ (hb\_codepoint\_t\ k)\textcolor{keyword}{\ const}}
\DoxyCodeLine{01087\ \textcolor{keyword}{\ \ }\{\ \textcolor{keywordflow}{return}\ secondGlyph.cmp\ (k);\ \}}
\DoxyCodeLine{01088\ }
\DoxyCodeLine{01089\ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_o_t_1_1_pair_value_record_1_1context__t}{context\_t}}}
\DoxyCodeLine{01090\ \ \ \{}
\DoxyCodeLine{01091\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}\ \ \ \ \ \ *base;}
\DoxyCodeLine{01092\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1_value_format}{ValueFormat}}\ \ \ \ *valueFormats;}
\DoxyCodeLine{01093\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1_value_format}{ValueFormat}}\ \ \ \ *newFormats;}
\DoxyCodeLine{01094\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \ \ \ \ \ \ \ len1;\ \textcolor{comment}{/*\ valueFormats[0].get\_len()\ */}}
\DoxyCodeLine{01095\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structhb__map__t}{hb\_map\_t}}\ \ *glyph\_map;}
\DoxyCodeLine{01096\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structhb__map__t}{hb\_map\_t}}\ \ \ \ \ \ *layout\_variation\_idx\_map;}
\DoxyCodeLine{01097\ \ \ \};}
\DoxyCodeLine{01098\ }
\DoxyCodeLine{01099\ \ \ \textcolor{keywordtype}{bool}\ subset\ (\mbox{\hyperlink{structhb__subset__context__t}{hb\_subset\_context\_t}}\ *c,}
\DoxyCodeLine{01100\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_o_t_1_1_pair_value_record_1_1context__t}{context\_t}}\ *closure)\textcolor{keyword}{\ const}}
\DoxyCodeLine{01101\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{01102\ \ \ \ \ TRACE\_SERIALIZE\ (\textcolor{keyword}{this});}
\DoxyCodeLine{01103\ \ \ \ \ \textcolor{keyword}{auto}\ *s\ =\ c-\/>serializer;}
\DoxyCodeLine{01104\ \ \ \ \ \textcolor{keyword}{auto}\ *out\ =\ s-\/>start\_embed\ (*\textcolor{keyword}{this});}
\DoxyCodeLine{01105\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!s-\/>extend\_min\ (out)))\ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{01106\ }
\DoxyCodeLine{01107\ \ \ \ \ out-\/>secondGlyph\ =\ (*closure-\/>glyph\_map)[secondGlyph];}
\DoxyCodeLine{01108\ }
\DoxyCodeLine{01109\ \ \ \ \ closure-\/>valueFormats[0].copy\_values\ (s,}
\DoxyCodeLine{01110\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ closure-\/>newFormats[0],}
\DoxyCodeLine{01111\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ closure-\/>base,\ \&values[0],}
\DoxyCodeLine{01112\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ closure-\/>layout\_variation\_idx\_map);}
\DoxyCodeLine{01113\ \ \ \ \ closure-\/>valueFormats[1].copy\_values\ (s,}
\DoxyCodeLine{01114\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ closure-\/>newFormats[1],}
\DoxyCodeLine{01115\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ closure-\/>base,}
\DoxyCodeLine{01116\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&values[closure-\/>len1],}
\DoxyCodeLine{01117\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ closure-\/>layout\_variation\_idx\_map);}
\DoxyCodeLine{01118\ }
\DoxyCodeLine{01119\ \ \ \ \ return\_trace\ (\textcolor{keyword}{true});}
\DoxyCodeLine{01120\ \ \ \}}
\DoxyCodeLine{01121\ }
\DoxyCodeLine{01122\ \ \ \textcolor{keywordtype}{void}\ collect\_variation\_indices\ (\mbox{\hyperlink{struct_o_t_1_1hb__collect__variation__indices__context__t}{hb\_collect\_variation\_indices\_context\_t}}\ *c,}
\DoxyCodeLine{01123\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1_value_format}{ValueFormat}}\ *valueFormats,}
\DoxyCodeLine{01124\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}\ *base)\textcolor{keyword}{\ const}}
\DoxyCodeLine{01125\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{01126\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ record1\_len\ =\ valueFormats[0].get\_len\ ();}
\DoxyCodeLine{01127\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ record2\_len\ =\ valueFormats[1].get\_len\ ();}
\DoxyCodeLine{01128\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structhb__array__t}{hb\_array\_t<const\ Value>}}\ values\_array\ =\ values.as\_array\ (record1\_len\ +\ record2\_len);}
\DoxyCodeLine{01129\ }
\DoxyCodeLine{01130\ \ \ \ \ \textcolor{keywordflow}{if}\ (valueFormats[0].has\_device\ ())}
\DoxyCodeLine{01131\ \ \ \ \ \ \ valueFormats[0].collect\_variation\_indices\ (c,\ base,\ values\_array.sub\_array\ (0,\ record1\_len));}
\DoxyCodeLine{01132\ }
\DoxyCodeLine{01133\ \ \ \ \ \textcolor{keywordflow}{if}\ (valueFormats[1].has\_device\ ())}
\DoxyCodeLine{01134\ \ \ \ \ \ \ valueFormats[1].collect\_variation\_indices\ (c,\ base,\ values\_array.sub\_array\ (record1\_len,\ record2\_len));}
\DoxyCodeLine{01135\ \ \ \}}
\DoxyCodeLine{01136\ }
\DoxyCodeLine{01137\ \ \ \textcolor{keywordtype}{bool}\ intersects\ (\textcolor{keyword}{const}\ \mbox{\hyperlink{structhb__set__t}{hb\_set\_t}}\&\ glyphset)\textcolor{keyword}{\ const}}
\DoxyCodeLine{01138\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{01139\ \ \ \ \ \textcolor{keywordflow}{return}\ glyphset.has(secondGlyph);}
\DoxyCodeLine{01140\ \ \ \}}
\DoxyCodeLine{01141\ }
\DoxyCodeLine{01142\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{union_value}{Value}}*\ get\_values\_1\ ()\textcolor{keyword}{\ const}}
\DoxyCodeLine{01143\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{01144\ \ \ \ \ \textcolor{keywordflow}{return}\ \&values[0];}
\DoxyCodeLine{01145\ \ \ \}}
\DoxyCodeLine{01146\ }
\DoxyCodeLine{01147\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{union_value}{Value}}*\ get\_values\_2\ (ValueFormat\ format1)\textcolor{keyword}{\ const}}
\DoxyCodeLine{01148\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{01149\ \ \ \ \ \textcolor{keywordflow}{return}\ \&values[format1.get\_len\ ()];}
\DoxyCodeLine{01150\ \ \ \}}
\DoxyCodeLine{01151\ }
\DoxyCodeLine{01152\ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{01153\ \ \ HBGlyphID16\ \ \ secondGlyph;\ \ \ \ \ \ \ \ \textcolor{comment}{/*\ GlyphID\ of\ second\ glyph\ in\ the}}
\DoxyCodeLine{01154\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ pair-\/-\/first\ glyph\ is\ listed\ in\ the}}
\DoxyCodeLine{01155\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ Coverage\ table\ */}}
\DoxyCodeLine{01156\ \ \ ValueRecord\ \ \ values;\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Positioning\ data\ for\ the\ first\ glyph}}
\DoxyCodeLine{01157\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ followed\ by\ for\ second\ glyph\ */}}
\DoxyCodeLine{01158\ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{01159\ \ \ DEFINE\_SIZE\_ARRAY\ (2,\ values);}
\DoxyCodeLine{01160\ \};}
\DoxyCodeLine{01161\ }
\DoxyCodeLine{01162\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_o_t_1_1_pair_set}{PairSet}}}
\DoxyCodeLine{01163\ \{}
\DoxyCodeLine{01164\ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_o_t_1_1_pair_pos_format1}{PairPosFormat1}};}
\DoxyCodeLine{01165\ }
\DoxyCodeLine{01166\ \ \ \textcolor{keywordtype}{bool}\ intersects\ (\textcolor{keyword}{const}\ \mbox{\hyperlink{structhb__set__t}{hb\_set\_t}}\ *glyphs,}
\DoxyCodeLine{01167\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1_value_format}{ValueFormat}}\ *valueFormats)\textcolor{keyword}{\ const}}
\DoxyCodeLine{01168\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{01169\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ len1\ =\ valueFormats[0].get\_len\ ();}
\DoxyCodeLine{01170\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ len2\ =\ valueFormats[1].get\_len\ ();}
\DoxyCodeLine{01171\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ record\_size\ =\ HBUINT16::static\_size\ *\ (1\ +\ len1\ +\ len2);}
\DoxyCodeLine{01172\ }
\DoxyCodeLine{01173\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1_pair_value_record}{PairValueRecord}}\ *record\ =\ \&firstPairValueRecord;}
\DoxyCodeLine{01174\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ count\ =\ len;}
\DoxyCodeLine{01175\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ count;\ i++)}
\DoxyCodeLine{01176\ \ \ \ \ \{}
\DoxyCodeLine{01177\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (glyphs-\/>has\ (record-\/>secondGlyph))}
\DoxyCodeLine{01178\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{01179\ \ \ \ \ \ \ record\ =\ \&StructAtOffset<const\ PairValueRecord>\ (record,\ record\_size);}
\DoxyCodeLine{01180\ \ \ \ \ \}}
\DoxyCodeLine{01181\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{01182\ \ \ \}}
\DoxyCodeLine{01183\ }
\DoxyCodeLine{01184\ \ \ \textcolor{keywordtype}{void}\ collect\_glyphs\ (\mbox{\hyperlink{struct_o_t_1_1hb__collect__glyphs__context__t}{hb\_collect\_glyphs\_context\_t}}\ *c,}
\DoxyCodeLine{01185\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1_value_format}{ValueFormat}}\ *valueFormats)\textcolor{keyword}{\ const}}
\DoxyCodeLine{01186\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{01187\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ len1\ =\ valueFormats[0].get\_len\ ();}
\DoxyCodeLine{01188\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ len2\ =\ valueFormats[1].get\_len\ ();}
\DoxyCodeLine{01189\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ record\_size\ =\ HBUINT16::static\_size\ *\ (1\ +\ len1\ +\ len2);}
\DoxyCodeLine{01190\ }
\DoxyCodeLine{01191\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1_pair_value_record}{PairValueRecord}}\ *record\ =\ \&firstPairValueRecord;}
\DoxyCodeLine{01192\ \ \ \ \ c-\/>input-\/>add\_array\ (\&record-\/>secondGlyph,\ len,\ record\_size);}
\DoxyCodeLine{01193\ \ \ \}}
\DoxyCodeLine{01194\ }
\DoxyCodeLine{01195\ \ \ \textcolor{keywordtype}{void}\ collect\_variation\_indices\ (\mbox{\hyperlink{struct_o_t_1_1hb__collect__variation__indices__context__t}{hb\_collect\_variation\_indices\_context\_t}}\ *c,}
\DoxyCodeLine{01196\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1_value_format}{ValueFormat}}\ *valueFormats)\textcolor{keyword}{\ const}}
\DoxyCodeLine{01197\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{01198\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ len1\ =\ valueFormats[0].get\_len\ ();}
\DoxyCodeLine{01199\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ len2\ =\ valueFormats[1].get\_len\ ();}
\DoxyCodeLine{01200\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ record\_size\ =\ HBUINT16::static\_size\ *\ (1\ +\ len1\ +\ len2);}
\DoxyCodeLine{01201\ }
\DoxyCodeLine{01202\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1_pair_value_record}{PairValueRecord}}\ *record\ =\ \&firstPairValueRecord;}
\DoxyCodeLine{01203\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ count\ =\ len;}
\DoxyCodeLine{01204\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ i\ =\ 0;\ i\ <\ count;\ i++)}
\DoxyCodeLine{01205\ \ \ \ \ \{}
\DoxyCodeLine{01206\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (c-\/>glyph\_set-\/>has\ (record-\/>secondGlyph))}
\DoxyCodeLine{01207\ \ \ \ \ \ \ \{\ record-\/>collect\_variation\_indices\ (c,\ valueFormats,\ \textcolor{keyword}{this});\ \}}
\DoxyCodeLine{01208\ }
\DoxyCodeLine{01209\ \ \ \ \ \ \ record\ =\ \&StructAtOffset<const\ PairValueRecord>\ (record,\ record\_size);}
\DoxyCodeLine{01210\ \ \ \ \ \}}
\DoxyCodeLine{01211\ \ \ \}}
\DoxyCodeLine{01212\ }
\DoxyCodeLine{01213\ \ \ \textcolor{keywordtype}{bool}\ apply\ (\mbox{\hyperlink{struct_o_t_1_1hb__ot__apply__context__t}{hb\_ot\_apply\_context\_t}}\ *c,}
\DoxyCodeLine{01214\ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1_value_format}{ValueFormat}}\ *valueFormats,}
\DoxyCodeLine{01215\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ pos)\textcolor{keyword}{\ const}}
\DoxyCodeLine{01216\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{01217\ \ \ \ \ TRACE\_APPLY\ (\textcolor{keyword}{this});}
\DoxyCodeLine{01218\ \ \ \ \ \mbox{\hyperlink{structhb__buffer__t}{hb\_buffer\_t}}\ *\mbox{\hyperlink{classbuffer}{buffer}}\ =\ c-\/>buffer;}
\DoxyCodeLine{01219\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ len1\ =\ valueFormats[0].get\_len\ ();}
\DoxyCodeLine{01220\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ len2\ =\ valueFormats[1].get\_len\ ();}
\DoxyCodeLine{01221\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ record\_size\ =\ HBUINT16::static\_size\ *\ (1\ +\ len1\ +\ len2);}
\DoxyCodeLine{01222\ }
\DoxyCodeLine{01223\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1_pair_value_record}{PairValueRecord}}\ *record\ =\ hb\_bsearch\ (\mbox{\hyperlink{classbuffer}{buffer}}-\/>info[pos].codepoint,}
\DoxyCodeLine{01224\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&firstPairValueRecord,}
\DoxyCodeLine{01225\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ len,}
\DoxyCodeLine{01226\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ record\_size);}
\DoxyCodeLine{01227\ \ \ \ \ \textcolor{keywordflow}{if}\ (record)}
\DoxyCodeLine{01228\ \ \ \ \ \{}
\DoxyCodeLine{01229\ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ applied\_first\ =\ valueFormats[0].apply\_value\ (c,\ \textcolor{keyword}{this},\ \&record-\/>values[0],\ \mbox{\hyperlink{classbuffer}{buffer}}-\/>cur\_pos());}
\DoxyCodeLine{01230\ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ applied\_second\ =\ valueFormats[1].apply\_value\ (c,\ \textcolor{keyword}{this},\ \&record-\/>values[len1],\ \mbox{\hyperlink{classbuffer}{buffer}}-\/>pos[pos]);}
\DoxyCodeLine{01231\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (applied\_first\ ||\ applied\_second)}
\DoxyCodeLine{01232\ \ \ \ \ \mbox{\hyperlink{classbuffer}{buffer}}-\/>unsafe\_to\_break\ (\mbox{\hyperlink{classbuffer}{buffer}}-\/>idx,\ pos\ +\ 1);}
\DoxyCodeLine{01233\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (len2)}
\DoxyCodeLine{01234\ \ \ \ \ pos++;}
\DoxyCodeLine{01235\ \ \ \ \ \ \ \mbox{\hyperlink{classbuffer}{buffer}}-\/>idx\ =\ pos;}
\DoxyCodeLine{01236\ \ \ \ \ \ \ return\_trace\ (\textcolor{keyword}{true});}
\DoxyCodeLine{01237\ \ \ \ \ \}}
\DoxyCodeLine{01238\ \ \ \ \ \mbox{\hyperlink{classbuffer}{buffer}}-\/>unsafe\_to\_concat\ (\mbox{\hyperlink{classbuffer}{buffer}}-\/>idx,\ pos\ +\ 1);}
\DoxyCodeLine{01239\ \ \ \ \ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{01240\ \ \ \}}
\DoxyCodeLine{01241\ }
\DoxyCodeLine{01242\ \ \ \textcolor{keywordtype}{bool}\ subset\ (\mbox{\hyperlink{structhb__subset__context__t}{hb\_subset\_context\_t}}\ *c,}
\DoxyCodeLine{01243\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1_value_format}{ValueFormat}}\ valueFormats[2],}
\DoxyCodeLine{01244\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1_value_format}{ValueFormat}}\ newFormats[2])\textcolor{keyword}{\ const}}
\DoxyCodeLine{01245\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{01246\ \ \ \ \ TRACE\_SUBSET\ (\textcolor{keyword}{this});}
\DoxyCodeLine{01247\ \ \ \ \ \textcolor{keyword}{auto}\ snap\ =\ c-\/>serializer-\/>snapshot\ ();}
\DoxyCodeLine{01248\ }
\DoxyCodeLine{01249\ \ \ \ \ \textcolor{keyword}{auto}\ *out\ =\ c-\/>serializer-\/>start\_embed\ (*\textcolor{keyword}{this});}
\DoxyCodeLine{01250\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!c-\/>serializer-\/>extend\_min\ (out)))\ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{01251\ \ \ \ \ out-\/>len\ =\ 0;}
\DoxyCodeLine{01252\ }
\DoxyCodeLine{01253\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structhb__set__t}{hb\_set\_t}}\ \&glyphset\ =\ *c-\/>plan-\/>glyphset\_gsub\ ();}
\DoxyCodeLine{01254\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structhb__map__t}{hb\_map\_t}}\ \&glyph\_map\ =\ *c-\/>plan-\/>glyph\_map;}
\DoxyCodeLine{01255\ }
\DoxyCodeLine{01256\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ len1\ =\ valueFormats[0].get\_len\ ();}
\DoxyCodeLine{01257\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ len2\ =\ valueFormats[1].get\_len\ ();}
\DoxyCodeLine{01258\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ record\_size\ =\ HBUINT16::static\_size\ +\ Value::static\_size\ *\ (len1\ +\ len2);}
\DoxyCodeLine{01259\ }
\DoxyCodeLine{01260\ \ \ \ \ \mbox{\hyperlink{struct_o_t_1_1_pair_value_record_1_1context__t}{PairValueRecord::context\_t}}\ context\ =}
\DoxyCodeLine{01261\ \ \ \ \ \{}
\DoxyCodeLine{01262\ \ \ \ \ \ \ \textcolor{keyword}{this},}
\DoxyCodeLine{01263\ \ \ \ \ \ \ valueFormats,}
\DoxyCodeLine{01264\ \ \ \ \ \ \ newFormats,}
\DoxyCodeLine{01265\ \ \ \ \ \ \ len1,}
\DoxyCodeLine{01266\ \ \ \ \ \ \ \&glyph\_map,}
\DoxyCodeLine{01267\ \ \ \ \ \ \ c-\/>plan-\/>layout\_variation\_idx\_map}
\DoxyCodeLine{01268\ \ \ \ \ \};}
\DoxyCodeLine{01269\ }
\DoxyCodeLine{01270\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1_pair_value_record}{PairValueRecord}}\ *record\ =\ \&firstPairValueRecord;}
\DoxyCodeLine{01271\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ count\ =\ len,\ num\ =\ 0;}
\DoxyCodeLine{01272\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ i\ =\ 0;\ i\ <\ count;\ i++)}
\DoxyCodeLine{01273\ \ \ \ \ \{}
\DoxyCodeLine{01274\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (glyphset.has\ (record-\/>secondGlyph)}
\DoxyCodeLine{01275\ \ \ \ \ \ \&\&\ record-\/>subset\ (c,\ \&context))\ num++;}
\DoxyCodeLine{01276\ \ \ \ \ \ \ record\ =\ \&StructAtOffset<const\ PairValueRecord>\ (record,\ record\_size);}
\DoxyCodeLine{01277\ \ \ \ \ \}}
\DoxyCodeLine{01278\ }
\DoxyCodeLine{01279\ \ \ \ \ out-\/>len\ =\ num;}
\DoxyCodeLine{01280\ \ \ \ \ \textcolor{keywordflow}{if}\ (!num)\ c-\/>serializer-\/>revert\ (snap);}
\DoxyCodeLine{01281\ \ \ \ \ return\_trace\ (num);}
\DoxyCodeLine{01282\ \ \ \}}
\DoxyCodeLine{01283\ }
\DoxyCodeLine{01284\ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_o_t_1_1_pair_set_1_1sanitize__closure__t}{sanitize\_closure\_t}}}
\DoxyCodeLine{01285\ \ \ \{}
\DoxyCodeLine{01286\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1_value_format}{ValueFormat}}\ *valueFormats;}
\DoxyCodeLine{01287\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ len1;\ \textcolor{comment}{/*\ valueFormats[0].get\_len()\ */}}
\DoxyCodeLine{01288\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ stride;\ \textcolor{comment}{/*\ 1\ +\ len1\ +\ len2\ */}}
\DoxyCodeLine{01289\ \ \ \};}
\DoxyCodeLine{01290\ }
\DoxyCodeLine{01291\ \ \ \textcolor{keywordtype}{bool}\ sanitize\ (\mbox{\hyperlink{structhb__sanitize__context__t}{hb\_sanitize\_context\_t}}\ *c,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1_pair_set_1_1sanitize__closure__t}{sanitize\_closure\_t}}\ *closure)\textcolor{keyword}{\ const}}
\DoxyCodeLine{01292\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{01293\ \ \ \ \ TRACE\_SANITIZE\ (\textcolor{keyword}{this});}
\DoxyCodeLine{01294\ \ \ \ \ \textcolor{keywordflow}{if}\ (!(c-\/>check\_struct\ (\textcolor{keyword}{this})}
\DoxyCodeLine{01295\ \ \ \ \ \ \ \ \&\&\ c-\/>check\_range\ (\&firstPairValueRecord,}
\DoxyCodeLine{01296\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ len,}
\DoxyCodeLine{01297\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ HBUINT16::static\_size,}
\DoxyCodeLine{01298\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ closure-\/>stride)))\ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{01299\ }
\DoxyCodeLine{01300\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ count\ =\ len;}
\DoxyCodeLine{01301\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1_pair_value_record}{PairValueRecord}}\ *record\ =\ \&firstPairValueRecord;}
\DoxyCodeLine{01302\ \ \ \ \ return\_trace\ (closure-\/>valueFormats[0].sanitize\_values\_stride\_unsafe\ (c,\ \textcolor{keyword}{this},\ \&record-\/>values[0],\ count,\ closure-\/>stride)\ \&\&}
\DoxyCodeLine{01303\ \ \ \ \ \ \ \ \ \ \ closure-\/>valueFormats[1].sanitize\_values\_stride\_unsafe\ (c,\ \textcolor{keyword}{this},\ \&record-\/>values[closure-\/>len1],\ count,\ closure-\/>stride));}
\DoxyCodeLine{01304\ \ \ \}}
\DoxyCodeLine{01305\ }
\DoxyCodeLine{01306\ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{01307\ \ \ \mbox{\hyperlink{struct_o_t_1_1_int_type}{HBUINT16}}\ \ \ \ \ \ len;\ \ \ \ \textcolor{comment}{/*\ Number\ of\ PairValueRecords\ */}}
\DoxyCodeLine{01308\ \ \ \mbox{\hyperlink{struct_o_t_1_1_pair_value_record}{PairValueRecord}}\ \ \ \ firstPairValueRecord;}
\DoxyCodeLine{01309\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Array\ of\ PairValueRecords-\/-\/ordered}}
\DoxyCodeLine{01310\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ by\ GlyphID\ of\ the\ second\ glyph\ */}}
\DoxyCodeLine{01311\ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{01312\ \ \ DEFINE\_SIZE\_MIN\ (2);}
\DoxyCodeLine{01313\ \};}
\DoxyCodeLine{01314\ }
\DoxyCodeLine{01315\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_o_t_1_1_pair_pos_format1}{PairPosFormat1}}}
\DoxyCodeLine{01316\ \{}
\DoxyCodeLine{01317\ \ \ \textcolor{keywordtype}{bool}\ intersects\ (\textcolor{keyword}{const}\ \mbox{\hyperlink{structhb__set__t}{hb\_set\_t}}\ *glyphs)\textcolor{keyword}{\ const}}
\DoxyCodeLine{01318\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{01319\ \ \ \ \ \textcolor{keywordflow}{return}}
\DoxyCodeLine{01320\ \ \ \ \ +\ hb\_zip\ (\textcolor{keyword}{this}+coverage,\ pairSet)}
\DoxyCodeLine{01321\ \ \ \ \ |\ hb\_filter\ (*glyphs,\ hb\_first)}
\DoxyCodeLine{01322\ \ \ \ \ |\ hb\_map\ (hb\_second)}
\DoxyCodeLine{01323\ \ \ \ \ |\ hb\_map\ ([glyphs,\ \textcolor{keyword}{this}]\ (\textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1_offset_to}{Offset16To<PairSet>}}\ \&\_)}
\DoxyCodeLine{01324\ \ \ \ \ \ \ \ \ \ \ \{\ \textcolor{keywordflow}{return}\ (\textcolor{keyword}{this}+\_).intersects\ (glyphs,\ valueFormat);\ \})}
\DoxyCodeLine{01325\ \ \ \ \ |\ hb\_any}
\DoxyCodeLine{01326\ \ \ \ \ ;}
\DoxyCodeLine{01327\ \ \ \}}
\DoxyCodeLine{01328\ }
\DoxyCodeLine{01329\ \ \ \textcolor{keywordtype}{void}\ closure\_lookups\ (\mbox{\hyperlink{struct_o_t_1_1hb__closure__lookups__context__t}{hb\_closure\_lookups\_context\_t}}\ *c)\textcolor{keyword}{\ const\ }\{\}}
\DoxyCodeLine{01330\ \ \ \textcolor{keywordtype}{void}\ collect\_variation\_indices\ (\mbox{\hyperlink{struct_o_t_1_1hb__collect__variation__indices__context__t}{hb\_collect\_variation\_indices\_context\_t}}\ *c)\textcolor{keyword}{\ const}}
\DoxyCodeLine{01331\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{01332\ \ \ \ \ \textcolor{keywordflow}{if}\ ((!valueFormat[0].has\_device\ ())\ \&\&\ (!valueFormat[1].has\_device\ ()))\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{01333\ }
\DoxyCodeLine{01334\ \ \ \ \ \textcolor{keyword}{auto}\ it\ =}
\DoxyCodeLine{01335\ \ \ \ \ +\ hb\_zip\ (\textcolor{keyword}{this}+coverage,\ pairSet)}
\DoxyCodeLine{01336\ \ \ \ \ |\ hb\_filter\ (c-\/>glyph\_set,\ hb\_first)}
\DoxyCodeLine{01337\ \ \ \ \ |\ hb\_map\ (hb\_second)}
\DoxyCodeLine{01338\ \ \ \ \ ;}
\DoxyCodeLine{01339\ }
\DoxyCodeLine{01340\ \ \ \ \ \textcolor{keywordflow}{if}\ (!it)\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{01341\ \ \ \ \ +\ it}
\DoxyCodeLine{01342\ \ \ \ \ |\ hb\_map\ (hb\_add\ (\textcolor{keyword}{this}))}
\DoxyCodeLine{01343\ \ \ \ \ |\ hb\_apply\ ([\&]\ (\textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1_pair_set}{PairSet}}\&\ \_)\ \{\ \_.collect\_variation\_indices\ (c,\ valueFormat);\ \})}
\DoxyCodeLine{01344\ \ \ \ \ ;}
\DoxyCodeLine{01345\ \ \ \}}
\DoxyCodeLine{01346\ }
\DoxyCodeLine{01347\ \ \ \textcolor{keywordtype}{void}\ collect\_glyphs\ (\mbox{\hyperlink{struct_o_t_1_1hb__collect__glyphs__context__t}{hb\_collect\_glyphs\_context\_t}}\ *c)\textcolor{keyword}{\ const}}
\DoxyCodeLine{01348\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{01349\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!(\textcolor{keyword}{this}+coverage).collect\_coverage\ (c-\/>input)))\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{01350\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ count\ =\ pairSet.len;}
\DoxyCodeLine{01351\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ count;\ i++)}
\DoxyCodeLine{01352\ \ \ \ \ \ \ (\textcolor{keyword}{this}+pairSet[i]).collect\_glyphs\ (c,\ valueFormat);}
\DoxyCodeLine{01353\ \ \ \}}
\DoxyCodeLine{01354\ }
\DoxyCodeLine{01355\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1_coverage}{Coverage}}\ \&get\_coverage\ ()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{this}+coverage;\ \}}
\DoxyCodeLine{01356\ }
\DoxyCodeLine{01357\ \ \ \textcolor{keywordtype}{bool}\ apply\ (\mbox{\hyperlink{struct_o_t_1_1hb__ot__apply__context__t}{hb\_ot\_apply\_context\_t}}\ *c)\textcolor{keyword}{\ const}}
\DoxyCodeLine{01358\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{01359\ \ \ \ \ TRACE\_APPLY\ (\textcolor{keyword}{this});}
\DoxyCodeLine{01360\ \ \ \ \ \mbox{\hyperlink{structhb__buffer__t}{hb\_buffer\_t}}\ *\mbox{\hyperlink{classbuffer}{buffer}}\ =\ c-\/>buffer;}
\DoxyCodeLine{01361\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ index\ =\ (\textcolor{keyword}{this}+coverage).get\_coverage\ \ (\mbox{\hyperlink{classbuffer}{buffer}}-\/>cur().codepoint);}
\DoxyCodeLine{01362\ \ \ \ \ \textcolor{keywordflow}{if}\ (likely\ (index\ ==\ NOT\_COVERED))\ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{01363\ }
\DoxyCodeLine{01364\ \ \ \ \ \mbox{\hyperlink{struct_o_t_1_1hb__ot__apply__context__t_1_1skipping__iterator__t}{hb\_ot\_apply\_context\_t::skipping\_iterator\_t}}\ \&skippy\_iter\ =\ c-\/>iter\_input;}
\DoxyCodeLine{01365\ \ \ \ \ skippy\_iter.reset\ (\mbox{\hyperlink{classbuffer}{buffer}}-\/>idx,\ 1);}
\DoxyCodeLine{01366\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ unsafe\_to;}
\DoxyCodeLine{01367\ \ \ \ \ \textcolor{keywordflow}{if}\ (!skippy\_iter.next\ (\&unsafe\_to))}
\DoxyCodeLine{01368\ \ \ \ \ \{}
\DoxyCodeLine{01369\ \ \ \ \ \ \ \mbox{\hyperlink{classbuffer}{buffer}}-\/>unsafe\_to\_concat\ (\mbox{\hyperlink{classbuffer}{buffer}}-\/>idx,\ unsafe\_to);}
\DoxyCodeLine{01370\ \ \ \ \ \ \ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{01371\ \ \ \ \ \}}
\DoxyCodeLine{01372\ }
\DoxyCodeLine{01373\ \ \ \ \ return\_trace\ ((\textcolor{keyword}{this}+pairSet[index]).apply\ (c,\ valueFormat,\ skippy\_iter.idx));}
\DoxyCodeLine{01374\ \ \ \}}
\DoxyCodeLine{01375\ }
\DoxyCodeLine{01376\ \ \ \textcolor{keywordtype}{bool}\ subset\ (\mbox{\hyperlink{structhb__subset__context__t}{hb\_subset\_context\_t}}\ *c)\textcolor{keyword}{\ const}}
\DoxyCodeLine{01377\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{01378\ \ \ \ \ TRACE\_SUBSET\ (\textcolor{keyword}{this});}
\DoxyCodeLine{01379\ }
\DoxyCodeLine{01380\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structhb__set__t}{hb\_set\_t}}\ \&glyphset\ =\ *c-\/>plan-\/>glyphset\_gsub\ ();}
\DoxyCodeLine{01381\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structhb__map__t}{hb\_map\_t}}\ \&glyph\_map\ =\ *c-\/>plan-\/>glyph\_map;}
\DoxyCodeLine{01382\ }
\DoxyCodeLine{01383\ \ \ \ \ \textcolor{keyword}{auto}\ *out\ =\ c-\/>serializer-\/>start\_embed\ (*\textcolor{keyword}{this});}
\DoxyCodeLine{01384\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!c-\/>serializer-\/>extend\_min\ (out)))\ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{01385\ \ \ \ \ out-\/>format\ =\ format;}
\DoxyCodeLine{01386\ \ \ \ \ out-\/>valueFormat[0]\ =\ valueFormat[0];}
\DoxyCodeLine{01387\ \ \ \ \ out-\/>valueFormat[1]\ =\ valueFormat[1];}
\DoxyCodeLine{01388\ \ \ \ \ \textcolor{keywordflow}{if}\ (c-\/>plan-\/>flags\ \&\ HB\_SUBSET\_FLAGS\_NO\_HINTING)}
\DoxyCodeLine{01389\ \ \ \ \ \{}
\DoxyCodeLine{01390\ \ \ \ \ \ \ \mbox{\hyperlink{structhb__pair__t}{hb\_pair\_t<unsigned,\ unsigned>}}\ newFormats\ =\ compute\_effective\_value\_formats\ (glyphset);}
\DoxyCodeLine{01391\ \ \ \ \ \ \ out-\/>valueFormat[0]\ =\ newFormats.first;}
\DoxyCodeLine{01392\ \ \ \ \ \ \ out-\/>valueFormat[1]\ =\ newFormats.second;}
\DoxyCodeLine{01393\ \ \ \ \ \}}
\DoxyCodeLine{01394\ }
\DoxyCodeLine{01395\ \ \ \ \ \mbox{\hyperlink{structhb__vector__t}{hb\_sorted\_vector\_t<hb\_codepoint\_t>}}\ new\_coverage;}
\DoxyCodeLine{01396\ }
\DoxyCodeLine{01397\ \ \ \ \ +\ hb\_zip\ (\textcolor{keyword}{this}+coverage,\ pairSet)}
\DoxyCodeLine{01398\ \ \ \ \ |\ hb\_filter\ (glyphset,\ hb\_first)}
\DoxyCodeLine{01399\ \ \ \ \ |\ hb\_filter\ ([\textcolor{keyword}{this},\ c,\ out]\ (\textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1_offset_to}{Offset16To<PairSet>}}\&\ \_)}
\DoxyCodeLine{01400\ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01401\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ snap\ =\ c-\/>serializer-\/>snapshot\ ();}
\DoxyCodeLine{01402\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ *o\ =\ out-\/>pairSet.serialize\_append\ (c-\/>serializer);}
\DoxyCodeLine{01403\ \ \ \ \ \ \ \ \ \ \ \ if\ (unlikely\ (!o))\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{01404\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ ret\ =\ o-\/>serialize\_subset\ (c,\ \_,\ \textcolor{keyword}{this},\ valueFormat,\ out-\/>valueFormat);}
\DoxyCodeLine{01405\ \ \ \ \ \ \ \ \ \ \ \ if\ (!ret)}
\DoxyCodeLine{01406\ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01407\ \ \ \ \ \ \ \ \ \ \ \ \ \ out-\/>pairSet.pop\ ();}
\DoxyCodeLine{01408\ \ \ \ \ \ \ \ \ \ \ \ \ \ c-\/>serializer-\/>revert\ (snap);}
\DoxyCodeLine{01409\ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01410\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{01411\ \ \ \ \ \ \ \ \ \ \},}
\DoxyCodeLine{01412\ \ \ \ \ \ \ \ \ \ hb\_second)}
\DoxyCodeLine{01413\ \ \ \ \ |\ hb\_map\ (hb\_first)}
\DoxyCodeLine{01414\ \ \ \ \ |\ hb\_map\ (glyph\_map)}
\DoxyCodeLine{01415\ \ \ \ \ |\ hb\_sink\ (new\_coverage)}
\DoxyCodeLine{01416\ \ \ \ \ ;}
\DoxyCodeLine{01417\ }
\DoxyCodeLine{01418\ \ \ \ \ out-\/>coverage.serialize\_serialize\ (c-\/>serializer,\ new\_coverage.iter\ ());}
\DoxyCodeLine{01419\ }
\DoxyCodeLine{01420\ \ \ \ \ return\_trace\ (\textcolor{keywordtype}{bool}\ (new\_coverage));}
\DoxyCodeLine{01421\ \ \ \}}
\DoxyCodeLine{01422\ }
\DoxyCodeLine{01423\ }
\DoxyCodeLine{01424\ \ \ \mbox{\hyperlink{structhb__pair__t}{hb\_pair\_t<unsigned,\ unsigned>}}\ compute\_effective\_value\_formats\ (\textcolor{keyword}{const}\ \mbox{\hyperlink{structhb__set__t}{hb\_set\_t}}\&\ glyphset)\textcolor{keyword}{\ const}}
\DoxyCodeLine{01425\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{01426\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ len1\ =\ valueFormat[0].get\_len\ ();}
\DoxyCodeLine{01427\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ len2\ =\ valueFormat[1].get\_len\ ();}
\DoxyCodeLine{01428\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ record\_size\ =\ HBUINT16::static\_size\ +\ Value::static\_size\ *\ (len1\ +\ len2);}
\DoxyCodeLine{01429\ }
\DoxyCodeLine{01430\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ format1\ =\ 0;}
\DoxyCodeLine{01431\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ format2\ =\ 0;}
\DoxyCodeLine{01432\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1_offset_to}{Offset16To<PairSet>}}\&\ \_\ :}
\DoxyCodeLine{01433\ \ \ \ \ \ \ \ \ \ \ \ \ \ +\ hb\_zip\ (\textcolor{keyword}{this}+coverage,\ pairSet)\ |\ hb\_filter\ (glyphset,\ hb\_first)\ |\ hb\_map\ (hb\_second))}
\DoxyCodeLine{01434\ \ \ \ \ \{}
\DoxyCodeLine{01435\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1_pair_set}{PairSet}}\&\ set\ =\ (\textcolor{keyword}{this}\ +\ \_);}
\DoxyCodeLine{01436\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1_pair_value_record}{PairValueRecord}}\ *record\ =\ \&set.firstPairValueRecord;}
\DoxyCodeLine{01437\ }
\DoxyCodeLine{01438\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ i\ =\ 0;\ i\ <\ set.len;\ i++)}
\DoxyCodeLine{01439\ \ \ \ \ \ \ \{}
\DoxyCodeLine{01440\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (record-\/>intersects\ (glyphset))}
\DoxyCodeLine{01441\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01442\ \ \ \ \ \ \ \ \ \ \ format1\ =\ format1\ |\ valueFormat[0].get\_effective\_format\ (record-\/>get\_values\_1\ ());}
\DoxyCodeLine{01443\ \ \ \ \ \ \ \ \ \ \ format2\ =\ format2\ |\ valueFormat[1].get\_effective\_format\ (record-\/>get\_values\_2\ (valueFormat[0]));}
\DoxyCodeLine{01444\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01445\ \ \ \ \ \ \ \ \ record\ =\ \&StructAtOffset<const\ PairValueRecord>\ (record,\ record\_size);}
\DoxyCodeLine{01446\ \ \ \ \ \ \ \}}
\DoxyCodeLine{01447\ \ \ \ \ \}}
\DoxyCodeLine{01448\ }
\DoxyCodeLine{01449\ \ \ \ \ \textcolor{keywordflow}{return}\ hb\_pair\ (format1,\ format2);}
\DoxyCodeLine{01450\ \ \ \}}
\DoxyCodeLine{01451\ }
\DoxyCodeLine{01452\ }
\DoxyCodeLine{01453\ \ \ \textcolor{keywordtype}{bool}\ sanitize\ (\mbox{\hyperlink{structhb__sanitize__context__t}{hb\_sanitize\_context\_t}}\ *c)\textcolor{keyword}{\ const}}
\DoxyCodeLine{01454\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{01455\ \ \ \ \ TRACE\_SANITIZE\ (\textcolor{keyword}{this});}
\DoxyCodeLine{01456\ }
\DoxyCodeLine{01457\ \ \ \ \ \textcolor{keywordflow}{if}\ (!c-\/>check\_struct\ (\textcolor{keyword}{this}))\ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{01458\ }
\DoxyCodeLine{01459\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ len1\ =\ valueFormat[0].get\_len\ ();}
\DoxyCodeLine{01460\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ len2\ =\ valueFormat[1].get\_len\ ();}
\DoxyCodeLine{01461\ \ \ \ \ \mbox{\hyperlink{struct_o_t_1_1_pair_set_1_1sanitize__closure__t}{PairSet::sanitize\_closure\_t}}\ closure\ =}
\DoxyCodeLine{01462\ \ \ \ \ \{}
\DoxyCodeLine{01463\ \ \ \ \ \ \ valueFormat,}
\DoxyCodeLine{01464\ \ \ \ \ \ \ len1,}
\DoxyCodeLine{01465\ \ \ \ \ \ \ 1\ +\ len1\ +\ len2}
\DoxyCodeLine{01466\ \ \ \ \ \};}
\DoxyCodeLine{01467\ }
\DoxyCodeLine{01468\ \ \ \ \ return\_trace\ (coverage.sanitize\ (c,\ \textcolor{keyword}{this})\ \&\&\ pairSet.sanitize\ (c,\ \textcolor{keyword}{this},\ \&closure));}
\DoxyCodeLine{01469\ \ \ \}}
\DoxyCodeLine{01470\ }
\DoxyCodeLine{01471\ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{01472\ \ \ \mbox{\hyperlink{struct_o_t_1_1_int_type}{HBUINT16}}\ \ format;\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Format\ identifier-\/-\/format\ =\ 1\ */}}
\DoxyCodeLine{01473\ \ \ \mbox{\hyperlink{struct_o_t_1_1_offset_to}{Offset16To<Coverage>}}}
\DoxyCodeLine{01474\ \ \ \ \ \ \ \ \ coverage;\ \ \ \ \ \ \ \textcolor{comment}{/*\ Offset\ to\ Coverage\ table-\/-\/from}}
\DoxyCodeLine{01475\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ beginning\ of\ subtable\ */}}
\DoxyCodeLine{01476\ \ \ \mbox{\hyperlink{struct_o_t_1_1_value_format}{ValueFormat}}\ \ \ \ valueFormat[2];\ \ \ \ \ \textcolor{comment}{/*\ [0]\ Defines\ the\ types\ of\ data\ in}}
\DoxyCodeLine{01477\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ ValueRecord1-\/-\/for\ the\ first\ glyph}}
\DoxyCodeLine{01478\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ in\ the\ pair-\/-\/may\ be\ zero\ (0)\ */}}
\DoxyCodeLine{01479\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ [1]\ Defines\ the\ types\ of\ data\ in}}
\DoxyCodeLine{01480\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ ValueRecord2-\/-\/for\ the\ second\ glyph}}
\DoxyCodeLine{01481\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ in\ the\ pair-\/-\/may\ be\ zero\ (0)\ */}}
\DoxyCodeLine{01482\ \ \ \mbox{\hyperlink{struct_o_t_1_1_array_of}{Array16OfOffset16To<PairSet>}}}
\DoxyCodeLine{01483\ \ \ \ \ \ \ \ \ pairSet;\ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Array\ of\ PairSet\ tables}}
\DoxyCodeLine{01484\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ ordered\ by\ Coverage\ Index\ */}}
\DoxyCodeLine{01485\ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{01486\ \ \ DEFINE\_SIZE\_ARRAY\ (10,\ pairSet);}
\DoxyCodeLine{01487\ \};}
\DoxyCodeLine{01488\ }
\DoxyCodeLine{01489\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_o_t_1_1_pair_pos_format2}{PairPosFormat2}}}
\DoxyCodeLine{01490\ \{}
\DoxyCodeLine{01491\ \ \ \textcolor{keywordtype}{bool}\ intersects\ (\textcolor{keyword}{const}\ \mbox{\hyperlink{structhb__set__t}{hb\_set\_t}}\ *glyphs)\textcolor{keyword}{\ const}}
\DoxyCodeLine{01492\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{01493\ \ \ \ \ \textcolor{keywordflow}{return}\ (\textcolor{keyword}{this}+coverage).intersects\ (glyphs)\ \&\&}
\DoxyCodeLine{01494\ \ \ \ \ \ \ \ (\textcolor{keyword}{this}+classDef2).intersects\ (glyphs);}
\DoxyCodeLine{01495\ \ \ \}}
\DoxyCodeLine{01496\ }
\DoxyCodeLine{01497\ \ \ \textcolor{keywordtype}{void}\ closure\_lookups\ (\mbox{\hyperlink{struct_o_t_1_1hb__closure__lookups__context__t}{hb\_closure\_lookups\_context\_t}}\ *c)\textcolor{keyword}{\ const\ }\{\}}
\DoxyCodeLine{01498\ \ \ \textcolor{keywordtype}{void}\ collect\_variation\_indices\ (\mbox{\hyperlink{struct_o_t_1_1hb__collect__variation__indices__context__t}{hb\_collect\_variation\_indices\_context\_t}}\ *c)\textcolor{keyword}{\ const}}
\DoxyCodeLine{01499\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{01500\ \ \ \ \ \textcolor{keywordflow}{if}\ (!intersects\ (c-\/>glyph\_set))\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{01501\ \ \ \ \ \textcolor{keywordflow}{if}\ ((!valueFormat1.has\_device\ ())\ \&\&\ (!valueFormat2.has\_device\ ()))\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{01502\ }
\DoxyCodeLine{01503\ \ \ \ \ \mbox{\hyperlink{structhb__set__t}{hb\_set\_t}}\ klass1\_glyphs,\ klass2\_glyphs;}
\DoxyCodeLine{01504\ \ \ \ \ \textcolor{keywordflow}{if}\ (!(\textcolor{keyword}{this}+classDef1).collect\_coverage\ (\&klass1\_glyphs))\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{01505\ \ \ \ \ \textcolor{keywordflow}{if}\ (!(\textcolor{keyword}{this}+classDef2).collect\_coverage\ (\&klass2\_glyphs))\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{01506\ }
\DoxyCodeLine{01507\ \ \ \ \ \mbox{\hyperlink{structhb__set__t}{hb\_set\_t}}\ class1\_set,\ class2\_set;}
\DoxyCodeLine{01508\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ cp\ :\ +\ c-\/>glyph\_set-\/>iter\ ()\ |\ hb\_filter\ (\textcolor{keyword}{this}\ +\ coverage))}
\DoxyCodeLine{01509\ \ \ \ \ \{}
\DoxyCodeLine{01510\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!klass1\_glyphs.has\ (cp))\ class1\_set.add\ (0);}
\DoxyCodeLine{01511\ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{01512\ \ \ \ \ \ \ \{}
\DoxyCodeLine{01513\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ klass1\ =\ (\textcolor{keyword}{this}+classDef1).get\ (cp);}
\DoxyCodeLine{01514\ \ \ \ \ \ \ \ \ class1\_set.add\ (klass1);}
\DoxyCodeLine{01515\ \ \ \ \ \ \ \}}
\DoxyCodeLine{01516\ \ \ \ \ \}}
\DoxyCodeLine{01517\ }
\DoxyCodeLine{01518\ \ \ \ \ class2\_set.add\ (0);}
\DoxyCodeLine{01519\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ cp\ :\ +\ c-\/>glyph\_set-\/>iter\ ()\ |\ hb\_filter\ (klass2\_glyphs))}
\DoxyCodeLine{01520\ \ \ \ \ \{}
\DoxyCodeLine{01521\ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ klass2\ =\ (\textcolor{keyword}{this}+classDef2).get\ (cp);}
\DoxyCodeLine{01522\ \ \ \ \ \ \ class2\_set.add\ (klass2);}
\DoxyCodeLine{01523\ \ \ \ \ \}}
\DoxyCodeLine{01524\ }
\DoxyCodeLine{01525\ \ \ \ \ \textcolor{keywordflow}{if}\ (class1\_set.is\_empty\ ()}
\DoxyCodeLine{01526\ \ \ \ \ \ \ \ \ ||\ class2\_set.is\_empty\ ()}
\DoxyCodeLine{01527\ \ \ \ \ \ \ \ \ ||\ (class2\_set.get\_population()\ ==\ 1\ \&\&\ class2\_set.has(0)))}
\DoxyCodeLine{01528\ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{01529\ }
\DoxyCodeLine{01530\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ len1\ =\ valueFormat1.get\_len\ ();}
\DoxyCodeLine{01531\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ len2\ =\ valueFormat2.get\_len\ ();}
\DoxyCodeLine{01532\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structhb__array__t}{hb\_array\_t<const\ Value>}}\ values\_array\ =\ values.as\_array\ ((\textcolor{keywordtype}{unsigned})class1Count\ *\ (unsigned)\ class2Count\ *\ (len1\ +\ len2));}
\DoxyCodeLine{01533\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ class1\_idx\ :\ class1\_set.iter\ ())}
\DoxyCodeLine{01534\ \ \ \ \ \{}
\DoxyCodeLine{01535\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ class2\_idx\ :\ class2\_set.iter\ ())}
\DoxyCodeLine{01536\ \ \ \ \ \ \ \{}
\DoxyCodeLine{01537\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ start\_offset\ =\ (class1\_idx\ *\ (unsigned)\ class2Count\ +\ class2\_idx)\ *\ (len1\ +\ len2);}
\DoxyCodeLine{01538\ \ \ \ \ \textcolor{keywordflow}{if}\ (valueFormat1.has\_device\ ())}
\DoxyCodeLine{01539\ \ \ \ \ \ \ valueFormat1.collect\_variation\_indices\ (c,\ \textcolor{keyword}{this},\ values\_array.sub\_array\ (start\_offset,\ len1));}
\DoxyCodeLine{01540\ }
\DoxyCodeLine{01541\ \ \ \ \ \textcolor{keywordflow}{if}\ (valueFormat2.has\_device\ ())}
\DoxyCodeLine{01542\ \ \ \ \ \ \ valueFormat2.collect\_variation\_indices\ (c,\ \textcolor{keyword}{this},\ values\_array.sub\_array\ (start\_offset+len1,\ len2));}
\DoxyCodeLine{01543\ \ \ \ \ \ \ \}}
\DoxyCodeLine{01544\ \ \ \ \ \}}
\DoxyCodeLine{01545\ \ \ \}}
\DoxyCodeLine{01546\ }
\DoxyCodeLine{01547\ \ \ \textcolor{keywordtype}{void}\ collect\_glyphs\ (\mbox{\hyperlink{struct_o_t_1_1hb__collect__glyphs__context__t}{hb\_collect\_glyphs\_context\_t}}\ *c)\textcolor{keyword}{\ const}}
\DoxyCodeLine{01548\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{01549\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!(\textcolor{keyword}{this}+coverage).collect\_coverage\ (c-\/>input)))\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{01550\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!(\textcolor{keyword}{this}+classDef2).collect\_coverage\ (c-\/>input)))\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{01551\ \ \ \}}
\DoxyCodeLine{01552\ }
\DoxyCodeLine{01553\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1_coverage}{Coverage}}\ \&get\_coverage\ ()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{this}+coverage;\ \}}
\DoxyCodeLine{01554\ }
\DoxyCodeLine{01555\ \ \ \textcolor{keywordtype}{bool}\ apply\ (\mbox{\hyperlink{struct_o_t_1_1hb__ot__apply__context__t}{hb\_ot\_apply\_context\_t}}\ *c)\textcolor{keyword}{\ const}}
\DoxyCodeLine{01556\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{01557\ \ \ \ \ TRACE\_APPLY\ (\textcolor{keyword}{this});}
\DoxyCodeLine{01558\ \ \ \ \ \mbox{\hyperlink{structhb__buffer__t}{hb\_buffer\_t}}\ *\mbox{\hyperlink{classbuffer}{buffer}}\ =\ c-\/>buffer;}
\DoxyCodeLine{01559\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ index\ =\ (\textcolor{keyword}{this}+coverage).get\_coverage\ \ (\mbox{\hyperlink{classbuffer}{buffer}}-\/>cur().codepoint);}
\DoxyCodeLine{01560\ \ \ \ \ \textcolor{keywordflow}{if}\ (likely\ (index\ ==\ NOT\_COVERED))\ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{01561\ }
\DoxyCodeLine{01562\ \ \ \ \ \mbox{\hyperlink{struct_o_t_1_1hb__ot__apply__context__t_1_1skipping__iterator__t}{hb\_ot\_apply\_context\_t::skipping\_iterator\_t}}\ \&skippy\_iter\ =\ c-\/>iter\_input;}
\DoxyCodeLine{01563\ \ \ \ \ skippy\_iter.reset\ (\mbox{\hyperlink{classbuffer}{buffer}}-\/>idx,\ 1);}
\DoxyCodeLine{01564\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ unsafe\_to;}
\DoxyCodeLine{01565\ \ \ \ \ \textcolor{keywordflow}{if}\ (!skippy\_iter.next\ (\&unsafe\_to))}
\DoxyCodeLine{01566\ \ \ \ \ \{}
\DoxyCodeLine{01567\ \ \ \ \ \ \ \mbox{\hyperlink{classbuffer}{buffer}}-\/>unsafe\_to\_concat\ (\mbox{\hyperlink{classbuffer}{buffer}}-\/>idx,\ unsafe\_to);}
\DoxyCodeLine{01568\ \ \ \ \ \ \ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{01569\ \ \ \ \ \}}
\DoxyCodeLine{01570\ }
\DoxyCodeLine{01571\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ len1\ =\ valueFormat1.get\_len\ ();}
\DoxyCodeLine{01572\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ len2\ =\ valueFormat2.get\_len\ ();}
\DoxyCodeLine{01573\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ record\_len\ =\ len1\ +\ len2;}
\DoxyCodeLine{01574\ }
\DoxyCodeLine{01575\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ klass1\ =\ (\textcolor{keyword}{this}+classDef1).get\_class\ (\mbox{\hyperlink{classbuffer}{buffer}}-\/>cur().codepoint);}
\DoxyCodeLine{01576\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ klass2\ =\ (\textcolor{keyword}{this}+classDef2).get\_class\ (\mbox{\hyperlink{classbuffer}{buffer}}-\/>info[skippy\_iter.idx].codepoint);}
\DoxyCodeLine{01577\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (klass1\ >=\ class1Count\ ||\ klass2\ >=\ class2Count))}
\DoxyCodeLine{01578\ \ \ \ \ \{}
\DoxyCodeLine{01579\ \ \ \ \ \ \ \mbox{\hyperlink{classbuffer}{buffer}}-\/>unsafe\_to\_concat\ (\mbox{\hyperlink{classbuffer}{buffer}}-\/>idx,\ skippy\_iter.idx\ +\ 1);}
\DoxyCodeLine{01580\ \ \ \ \ \ \ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{01581\ \ \ \ \ \}}
\DoxyCodeLine{01582\ }
\DoxyCodeLine{01583\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1_int_type}{Value}}\ *v\ =\ \&values[record\_len\ *\ (klass1\ *\ class2Count\ +\ klass2)];}
\DoxyCodeLine{01584\ }
\DoxyCodeLine{01585\ \ \ \ \ \textcolor{keywordtype}{bool}\ applied\_first\ =\ \textcolor{keyword}{false},\ applied\_second\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{01586\ }
\DoxyCodeLine{01587\ }
\DoxyCodeLine{01588\ \ \ \ \ \textcolor{comment}{/*\ Isolate\ simple\ kerning\ and\ apply\ it\ half\ to\ each\ side.}}
\DoxyCodeLine{01589\ \textcolor{comment}{\ \ \ \ \ *\ Results\ in\ better\ cursor\ positinoing\ /\ underline\ drawing.}}
\DoxyCodeLine{01590\ \textcolor{comment}{\ \ \ \ \ *}}
\DoxyCodeLine{01591\ \textcolor{comment}{\ \ \ \ \ *\ Disabled,\ because\ causes\ issues...\ :-\/(}}
\DoxyCodeLine{01592\ \textcolor{comment}{\ \ \ \ \ *\ https://github.com/harfbuzz/harfbuzz/issues/3408}}
\DoxyCodeLine{01593\ \textcolor{comment}{\ \ \ \ \ *\ https://github.com/harfbuzz/harfbuzz/pull/3235\#issuecomment-\/1029814978}}
\DoxyCodeLine{01594\ \textcolor{comment}{\ \ \ \ \ */}}
\DoxyCodeLine{01595\ \textcolor{preprocessor}{\#ifndef\ HB\_SPLIT\_KERN}}
\DoxyCodeLine{01596\ \ \ \ \ \textcolor{keywordflow}{if}\ (0)}
\DoxyCodeLine{01597\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01598\ \ \ \ \ \{}
\DoxyCodeLine{01599\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!len2)}
\DoxyCodeLine{01600\ \ \ \ \ \ \ \{}
\DoxyCodeLine{01601\ \ \ \ \ \textcolor{keyword}{const}\ hb\_direction\_t\ dir\ =\ \mbox{\hyperlink{classbuffer}{buffer}}-\/>props.direction;}
\DoxyCodeLine{01602\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{bool}\ horizontal\ =\ HB\_DIRECTION\_IS\_HORIZONTAL\ (dir);}
\DoxyCodeLine{01603\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{bool}\ backward\ =\ HB\_DIRECTION\_IS\_BACKWARD\ (dir);}
\DoxyCodeLine{01604\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ mask\ =\ horizontal\ ?\ ValueFormat::xAdvance\ :\ ValueFormat::yAdvance;}
\DoxyCodeLine{01605\ \ \ \ \ \textcolor{keywordflow}{if}\ (backward)}
\DoxyCodeLine{01606\ \ \ \ \ \ \ mask\ |=\ mask\ >>\ 2;\ \textcolor{comment}{/*\ Add\ eg.\ xPlacement\ in\ RTL.\ */}}
\DoxyCodeLine{01607\ \ \ \ \ \textcolor{comment}{/*\ Add\ Devices.\ */}}
\DoxyCodeLine{01608\ \ \ \ \ mask\ |=\ mask\ <<\ 4;}
\DoxyCodeLine{01609\ }
\DoxyCodeLine{01610\ \ \ \ \ \textcolor{keywordflow}{if}\ (valueFormat1\ \&\ \string~mask)}
\DoxyCodeLine{01611\ \ \ \ \ \ \ \textcolor{keywordflow}{goto}\ bail;}
\DoxyCodeLine{01612\ }
\DoxyCodeLine{01613\ \ \ \ \ \textcolor{comment}{/*\ Is\ simple\ kern.\ Apply\ value\ on\ an\ empty\ position\ slot,}}
\DoxyCodeLine{01614\ \textcolor{comment}{\ \ \ \ \ *\ then\ split\ it\ between\ sides.\ */}}
\DoxyCodeLine{01615\ }
\DoxyCodeLine{01616\ \ \ \ \ \mbox{\hyperlink{structhb__glyph__position__t}{hb\_glyph\_position\_t}}\ pos\{\};}
\DoxyCodeLine{01617\ \ \ \ \ \textcolor{keywordflow}{if}\ (valueFormat1.apply\_value\ (c,\ \textcolor{keyword}{this},\ v,\ pos))}
\DoxyCodeLine{01618\ \ \ \ \ \{}
\DoxyCodeLine{01619\ \ \ \ \ \ \ hb\_position\_t\ *src\ \ =\ \&pos.x\_advance;}
\DoxyCodeLine{01620\ \ \ \ \ \ \ hb\_position\_t\ *dst1\ =\ \&\mbox{\hyperlink{classbuffer}{buffer}}-\/>cur\_pos().x\_advance;}
\DoxyCodeLine{01621\ \ \ \ \ \ \ hb\_position\_t\ *dst2\ =\ \&\mbox{\hyperlink{classbuffer}{buffer}}-\/>pos[skippy\_iter.idx].x\_advance;}
\DoxyCodeLine{01622\ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ i\ =\ horizontal\ ?\ 0\ :\ 1;}
\DoxyCodeLine{01623\ }
\DoxyCodeLine{01624\ \ \ \ \ \ \ hb\_position\_t\ \mbox{\hyperlink{struct_o_t_1_1kern}{kern}}\ \ =\ src[i];}
\DoxyCodeLine{01625\ \ \ \ \ \ \ hb\_position\_t\ kern1\ =\ \mbox{\hyperlink{struct_o_t_1_1kern}{kern}}\ >>\ 1;}
\DoxyCodeLine{01626\ \ \ \ \ \ \ hb\_position\_t\ kern2\ =\ \mbox{\hyperlink{struct_o_t_1_1kern}{kern}}\ -\/\ kern1;}
\DoxyCodeLine{01627\ }
\DoxyCodeLine{01628\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!backward)}
\DoxyCodeLine{01629\ \ \ \ \ \ \ \{}
\DoxyCodeLine{01630\ \ \ \ \ \ \ \ \ dst1[i]\ +=\ kern1;}
\DoxyCodeLine{01631\ \ \ \ \ \ \ \ \ dst2[i]\ +=\ kern2;}
\DoxyCodeLine{01632\ \ \ \ \ \ \ \ \ dst2[i\ +\ 2]\ +=\ kern2;}
\DoxyCodeLine{01633\ \ \ \ \ \ \ \}}
\DoxyCodeLine{01634\ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{01635\ \ \ \ \ \ \ \{}
\DoxyCodeLine{01636\ \ \ \ \ \ \ \ \ dst1[i]\ +=\ kern1;}
\DoxyCodeLine{01637\ \ \ \ \ \ \ \ \ dst1[i\ +\ 2]\ +=\ src[i\ +\ 2]\ -\/\ kern2;}
\DoxyCodeLine{01638\ \ \ \ \ \ \ \ \ dst2[i]\ +=\ kern2;}
\DoxyCodeLine{01639\ \ \ \ \ \ \ \}}
\DoxyCodeLine{01640\ }
\DoxyCodeLine{01641\ \ \ \ \ \ \ applied\_first\ =\ applied\_second\ =\ \mbox{\hyperlink{struct_o_t_1_1kern}{kern}}\ !=\ 0;}
\DoxyCodeLine{01642\ \ \ \ \ \ \ \textcolor{keywordflow}{goto}\ success;}
\DoxyCodeLine{01643\ \ \ \ \ \}}
\DoxyCodeLine{01644\ \ \ \ \ \textcolor{keywordflow}{goto}\ boring;}
\DoxyCodeLine{01645\ \ \ \ \ \ \ \}}
\DoxyCodeLine{01646\ \ \ \ \ \}}
\DoxyCodeLine{01647\ \ \ \ \ bail:}
\DoxyCodeLine{01648\ }
\DoxyCodeLine{01649\ }
\DoxyCodeLine{01650\ \ \ \ \ applied\_first\ =\ valueFormat1.apply\_value\ (c,\ \textcolor{keyword}{this},\ v,\ \mbox{\hyperlink{classbuffer}{buffer}}-\/>cur\_pos());}
\DoxyCodeLine{01651\ \ \ \ \ applied\_second\ =\ valueFormat2.apply\_value\ (c,\ \textcolor{keyword}{this},\ v\ +\ len1,\ \mbox{\hyperlink{classbuffer}{buffer}}-\/>pos[skippy\_iter.idx]);}
\DoxyCodeLine{01652\ }
\DoxyCodeLine{01653\ \ \ \ \ success:}
\DoxyCodeLine{01654\ \ \ \ \ \textcolor{keywordflow}{if}\ (applied\_first\ ||\ applied\_second)}
\DoxyCodeLine{01655\ \ \ \ \ \ \ \mbox{\hyperlink{classbuffer}{buffer}}-\/>unsafe\_to\_break\ (\mbox{\hyperlink{classbuffer}{buffer}}-\/>idx,\ skippy\_iter.idx\ +\ 1);}
\DoxyCodeLine{01656\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{01657\ \ \ \ \ boring:}
\DoxyCodeLine{01658\ \ \ \ \ \ \ \mbox{\hyperlink{classbuffer}{buffer}}-\/>unsafe\_to\_concat\ (\mbox{\hyperlink{classbuffer}{buffer}}-\/>idx,\ skippy\_iter.idx\ +\ 1);}
\DoxyCodeLine{01659\ }
\DoxyCodeLine{01660\ }
\DoxyCodeLine{01661\ \ \ \ \ \mbox{\hyperlink{classbuffer}{buffer}}-\/>idx\ =\ skippy\_iter.idx;}
\DoxyCodeLine{01662\ \ \ \ \ \textcolor{keywordflow}{if}\ (len2)}
\DoxyCodeLine{01663\ \ \ \ \ \ \ \mbox{\hyperlink{classbuffer}{buffer}}-\/>idx++;}
\DoxyCodeLine{01664\ }
\DoxyCodeLine{01665\ \ \ \ \ return\_trace\ (\textcolor{keyword}{true});}
\DoxyCodeLine{01666\ \ \ \}}
\DoxyCodeLine{01667\ }
\DoxyCodeLine{01668\ \ \ \textcolor{keywordtype}{bool}\ subset\ (\mbox{\hyperlink{structhb__subset__context__t}{hb\_subset\_context\_t}}\ *c)\textcolor{keyword}{\ const}}
\DoxyCodeLine{01669\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{01670\ \ \ \ \ TRACE\_SUBSET\ (\textcolor{keyword}{this});}
\DoxyCodeLine{01671\ \ \ \ \ \textcolor{keyword}{auto}\ *out\ =\ c-\/>serializer-\/>start\_embed\ (*\textcolor{keyword}{this});}
\DoxyCodeLine{01672\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!c-\/>serializer-\/>extend\_min\ (out)))\ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{01673\ \ \ \ \ out-\/>format\ =\ format;}
\DoxyCodeLine{01674\ }
\DoxyCodeLine{01675\ \ \ \ \ \mbox{\hyperlink{structhb__map__t}{hb\_map\_t}}\ klass1\_map;}
\DoxyCodeLine{01676\ \ \ \ \ out-\/>classDef1.serialize\_subset\ (c,\ classDef1,\ \textcolor{keyword}{this},\ \&klass1\_map,\ \textcolor{keyword}{true},\ \textcolor{keyword}{true},\ \&(\textcolor{keyword}{this}\ +\ coverage));}
\DoxyCodeLine{01677\ \ \ \ \ out-\/>class1Count\ =\ klass1\_map.get\_population\ ();}
\DoxyCodeLine{01678\ }
\DoxyCodeLine{01679\ \ \ \ \ \mbox{\hyperlink{structhb__map__t}{hb\_map\_t}}\ klass2\_map;}
\DoxyCodeLine{01680\ \ \ \ \ out-\/>classDef2.serialize\_subset\ (c,\ classDef2,\ \textcolor{keyword}{this},\ \&klass2\_map,\ \textcolor{keyword}{true},\ \textcolor{keyword}{false});}
\DoxyCodeLine{01681\ \ \ \ \ out-\/>class2Count\ =\ klass2\_map.get\_population\ ();}
\DoxyCodeLine{01682\ }
\DoxyCodeLine{01683\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ len1\ =\ valueFormat1.get\_len\ ();}
\DoxyCodeLine{01684\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ len2\ =\ valueFormat2.get\_len\ ();}
\DoxyCodeLine{01685\ }
\DoxyCodeLine{01686\ \ \ \ \ \mbox{\hyperlink{structhb__pair__t}{hb\_pair\_t<unsigned,\ unsigned>}}\ newFormats\ =\ hb\_pair\ (valueFormat1,\ valueFormat2);}
\DoxyCodeLine{01687\ \ \ \ \ \textcolor{keywordflow}{if}\ (c-\/>plan-\/>flags\ \&\ HB\_SUBSET\_FLAGS\_NO\_HINTING)}
\DoxyCodeLine{01688\ \ \ \ \ \ \ newFormats\ =\ compute\_effective\_value\_formats\ (klass1\_map,\ klass2\_map);}
\DoxyCodeLine{01689\ }
\DoxyCodeLine{01690\ \ \ \ \ out-\/>valueFormat1\ =\ newFormats.first;}
\DoxyCodeLine{01691\ \ \ \ \ out-\/>valueFormat2\ =\ newFormats.second;}
\DoxyCodeLine{01692\ }
\DoxyCodeLine{01693\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ class1\_idx\ :\ +\ hb\_range\ ((\textcolor{keywordtype}{unsigned})\ class1Count)\ |\ hb\_filter\ (klass1\_map))}
\DoxyCodeLine{01694\ \ \ \ \ \{}
\DoxyCodeLine{01695\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ class2\_idx\ :\ +\ hb\_range\ ((\textcolor{keywordtype}{unsigned})\ class2Count)\ |\ hb\_filter\ (klass2\_map))}
\DoxyCodeLine{01696\ \ \ \ \ \ \ \{}
\DoxyCodeLine{01697\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ idx\ =\ (class1\_idx\ *\ (unsigned)\ class2Count\ +\ class2\_idx)\ *\ (len1\ +\ len2);}
\DoxyCodeLine{01698\ \ \ \ \ \ \ \ \ valueFormat1.copy\_values\ (c-\/>serializer,\ newFormats.first,\ \textcolor{keyword}{this},\ \&values[idx],\ c-\/>plan-\/>layout\_variation\_idx\_map);}
\DoxyCodeLine{01699\ \ \ \ \ \ \ \ \ valueFormat2.copy\_values\ (c-\/>serializer,\ newFormats.second,\ \textcolor{keyword}{this},\ \&values[idx\ +\ len1],\ c-\/>plan-\/>layout\_variation\_idx\_map);}
\DoxyCodeLine{01700\ \ \ \ \ \ \ \}}
\DoxyCodeLine{01701\ \ \ \ \ \}}
\DoxyCodeLine{01702\ }
\DoxyCodeLine{01703\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structhb__set__t}{hb\_set\_t}}\ \&glyphset\ =\ *c-\/>plan-\/>glyphset\_gsub\ ();}
\DoxyCodeLine{01704\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structhb__map__t}{hb\_map\_t}}\ \&glyph\_map\ =\ *c-\/>plan-\/>glyph\_map;}
\DoxyCodeLine{01705\ }
\DoxyCodeLine{01706\ \ \ \ \ \textcolor{keyword}{auto}\ it\ =}
\DoxyCodeLine{01707\ \ \ \ \ +\ hb\_iter\ (\textcolor{keyword}{this}+coverage)}
\DoxyCodeLine{01708\ \ \ \ \ |\ hb\_filter\ (glyphset)}
\DoxyCodeLine{01709\ \ \ \ \ |\ hb\_map\_retains\_sorting\ (glyph\_map)}
\DoxyCodeLine{01710\ \ \ \ \ ;}
\DoxyCodeLine{01711\ }
\DoxyCodeLine{01712\ \ \ \ \ out-\/>coverage.serialize\_serialize\ (c-\/>serializer,\ it);}
\DoxyCodeLine{01713\ \ \ \ \ return\_trace\ (out-\/>class1Count\ \&\&\ out-\/>class2Count\ \&\&\ bool\ (it));}
\DoxyCodeLine{01714\ \ \ \}}
\DoxyCodeLine{01715\ }
\DoxyCodeLine{01716\ }
\DoxyCodeLine{01717\ \ \ \mbox{\hyperlink{structhb__pair__t}{hb\_pair\_t<unsigned,\ unsigned>}}\ compute\_effective\_value\_formats\ (\textcolor{keyword}{const}\ \mbox{\hyperlink{structhb__map__t}{hb\_map\_t}}\&\ klass1\_map,}
\DoxyCodeLine{01718\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structhb__map__t}{hb\_map\_t}}\&\ klass2\_map)\textcolor{keyword}{\ const}}
\DoxyCodeLine{01719\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{01720\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ len1\ =\ valueFormat1.get\_len\ ();}
\DoxyCodeLine{01721\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ len2\ =\ valueFormat2.get\_len\ ();}
\DoxyCodeLine{01722\ }
\DoxyCodeLine{01723\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ format1\ =\ 0;}
\DoxyCodeLine{01724\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ format2\ =\ 0;}
\DoxyCodeLine{01725\ }
\DoxyCodeLine{01726\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ class1\_idx\ :\ +\ hb\_range\ ((\textcolor{keywordtype}{unsigned})\ class1Count)\ |\ hb\_filter\ (klass1\_map))}
\DoxyCodeLine{01727\ \ \ \ \ \{}
\DoxyCodeLine{01728\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ class2\_idx\ :\ +\ hb\_range\ ((\textcolor{keywordtype}{unsigned})\ class2Count)\ |\ hb\_filter\ (klass2\_map))}
\DoxyCodeLine{01729\ \ \ \ \ \ \ \{}
\DoxyCodeLine{01730\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ idx\ =\ (class1\_idx\ *\ (unsigned)\ class2Count\ +\ class2\_idx)\ *\ (len1\ +\ len2);}
\DoxyCodeLine{01731\ \ \ \ \ \ \ \ \ format1\ =\ format1\ |\ valueFormat1.get\_effective\_format\ (\&values[idx]);}
\DoxyCodeLine{01732\ \ \ \ \ \ \ \ \ format2\ =\ format2\ |\ valueFormat2.get\_effective\_format\ (\&values[idx\ +\ len1]);}
\DoxyCodeLine{01733\ \ \ \ \ \ \ \}}
\DoxyCodeLine{01734\ \ \ \ \ \}}
\DoxyCodeLine{01735\ }
\DoxyCodeLine{01736\ \ \ \ \ \textcolor{keywordflow}{return}\ hb\_pair\ (format1,\ format2);}
\DoxyCodeLine{01737\ \ \ \}}
\DoxyCodeLine{01738\ }
\DoxyCodeLine{01739\ }
\DoxyCodeLine{01740\ \ \ \textcolor{keywordtype}{bool}\ sanitize\ (\mbox{\hyperlink{structhb__sanitize__context__t}{hb\_sanitize\_context\_t}}\ *c)\textcolor{keyword}{\ const}}
\DoxyCodeLine{01741\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{01742\ \ \ \ \ TRACE\_SANITIZE\ (\textcolor{keyword}{this});}
\DoxyCodeLine{01743\ \ \ \ \ \textcolor{keywordflow}{if}\ (!(c-\/>check\_struct\ (\textcolor{keyword}{this})}
\DoxyCodeLine{01744\ \ \ \ \ \ \ \ \&\&\ coverage.sanitize\ (c,\ \textcolor{keyword}{this})}
\DoxyCodeLine{01745\ \ \ \ \ \ \ \ \&\&\ classDef1.sanitize\ (c,\ \textcolor{keyword}{this})}
\DoxyCodeLine{01746\ \ \ \ \ \ \ \ \&\&\ classDef2.sanitize\ (c,\ \textcolor{keyword}{this})))\ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{01747\ }
\DoxyCodeLine{01748\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ len1\ =\ valueFormat1.get\_len\ ();}
\DoxyCodeLine{01749\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ len2\ =\ valueFormat2.get\_len\ ();}
\DoxyCodeLine{01750\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ stride\ =\ len1\ +\ len2;}
\DoxyCodeLine{01751\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ record\_size\ =\ valueFormat1.get\_size\ ()\ +\ valueFormat2.get\_size\ ();}
\DoxyCodeLine{01752\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ count\ =\ (\textcolor{keywordtype}{unsigned}\ int)\ class1Count\ *\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int})\ class2Count;}
\DoxyCodeLine{01753\ \ \ \ \ return\_trace\ (c-\/>check\_range\ ((\textcolor{keyword}{const}\ \textcolor{keywordtype}{void}\ *)\ values,}
\DoxyCodeLine{01754\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ count,}
\DoxyCodeLine{01755\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ record\_size)\ \&\&}
\DoxyCodeLine{01756\ \ \ \ \ \ \ \ \ \ \ valueFormat1.sanitize\_values\_stride\_unsafe\ (c,\ \textcolor{keyword}{this},\ \&values[0],\ count,\ stride)\ \&\&}
\DoxyCodeLine{01757\ \ \ \ \ \ \ \ \ \ \ valueFormat2.sanitize\_values\_stride\_unsafe\ (c,\ \textcolor{keyword}{this},\ \&values[len1],\ count,\ stride));}
\DoxyCodeLine{01758\ \ \ \}}
\DoxyCodeLine{01759\ }
\DoxyCodeLine{01760\ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{01761\ \ \ \mbox{\hyperlink{struct_o_t_1_1_int_type}{HBUINT16}}\ \ format;\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Format\ identifier-\/-\/format\ =\ 2\ */}}
\DoxyCodeLine{01762\ \ \ \mbox{\hyperlink{struct_o_t_1_1_offset_to}{Offset16To<Coverage>}}}
\DoxyCodeLine{01763\ \ \ \ \ \ \ \ \ coverage;\ \ \ \ \ \ \ \textcolor{comment}{/*\ Offset\ to\ Coverage\ table-\/-\/from}}
\DoxyCodeLine{01764\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ beginning\ of\ subtable\ */}}
\DoxyCodeLine{01765\ \ \ \mbox{\hyperlink{struct_o_t_1_1_value_format}{ValueFormat}}\ \ \ \ valueFormat1;\ \ \ \ \ \ \ \textcolor{comment}{/*\ ValueRecord\ definition-\/-\/for\ the}}
\DoxyCodeLine{01766\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ first\ glyph\ of\ the\ pair-\/-\/may\ be\ zero}}
\DoxyCodeLine{01767\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ (0)\ */}}
\DoxyCodeLine{01768\ \ \ \mbox{\hyperlink{struct_o_t_1_1_value_format}{ValueFormat}}\ \ \ \ valueFormat2;\ \ \ \ \ \ \ \textcolor{comment}{/*\ ValueRecord\ definition-\/-\/for\ the}}
\DoxyCodeLine{01769\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ second\ glyph\ of\ the\ pair-\/-\/may\ be}}
\DoxyCodeLine{01770\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ zero\ (0)\ */}}
\DoxyCodeLine{01771\ \ \ \mbox{\hyperlink{struct_o_t_1_1_offset_to}{Offset16To<ClassDef>}}}
\DoxyCodeLine{01772\ \ \ \ \ \ \ \ \ classDef1;\ \ \ \ \ \ \textcolor{comment}{/*\ Offset\ to\ ClassDef\ table-\/-\/from}}
\DoxyCodeLine{01773\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ beginning\ of\ PairPos\ subtable-\/-\/for}}
\DoxyCodeLine{01774\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ the\ first\ glyph\ of\ the\ pair\ */}}
\DoxyCodeLine{01775\ \ \ \mbox{\hyperlink{struct_o_t_1_1_offset_to}{Offset16To<ClassDef>}}}
\DoxyCodeLine{01776\ \ \ \ \ \ \ \ \ classDef2;\ \ \ \ \ \ \textcolor{comment}{/*\ Offset\ to\ ClassDef\ table-\/-\/from}}
\DoxyCodeLine{01777\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ beginning\ of\ PairPos\ subtable-\/-\/for}}
\DoxyCodeLine{01778\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ the\ second\ glyph\ of\ the\ pair\ */}}
\DoxyCodeLine{01779\ \ \ \mbox{\hyperlink{struct_o_t_1_1_int_type}{HBUINT16}}\ \ class1Count;\ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Number\ of\ classes\ in\ ClassDef1}}
\DoxyCodeLine{01780\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ table-\/-\/includes\ Class0\ */}}
\DoxyCodeLine{01781\ \ \ \mbox{\hyperlink{struct_o_t_1_1_int_type}{HBUINT16}}\ \ class2Count;\ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Number\ of\ classes\ in\ ClassDef2}}
\DoxyCodeLine{01782\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ table-\/-\/includes\ Class0\ */}}
\DoxyCodeLine{01783\ \ \ \mbox{\hyperlink{struct_o_t_1_1_unsized_array_of}{ValueRecord}}\ \ \ \ values;\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Matrix\ of\ value\ pairs:}}
\DoxyCodeLine{01784\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ class1-\/major,\ class2-\/minor,}}
\DoxyCodeLine{01785\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ Each\ entry\ has\ value1\ and\ value2\ */}}
\DoxyCodeLine{01786\ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{01787\ \ \ DEFINE\_SIZE\_ARRAY\ (16,\ values);}
\DoxyCodeLine{01788\ \};}
\DoxyCodeLine{01789\ }
\DoxyCodeLine{01790\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_o_t_1_1_pair_pos}{PairPos}}}
\DoxyCodeLine{01791\ \{}
\DoxyCodeLine{01792\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ context\_t,\ \textcolor{keyword}{typename}\ ...Ts>}
\DoxyCodeLine{01793\ \ \ \textcolor{keyword}{typename}\ context\_t::return\_t\ dispatch\ (context\_t\ *c,\ Ts\&\&...\ ds)\textcolor{keyword}{\ const}}
\DoxyCodeLine{01794\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{01795\ \ \ \ \ TRACE\_DISPATCH\ (\textcolor{keyword}{this},\ u.format);}
\DoxyCodeLine{01796\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!c-\/>may\_dispatch\ (\textcolor{keyword}{this},\ \&u.format)))\ return\_trace\ (c-\/>no\_dispatch\_return\_value\ ());}
\DoxyCodeLine{01797\ \ \ \ \ \textcolor{keywordflow}{switch}\ (u.format)\ \{}
\DoxyCodeLine{01798\ \ \ \ \ \textcolor{keywordflow}{case}\ 1:\ return\_trace\ (c-\/>dispatch\ (u.format1,\ std::forward<Ts>\ (ds)...));}
\DoxyCodeLine{01799\ \ \ \ \ \textcolor{keywordflow}{case}\ 2:\ return\_trace\ (c-\/>dispatch\ (u.format2,\ std::forward<Ts>\ (ds)...));}
\DoxyCodeLine{01800\ \ \ \ \ \textcolor{keywordflow}{default}:return\_trace\ (c-\/>default\_return\_value\ ());}
\DoxyCodeLine{01801\ \ \ \ \ \}}
\DoxyCodeLine{01802\ \ \ \}}
\DoxyCodeLine{01803\ }
\DoxyCodeLine{01804\ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{01805\ \ \ \textcolor{keyword}{union\ }\{}
\DoxyCodeLine{01806\ \ \ \mbox{\hyperlink{struct_o_t_1_1_int_type}{HBUINT16}}\ \ \ \ \ \ format;\ \ \ \ \ \textcolor{comment}{/*\ Format\ identifier\ */}}
\DoxyCodeLine{01807\ \ \ \mbox{\hyperlink{struct_o_t_1_1_pair_pos_format1}{PairPosFormat1}}\ \ format1;}
\DoxyCodeLine{01808\ \ \ \mbox{\hyperlink{struct_o_t_1_1_pair_pos_format2}{PairPosFormat2}}\ \ format2;}
\DoxyCodeLine{01809\ \ \ \}\ u;}
\DoxyCodeLine{01810\ \};}
\DoxyCodeLine{01811\ }
\DoxyCodeLine{01812\ }
\DoxyCodeLine{01813\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_o_t_1_1_entry_exit_record}{EntryExitRecord}}}
\DoxyCodeLine{01814\ \{}
\DoxyCodeLine{01815\ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_o_t_1_1_cursive_pos_format1}{CursivePosFormat1}};}
\DoxyCodeLine{01816\ }
\DoxyCodeLine{01817\ \ \ \textcolor{keywordtype}{bool}\ sanitize\ (\mbox{\hyperlink{structhb__sanitize__context__t}{hb\_sanitize\_context\_t}}\ *c,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}\ *base)\textcolor{keyword}{\ const}}
\DoxyCodeLine{01818\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{01819\ \ \ \ \ TRACE\_SANITIZE\ (\textcolor{keyword}{this});}
\DoxyCodeLine{01820\ \ \ \ \ return\_trace\ (entryAnchor.sanitize\ (c,\ base)\ \&\&\ exitAnchor.sanitize\ (c,\ base));}
\DoxyCodeLine{01821\ \ \ \}}
\DoxyCodeLine{01822\ }
\DoxyCodeLine{01823\ \ \ \textcolor{keywordtype}{void}\ collect\_variation\_indices\ (\mbox{\hyperlink{struct_o_t_1_1hb__collect__variation__indices__context__t}{hb\_collect\_variation\_indices\_context\_t}}\ *c,}
\DoxyCodeLine{01824\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}\ *src\_base)\textcolor{keyword}{\ const}}
\DoxyCodeLine{01825\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{01826\ \ \ \ \ (src\_base+entryAnchor).collect\_variation\_indices\ (c);}
\DoxyCodeLine{01827\ \ \ \ \ (src\_base+exitAnchor).collect\_variation\_indices\ (c);}
\DoxyCodeLine{01828\ \ \ \}}
\DoxyCodeLine{01829\ }
\DoxyCodeLine{01830\ \ \ \mbox{\hyperlink{struct_o_t_1_1_entry_exit_record}{EntryExitRecord}}*\ subset\ (\mbox{\hyperlink{structhb__subset__context__t}{hb\_subset\_context\_t}}\ *c,}
\DoxyCodeLine{01831\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}\ *src\_base)\textcolor{keyword}{\ const}}
\DoxyCodeLine{01832\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{01833\ \ \ \ \ TRACE\_SERIALIZE\ (\textcolor{keyword}{this});}
\DoxyCodeLine{01834\ \ \ \ \ \textcolor{keyword}{auto}\ *out\ =\ c-\/>serializer-\/>embed\ (\textcolor{keyword}{this});}
\DoxyCodeLine{01835\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!out))\ return\_trace\ (\textcolor{keyword}{nullptr});}
\DoxyCodeLine{01836\ }
\DoxyCodeLine{01837\ \ \ \ \ out-\/>entryAnchor.serialize\_subset\ (c,\ entryAnchor,\ src\_base);}
\DoxyCodeLine{01838\ \ \ \ \ out-\/>exitAnchor.serialize\_subset\ (c,\ exitAnchor,\ src\_base);}
\DoxyCodeLine{01839\ \ \ \ \ return\_trace\ (out);}
\DoxyCodeLine{01840\ \ \ \}}
\DoxyCodeLine{01841\ }
\DoxyCodeLine{01842\ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{01843\ \ \ \mbox{\hyperlink{struct_o_t_1_1_offset_to}{Offset16To<Anchor>}}}
\DoxyCodeLine{01844\ \ \ \ \ \ \ \ \ entryAnchor;\ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Offset\ to\ EntryAnchor\ table-\/-\/from}}
\DoxyCodeLine{01845\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ beginning\ of\ CursivePos}}
\DoxyCodeLine{01846\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ subtable-\/-\/may\ be\ NULL\ */}}
\DoxyCodeLine{01847\ \ \ \mbox{\hyperlink{struct_o_t_1_1_offset_to}{Offset16To<Anchor>}}}
\DoxyCodeLine{01848\ \ \ \ \ \ \ \ \ exitAnchor;\ \ \ \ \ \textcolor{comment}{/*\ Offset\ to\ ExitAnchor\ table-\/-\/from}}
\DoxyCodeLine{01849\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ beginning\ of\ CursivePos}}
\DoxyCodeLine{01850\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ subtable-\/-\/may\ be\ NULL\ */}}
\DoxyCodeLine{01851\ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{01852\ \ \ DEFINE\_SIZE\_STATIC\ (4);}
\DoxyCodeLine{01853\ \};}
\DoxyCodeLine{01854\ }
\DoxyCodeLine{01855\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}}
\DoxyCodeLine{01856\ reverse\_cursive\_minor\_offset\ (\mbox{\hyperlink{structhb__glyph__position__t}{hb\_glyph\_position\_t}}\ *pos,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ i,\ hb\_direction\_t\ direction,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ new\_parent);}
\DoxyCodeLine{01857\ }
\DoxyCodeLine{01858\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_o_t_1_1_cursive_pos_format1}{CursivePosFormat1}}}
\DoxyCodeLine{01859\ \{}
\DoxyCodeLine{01860\ \ \ \textcolor{keywordtype}{bool}\ intersects\ (\textcolor{keyword}{const}\ \mbox{\hyperlink{structhb__set__t}{hb\_set\_t}}\ *glyphs)\textcolor{keyword}{\ const}}
\DoxyCodeLine{01861\ \textcolor{keyword}{\ \ }\{\ \textcolor{keywordflow}{return}\ (\textcolor{keyword}{this}+coverage).intersects\ (glyphs);\ \}}
\DoxyCodeLine{01862\ }
\DoxyCodeLine{01863\ \ \ \textcolor{keywordtype}{void}\ closure\_lookups\ (\mbox{\hyperlink{struct_o_t_1_1hb__closure__lookups__context__t}{hb\_closure\_lookups\_context\_t}}\ *c)\textcolor{keyword}{\ const\ }\{\}}
\DoxyCodeLine{01864\ }
\DoxyCodeLine{01865\ \ \ \textcolor{keywordtype}{void}\ collect\_variation\_indices\ (\mbox{\hyperlink{struct_o_t_1_1hb__collect__variation__indices__context__t}{hb\_collect\_variation\_indices\_context\_t}}\ *c)\textcolor{keyword}{\ const}}
\DoxyCodeLine{01866\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{01867\ \ \ \ \ +\ hb\_zip\ (\textcolor{keyword}{this}+coverage,\ entryExitRecord)}
\DoxyCodeLine{01868\ \ \ \ \ |\ hb\_filter\ (c-\/>glyph\_set,\ hb\_first)}
\DoxyCodeLine{01869\ \ \ \ \ |\ hb\_map\ (hb\_second)}
\DoxyCodeLine{01870\ \ \ \ \ |\ hb\_apply\ ([\&]\ (\textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1_entry_exit_record}{EntryExitRecord}}\&\ record)\ \{\ record.collect\_variation\_indices\ (c,\ \textcolor{keyword}{this});\ \})}
\DoxyCodeLine{01871\ \ \ \ \ ;}
\DoxyCodeLine{01872\ \ \ \}}
\DoxyCodeLine{01873\ }
\DoxyCodeLine{01874\ \ \ \textcolor{keywordtype}{void}\ collect\_glyphs\ (\mbox{\hyperlink{struct_o_t_1_1hb__collect__glyphs__context__t}{hb\_collect\_glyphs\_context\_t}}\ *c)\textcolor{keyword}{\ const}}
\DoxyCodeLine{01875\ \textcolor{keyword}{\ \ }\{\ \textcolor{keywordflow}{if}\ (unlikely\ (!(\textcolor{keyword}{this}+coverage).collect\_coverage\ (c-\/>input)))\ \textcolor{keywordflow}{return};\ \}}
\DoxyCodeLine{01876\ }
\DoxyCodeLine{01877\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1_coverage}{Coverage}}\ \&get\_coverage\ ()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{this}+coverage;\ \}}
\DoxyCodeLine{01878\ }
\DoxyCodeLine{01879\ \ \ \textcolor{keywordtype}{bool}\ apply\ (\mbox{\hyperlink{struct_o_t_1_1hb__ot__apply__context__t}{hb\_ot\_apply\_context\_t}}\ *c)\textcolor{keyword}{\ const}}
\DoxyCodeLine{01880\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{01881\ \ \ \ \ TRACE\_APPLY\ (\textcolor{keyword}{this});}
\DoxyCodeLine{01882\ \ \ \ \ \mbox{\hyperlink{structhb__buffer__t}{hb\_buffer\_t}}\ *\mbox{\hyperlink{classbuffer}{buffer}}\ =\ c-\/>buffer;}
\DoxyCodeLine{01883\ }
\DoxyCodeLine{01884\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1_entry_exit_record}{EntryExitRecord}}\ \&this\_record\ =\ entryExitRecord[(\textcolor{keyword}{this}+coverage).get\_coverage\ \ (\mbox{\hyperlink{classbuffer}{buffer}}-\/>cur().codepoint)];}
\DoxyCodeLine{01885\ \ \ \ \ \textcolor{keywordflow}{if}\ (!this\_record.entryAnchor)\ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{01886\ }
\DoxyCodeLine{01887\ \ \ \ \ \mbox{\hyperlink{struct_o_t_1_1hb__ot__apply__context__t_1_1skipping__iterator__t}{hb\_ot\_apply\_context\_t::skipping\_iterator\_t}}\ \&skippy\_iter\ =\ c-\/>iter\_input;}
\DoxyCodeLine{01888\ \ \ \ \ skippy\_iter.reset\ (\mbox{\hyperlink{classbuffer}{buffer}}-\/>idx,\ 1);}
\DoxyCodeLine{01889\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ unsafe\_from;}
\DoxyCodeLine{01890\ \ \ \ \ \textcolor{keywordflow}{if}\ (!skippy\_iter.prev\ (\&unsafe\_from))}
\DoxyCodeLine{01891\ \ \ \ \ \{}
\DoxyCodeLine{01892\ \ \ \ \ \ \ \mbox{\hyperlink{classbuffer}{buffer}}-\/>unsafe\_to\_concat\_from\_outbuffer\ (unsafe\_from,\ \mbox{\hyperlink{classbuffer}{buffer}}-\/>idx\ +\ 1);}
\DoxyCodeLine{01893\ \ \ \ \ \ \ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{01894\ \ \ \ \ \}}
\DoxyCodeLine{01895\ }
\DoxyCodeLine{01896\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1_entry_exit_record}{EntryExitRecord}}\ \&prev\_record\ =\ entryExitRecord[(\textcolor{keyword}{this}+coverage).get\_coverage\ \ (\mbox{\hyperlink{classbuffer}{buffer}}-\/>info[skippy\_iter.idx].codepoint)];}
\DoxyCodeLine{01897\ \ \ \ \ \textcolor{keywordflow}{if}\ (!prev\_record.exitAnchor)}
\DoxyCodeLine{01898\ \ \ \ \ \{}
\DoxyCodeLine{01899\ \ \ \ \ \ \ \mbox{\hyperlink{classbuffer}{buffer}}-\/>unsafe\_to\_concat\_from\_outbuffer\ (skippy\_iter.idx,\ \mbox{\hyperlink{classbuffer}{buffer}}-\/>idx\ +\ 1);}
\DoxyCodeLine{01900\ \ \ \ \ \ \ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{01901\ \ \ \ \ \}}
\DoxyCodeLine{01902\ }
\DoxyCodeLine{01903\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ i\ =\ skippy\_iter.idx;}
\DoxyCodeLine{01904\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ j\ =\ \mbox{\hyperlink{classbuffer}{buffer}}-\/>idx;}
\DoxyCodeLine{01905\ }
\DoxyCodeLine{01906\ \ \ \ \ \mbox{\hyperlink{classbuffer}{buffer}}-\/>unsafe\_to\_break\ (i,\ j);}
\DoxyCodeLine{01907\ \ \ \ \ \textcolor{keywordtype}{float}\ entry\_x,\ entry\_y,\ exit\_x,\ exit\_y;}
\DoxyCodeLine{01908\ \ \ \ \ (\textcolor{keyword}{this}+prev\_record.exitAnchor).get\_anchor\ (c,\ \mbox{\hyperlink{classbuffer}{buffer}}-\/>info[i].codepoint,\ \&exit\_x,\ \&exit\_y);}
\DoxyCodeLine{01909\ \ \ \ \ (\textcolor{keyword}{this}+this\_record.entryAnchor).get\_anchor\ (c,\ \mbox{\hyperlink{classbuffer}{buffer}}-\/>info[j].codepoint,\ \&entry\_x,\ \&entry\_y);}
\DoxyCodeLine{01910\ }
\DoxyCodeLine{01911\ \ \ \ \ \mbox{\hyperlink{structhb__glyph__position__t}{hb\_glyph\_position\_t}}\ *pos\ =\ \mbox{\hyperlink{classbuffer}{buffer}}-\/>pos;}
\DoxyCodeLine{01912\ }
\DoxyCodeLine{01913\ \ \ \ \ hb\_position\_t\ d;}
\DoxyCodeLine{01914\ \ \ \ \ \textcolor{comment}{/*\ Main-\/direction\ adjustment\ */}}
\DoxyCodeLine{01915\ \ \ \ \ \textcolor{keywordflow}{switch}\ (c-\/>direction)\ \{}
\DoxyCodeLine{01916\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ HB\_DIRECTION\_LTR:}
\DoxyCodeLine{01917\ \ \ \ \ pos[i].x\_advance\ \ =\ roundf\ (exit\_x)\ +\ pos[i].x\_offset;}
\DoxyCodeLine{01918\ }
\DoxyCodeLine{01919\ \ \ \ \ d\ =\ roundf\ (entry\_x)\ +\ pos[j].x\_offset;}
\DoxyCodeLine{01920\ \ \ \ \ pos[j].x\_advance\ -\/=\ d;}
\DoxyCodeLine{01921\ \ \ \ \ pos[j].x\_offset\ \ -\/=\ d;}
\DoxyCodeLine{01922\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01923\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ HB\_DIRECTION\_RTL:}
\DoxyCodeLine{01924\ \ \ \ \ d\ =\ roundf\ (exit\_x)\ +\ pos[i].x\_offset;}
\DoxyCodeLine{01925\ \ \ \ \ pos[i].x\_advance\ -\/=\ d;}
\DoxyCodeLine{01926\ \ \ \ \ pos[i].x\_offset\ \ -\/=\ d;}
\DoxyCodeLine{01927\ }
\DoxyCodeLine{01928\ \ \ \ \ pos[j].x\_advance\ \ =\ roundf\ (entry\_x)\ +\ pos[j].x\_offset;}
\DoxyCodeLine{01929\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01930\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ HB\_DIRECTION\_TTB:}
\DoxyCodeLine{01931\ \ \ \ \ pos[i].y\_advance\ \ =\ roundf\ (exit\_y)\ +\ pos[i].y\_offset;}
\DoxyCodeLine{01932\ }
\DoxyCodeLine{01933\ \ \ \ \ d\ =\ roundf\ (entry\_y)\ +\ pos[j].y\_offset;}
\DoxyCodeLine{01934\ \ \ \ \ pos[j].y\_advance\ -\/=\ d;}
\DoxyCodeLine{01935\ \ \ \ \ pos[j].y\_offset\ \ -\/=\ d;}
\DoxyCodeLine{01936\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01937\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ HB\_DIRECTION\_BTT:}
\DoxyCodeLine{01938\ \ \ \ \ d\ =\ roundf\ (exit\_y)\ +\ pos[i].y\_offset;}
\DoxyCodeLine{01939\ \ \ \ \ pos[i].y\_advance\ -\/=\ d;}
\DoxyCodeLine{01940\ \ \ \ \ pos[i].y\_offset\ \ -\/=\ d;}
\DoxyCodeLine{01941\ }
\DoxyCodeLine{01942\ \ \ \ \ pos[j].y\_advance\ \ =\ roundf\ (entry\_y);}
\DoxyCodeLine{01943\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01944\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ HB\_DIRECTION\_INVALID:}
\DoxyCodeLine{01945\ \ \ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{01946\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01947\ \ \ \ \ \}}
\DoxyCodeLine{01948\ }
\DoxyCodeLine{01949\ \ \ \ \ \textcolor{comment}{/*\ Cross-\/direction\ adjustment\ */}}
\DoxyCodeLine{01950\ }
\DoxyCodeLine{01951\ \ \ \ \ \textcolor{comment}{/*\ We\ attach\ child\ to\ parent\ (think\ graph\ theory\ and\ rooted\ trees\ whereas}}
\DoxyCodeLine{01952\ \textcolor{comment}{\ \ \ \ \ *\ the\ root\ stays\ on\ baseline\ and\ each\ node\ aligns\ itself\ against\ its}}
\DoxyCodeLine{01953\ \textcolor{comment}{\ \ \ \ \ *\ parent.}}
\DoxyCodeLine{01954\ \textcolor{comment}{\ \ \ \ \ *}}
\DoxyCodeLine{01955\ \textcolor{comment}{\ \ \ \ \ *\ Optimize\ things\ for\ the\ case\ of\ RightToLeft,\ as\ that's\ most\ common\ in}}
\DoxyCodeLine{01956\ \textcolor{comment}{\ \ \ \ \ *\ Arabic.\ */}}
\DoxyCodeLine{01957\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ child\ \ =\ i;}
\DoxyCodeLine{01958\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ parent\ =\ j;}
\DoxyCodeLine{01959\ \ \ \ \ hb\_position\_t\ x\_offset\ =\ entry\_x\ -\/\ exit\_x;}
\DoxyCodeLine{01960\ \ \ \ \ hb\_position\_t\ y\_offset\ =\ entry\_y\ -\/\ exit\_y;}
\DoxyCodeLine{01961\ \ \ \ \ \textcolor{keywordflow}{if}\ \ (!(c-\/>lookup\_props\ \&\ LookupFlag::RightToLeft))}
\DoxyCodeLine{01962\ \ \ \ \ \{}
\DoxyCodeLine{01963\ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ k\ =\ child;}
\DoxyCodeLine{01964\ \ \ \ \ \ \ child\ =\ parent;}
\DoxyCodeLine{01965\ \ \ \ \ \ \ parent\ =\ k;}
\DoxyCodeLine{01966\ \ \ \ \ \ \ x\_offset\ =\ -\/x\_offset;}
\DoxyCodeLine{01967\ \ \ \ \ \ \ y\_offset\ =\ -\/y\_offset;}
\DoxyCodeLine{01968\ \ \ \ \ \}}
\DoxyCodeLine{01969\ }
\DoxyCodeLine{01970\ \ \ \ \ \textcolor{comment}{/*\ If\ child\ was\ already\ connected\ to\ someone\ else,\ walk\ through\ its\ old}}
\DoxyCodeLine{01971\ \textcolor{comment}{\ \ \ \ \ *\ chain\ and\ reverse\ the\ link\ direction,\ such\ that\ the\ whole\ tree\ of\ its}}
\DoxyCodeLine{01972\ \textcolor{comment}{\ \ \ \ \ *\ previous\ connection\ now\ attaches\ to\ new\ parent.\ \ Watch\ out\ for\ case}}
\DoxyCodeLine{01973\ \textcolor{comment}{\ \ \ \ \ *\ where\ new\ parent\ is\ on\ the\ path\ from\ old\ chain...}}
\DoxyCodeLine{01974\ \textcolor{comment}{\ \ \ \ \ */}}
\DoxyCodeLine{01975\ \ \ \ \ reverse\_cursive\_minor\_offset\ (pos,\ child,\ c-\/>direction,\ parent);}
\DoxyCodeLine{01976\ }
\DoxyCodeLine{01977\ \ \ \ \ pos[child].attach\_type()\ =\ ATTACH\_TYPE\_CURSIVE;}
\DoxyCodeLine{01978\ \ \ \ \ pos[child].attach\_chain()\ =\ (int)\ parent\ -\/\ (\textcolor{keywordtype}{int})\ child;}
\DoxyCodeLine{01979\ \ \ \ \ \mbox{\hyperlink{classbuffer}{buffer}}-\/>scratch\_flags\ |=\ HB\_BUFFER\_SCRATCH\_FLAG\_HAS\_GPOS\_ATTACHMENT;}
\DoxyCodeLine{01980\ \ \ \ \ \textcolor{keywordflow}{if}\ (likely\ (HB\_DIRECTION\_IS\_HORIZONTAL\ (c-\/>direction)))}
\DoxyCodeLine{01981\ \ \ \ \ \ \ pos[child].y\_offset\ =\ y\_offset;}
\DoxyCodeLine{01982\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{01983\ \ \ \ \ \ \ pos[child].x\_offset\ =\ x\_offset;}
\DoxyCodeLine{01984\ }
\DoxyCodeLine{01985\ \ \ \ \ \textcolor{comment}{/*\ If\ parent\ was\ attached\ to\ child,\ separate\ them.}}
\DoxyCodeLine{01986\ \textcolor{comment}{\ \ \ \ \ *\ https://github.com/harfbuzz/harfbuzz/issues/2469}}
\DoxyCodeLine{01987\ \textcolor{comment}{\ \ \ \ \ */}}
\DoxyCodeLine{01988\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (pos[parent].attach\_chain()\ ==\ -\/pos[child].attach\_chain()))}
\DoxyCodeLine{01989\ \ \ \ \ \ \ pos[parent].attach\_chain()\ =\ 0;}
\DoxyCodeLine{01990\ }
\DoxyCodeLine{01991\ \ \ \ \ \mbox{\hyperlink{classbuffer}{buffer}}-\/>idx++;}
\DoxyCodeLine{01992\ \ \ \ \ return\_trace\ (\textcolor{keyword}{true});}
\DoxyCodeLine{01993\ \ \ \}}
\DoxyCodeLine{01994\ }
\DoxyCodeLine{01995\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Iterator,}
\DoxyCodeLine{01996\ \ \ \ \ \ \ \ \ hb\_requires\ (hb\_is\_iterator\ (Iterator))>}
\DoxyCodeLine{01997\ \ \ \textcolor{keywordtype}{void}\ serialize\ (\mbox{\hyperlink{structhb__subset__context__t}{hb\_subset\_context\_t}}\ *c,}
\DoxyCodeLine{01998\ \ \ \ \ \ \ \ \ \ \ Iterator\ it,}
\DoxyCodeLine{01999\ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}\ *src\_base)}
\DoxyCodeLine{02000\ \ \ \{}
\DoxyCodeLine{02001\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!c-\/>serializer-\/>extend\_min\ ((*\textcolor{keyword}{this}))))\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{02002\ \ \ \ \ this-\/>format\ =\ 1;}
\DoxyCodeLine{02003\ \ \ \ \ this-\/>entryExitRecord.len\ =\ it.len\ ();}
\DoxyCodeLine{02004\ }
\DoxyCodeLine{02005\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1_entry_exit_record}{EntryExitRecord}}\&\ entry\_record\ :\ +\ it}
\DoxyCodeLine{02006\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ |\ hb\_map\ (hb\_second))}
\DoxyCodeLine{02007\ \ \ \ \ \ \ entry\_record.subset\ (c,\ src\_base);}
\DoxyCodeLine{02008\ }
\DoxyCodeLine{02009\ \ \ \ \ \textcolor{keyword}{auto}\ glyphs\ =}
\DoxyCodeLine{02010\ \ \ \ \ +\ it}
\DoxyCodeLine{02011\ \ \ \ \ |\ hb\_map\_retains\_sorting\ (hb\_first)}
\DoxyCodeLine{02012\ \ \ \ \ ;}
\DoxyCodeLine{02013\ }
\DoxyCodeLine{02014\ \ \ \ \ coverage.serialize\_serialize\ (c-\/>serializer,\ glyphs);}
\DoxyCodeLine{02015\ \ \ \}}
\DoxyCodeLine{02016\ }
\DoxyCodeLine{02017\ \ \ \textcolor{keywordtype}{bool}\ subset\ (\mbox{\hyperlink{structhb__subset__context__t}{hb\_subset\_context\_t}}\ *c)\textcolor{keyword}{\ const}}
\DoxyCodeLine{02018\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{02019\ \ \ \ \ TRACE\_SUBSET\ (\textcolor{keyword}{this});}
\DoxyCodeLine{02020\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structhb__set__t}{hb\_set\_t}}\ \&glyphset\ =\ *c-\/>plan-\/>glyphset\_gsub\ ();}
\DoxyCodeLine{02021\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structhb__map__t}{hb\_map\_t}}\ \&glyph\_map\ =\ *c-\/>plan-\/>glyph\_map;}
\DoxyCodeLine{02022\ }
\DoxyCodeLine{02023\ \ \ \ \ \textcolor{keyword}{auto}\ *out\ =\ c-\/>serializer-\/>start\_embed\ (*\textcolor{keyword}{this});}
\DoxyCodeLine{02024\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!out))\ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{02025\ }
\DoxyCodeLine{02026\ \ \ \ \ \textcolor{keyword}{auto}\ it\ =}
\DoxyCodeLine{02027\ \ \ \ \ +\ hb\_zip\ (\textcolor{keyword}{this}+coverage,\ entryExitRecord)}
\DoxyCodeLine{02028\ \ \ \ \ |\ hb\_filter\ (glyphset,\ hb\_first)}
\DoxyCodeLine{02029\ \ \ \ \ |\ hb\_map\_retains\_sorting\ ([\&]\ (\mbox{\hyperlink{structhb__pair__t}{hb\_pair\_t<hb\_codepoint\_t,\ const\ EntryExitRecord\&>}}\ p)\ -\/>\ \mbox{\hyperlink{structhb__pair__t}{hb\_pair\_t<hb\_codepoint\_t,\ const\ EntryExitRecord\&>}}}
\DoxyCodeLine{02030\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{\ \textcolor{keywordflow}{return}\ hb\_pair\ (glyph\_map[p.first],\ p.second);\})}
\DoxyCodeLine{02031\ \ \ \ \ ;}
\DoxyCodeLine{02032\ }
\DoxyCodeLine{02033\ \ \ \ \ \textcolor{keywordtype}{bool}\ ret\ =\ bool\ (it);}
\DoxyCodeLine{02034\ \ \ \ \ out-\/>serialize\ (c,\ it,\ \textcolor{keyword}{this});}
\DoxyCodeLine{02035\ \ \ \ \ return\_trace\ (ret);}
\DoxyCodeLine{02036\ \ \ \}}
\DoxyCodeLine{02037\ }
\DoxyCodeLine{02038\ \ \ \textcolor{keywordtype}{bool}\ sanitize\ (\mbox{\hyperlink{structhb__sanitize__context__t}{hb\_sanitize\_context\_t}}\ *c)\textcolor{keyword}{\ const}}
\DoxyCodeLine{02039\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{02040\ \ \ \ \ TRACE\_SANITIZE\ (\textcolor{keyword}{this});}
\DoxyCodeLine{02041\ \ \ \ \ return\_trace\ (coverage.sanitize\ (c,\ \textcolor{keyword}{this})\ \&\&\ entryExitRecord.sanitize\ (c,\ \textcolor{keyword}{this}));}
\DoxyCodeLine{02042\ \ \ \}}
\DoxyCodeLine{02043\ }
\DoxyCodeLine{02044\ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{02045\ \ \ \mbox{\hyperlink{struct_o_t_1_1_int_type}{HBUINT16}}\ \ format;\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Format\ identifier-\/-\/format\ =\ 1\ */}}
\DoxyCodeLine{02046\ \ \ \mbox{\hyperlink{struct_o_t_1_1_offset_to}{Offset16To<Coverage>}}}
\DoxyCodeLine{02047\ \ \ \ \ \ \ \ \ coverage;\ \ \ \ \ \ \ \textcolor{comment}{/*\ Offset\ to\ Coverage\ table-\/-\/from}}
\DoxyCodeLine{02048\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ beginning\ of\ subtable\ */}}
\DoxyCodeLine{02049\ \ \ \mbox{\hyperlink{struct_o_t_1_1_array_of}{Array16Of<EntryExitRecord>}}}
\DoxyCodeLine{02050\ \ \ \ \ \ \ \ \ entryExitRecord;\ \ \ \ \textcolor{comment}{/*\ Array\ of\ EntryExit\ records-\/-\/in}}
\DoxyCodeLine{02051\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ Coverage\ Index\ order\ */}}
\DoxyCodeLine{02052\ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{02053\ \ \ DEFINE\_SIZE\_ARRAY\ (6,\ entryExitRecord);}
\DoxyCodeLine{02054\ \};}
\DoxyCodeLine{02055\ }
\DoxyCodeLine{02056\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_o_t_1_1_cursive_pos}{CursivePos}}}
\DoxyCodeLine{02057\ \{}
\DoxyCodeLine{02058\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ context\_t,\ \textcolor{keyword}{typename}\ ...Ts>}
\DoxyCodeLine{02059\ \ \ \textcolor{keyword}{typename}\ context\_t::return\_t\ dispatch\ (context\_t\ *c,\ Ts\&\&...\ ds)\textcolor{keyword}{\ const}}
\DoxyCodeLine{02060\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{02061\ \ \ \ \ TRACE\_DISPATCH\ (\textcolor{keyword}{this},\ u.format);}
\DoxyCodeLine{02062\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!c-\/>may\_dispatch\ (\textcolor{keyword}{this},\ \&u.format)))\ return\_trace\ (c-\/>no\_dispatch\_return\_value\ ());}
\DoxyCodeLine{02063\ \ \ \ \ \textcolor{keywordflow}{switch}\ (u.format)\ \{}
\DoxyCodeLine{02064\ \ \ \ \ \textcolor{keywordflow}{case}\ 1:\ return\_trace\ (c-\/>dispatch\ (u.format1,\ std::forward<Ts>\ (ds)...));}
\DoxyCodeLine{02065\ \ \ \ \ \textcolor{keywordflow}{default}:return\_trace\ (c-\/>default\_return\_value\ ());}
\DoxyCodeLine{02066\ \ \ \ \ \}}
\DoxyCodeLine{02067\ \ \ \}}
\DoxyCodeLine{02068\ }
\DoxyCodeLine{02069\ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{02070\ \ \ \textcolor{keyword}{union\ }\{}
\DoxyCodeLine{02071\ \ \ \mbox{\hyperlink{struct_o_t_1_1_int_type}{HBUINT16}}\ \ \ \ \ \ format;\ \ \ \ \ \textcolor{comment}{/*\ Format\ identifier\ */}}
\DoxyCodeLine{02072\ \ \ \mbox{\hyperlink{struct_o_t_1_1_cursive_pos_format1}{CursivePosFormat1}}\ \ \ \ format1;}
\DoxyCodeLine{02073\ \ \ \}\ u;}
\DoxyCodeLine{02074\ \};}
\DoxyCodeLine{02075\ }
\DoxyCodeLine{02076\ }
\DoxyCodeLine{02077\ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{struct_o_t_1_1_anchor_matrix}{AnchorMatrix}}\ \mbox{\hyperlink{struct_o_t_1_1_anchor_matrix}{BaseArray}};\ \ \ \ \ \ \ \ \textcolor{comment}{/*\ base-\/major-\/-\/}}
\DoxyCodeLine{02078\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ in\ order\ of\ BaseCoverage\ Index-\/-\/,}}
\DoxyCodeLine{02079\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ mark-\/minor-\/-\/}}
\DoxyCodeLine{02080\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ ordered\ by\ class-\/-\/zero-\/based.\ */}}
\DoxyCodeLine{02081\ }
\DoxyCodeLine{02082\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ Markclass\_closure\_and\_remap\_indexes\ (\textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1_coverage}{Coverage}}\ \ \&mark\_coverage,}
\DoxyCodeLine{02083\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1_mark_array}{MarkArray}}\ \&mark\_array,}
\DoxyCodeLine{02084\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structhb__set__t}{hb\_set\_t}}\ \ \&glyphset,}
\DoxyCodeLine{02085\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structhb__map__t}{hb\_map\_t}}*\ \ \ \ \ \ \ \ klass\_mapping\ \textcolor{comment}{/*\ INOUT\ */})}
\DoxyCodeLine{02086\ \{}
\DoxyCodeLine{02087\ \ \ \mbox{\hyperlink{structhb__set__t}{hb\_set\_t}}\ orig\_classes;}
\DoxyCodeLine{02088\ }
\DoxyCodeLine{02089\ \ \ +\ hb\_zip\ (mark\_coverage,\ mark\_array)}
\DoxyCodeLine{02090\ \ \ |\ hb\_filter\ (glyphset,\ hb\_first)}
\DoxyCodeLine{02091\ \ \ |\ hb\_map\ (hb\_second)}
\DoxyCodeLine{02092\ \ \ |\ hb\_map\ (\&MarkRecord::get\_class)}
\DoxyCodeLine{02093\ \ \ |\ hb\_sink\ (orig\_classes)}
\DoxyCodeLine{02094\ \ \ ;}
\DoxyCodeLine{02095\ }
\DoxyCodeLine{02096\ \ \ \textcolor{keywordtype}{unsigned}\ idx\ =\ 0;}
\DoxyCodeLine{02097\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\ klass\ :\ orig\_classes.iter\ ())}
\DoxyCodeLine{02098\ \ \ \{}
\DoxyCodeLine{02099\ \ \ \ \ \textcolor{keywordflow}{if}\ (klass\_mapping-\/>has\ (klass))\ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02100\ \ \ \ \ klass\_mapping-\/>set\ (klass,\ idx);}
\DoxyCodeLine{02101\ \ \ \ \ idx++;}
\DoxyCodeLine{02102\ \ \ \}}
\DoxyCodeLine{02103\ \}}
\DoxyCodeLine{02104\ }
\DoxyCodeLine{02105\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_o_t_1_1_mark_base_pos_format1}{MarkBasePosFormat1}}}
\DoxyCodeLine{02106\ \{}
\DoxyCodeLine{02107\ \ \ \textcolor{keywordtype}{bool}\ intersects\ (\textcolor{keyword}{const}\ \mbox{\hyperlink{structhb__set__t}{hb\_set\_t}}\ *glyphs)\textcolor{keyword}{\ const}}
\DoxyCodeLine{02108\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{02109\ \ \ \ \ \textcolor{keywordflow}{return}\ (\textcolor{keyword}{this}+markCoverage).intersects\ (glyphs)\ \&\&}
\DoxyCodeLine{02110\ \ \ \ \ \ \ \ (\textcolor{keyword}{this}+baseCoverage).intersects\ (glyphs);}
\DoxyCodeLine{02111\ \ \ \}}
\DoxyCodeLine{02112\ }
\DoxyCodeLine{02113\ \ \ \textcolor{keywordtype}{void}\ closure\_lookups\ (\mbox{\hyperlink{struct_o_t_1_1hb__closure__lookups__context__t}{hb\_closure\_lookups\_context\_t}}\ *c)\textcolor{keyword}{\ const\ }\{\}}
\DoxyCodeLine{02114\ }
\DoxyCodeLine{02115\ \ \ \textcolor{keywordtype}{void}\ collect\_variation\_indices\ (\mbox{\hyperlink{struct_o_t_1_1hb__collect__variation__indices__context__t}{hb\_collect\_variation\_indices\_context\_t}}\ *c)\textcolor{keyword}{\ const}}
\DoxyCodeLine{02116\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{02117\ \ \ \ \ +\ hb\_zip\ (\textcolor{keyword}{this}+markCoverage,\ \textcolor{keyword}{this}+markArray)}
\DoxyCodeLine{02118\ \ \ \ \ |\ hb\_filter\ (c-\/>glyph\_set,\ hb\_first)}
\DoxyCodeLine{02119\ \ \ \ \ |\ hb\_map\ (hb\_second)}
\DoxyCodeLine{02120\ \ \ \ \ |\ hb\_apply\ ([\&]\ (\textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1_mark_record}{MarkRecord}}\&\ record)\ \{\ record.collect\_variation\_indices\ (c,\ \&(\textcolor{keyword}{this}+markArray));\ \})}
\DoxyCodeLine{02121\ \ \ \ \ ;}
\DoxyCodeLine{02122\ }
\DoxyCodeLine{02123\ \ \ \ \ \mbox{\hyperlink{structhb__map__t}{hb\_map\_t}}\ klass\_mapping;}
\DoxyCodeLine{02124\ \ \ \ \ Markclass\_closure\_and\_remap\_indexes\ (\textcolor{keyword}{this}+markCoverage,\ \textcolor{keyword}{this}+markArray,\ *c-\/>glyph\_set,\ \&klass\_mapping);}
\DoxyCodeLine{02125\ }
\DoxyCodeLine{02126\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ basecount\ =\ (\textcolor{keyword}{this}+baseArray).rows;}
\DoxyCodeLine{02127\ \ \ \ \ \textcolor{keyword}{auto}\ base\_iter\ =}
\DoxyCodeLine{02128\ \ \ \ \ +\ hb\_zip\ (\textcolor{keyword}{this}+baseCoverage,\ hb\_range\ (basecount))}
\DoxyCodeLine{02129\ \ \ \ \ |\ hb\_filter\ (c-\/>glyph\_set,\ hb\_first)}
\DoxyCodeLine{02130\ \ \ \ \ |\ hb\_map\ (hb\_second)}
\DoxyCodeLine{02131\ \ \ \ \ ;}
\DoxyCodeLine{02132\ }
\DoxyCodeLine{02133\ \ \ \ \ \mbox{\hyperlink{structhb__vector__t}{hb\_sorted\_vector\_t<unsigned>}}\ base\_indexes;}
\DoxyCodeLine{02134\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ row\ :\ base\_iter)}
\DoxyCodeLine{02135\ \ \ \ \ \{}
\DoxyCodeLine{02136\ \ \ \ \ \ \ +\ hb\_range\ ((\textcolor{keywordtype}{unsigned})\ classCount)}
\DoxyCodeLine{02137\ \ \ \ \ \ \ |\ hb\_filter\ (klass\_mapping)}
\DoxyCodeLine{02138\ \ \ \ \ \ \ |\ hb\_map\ ([\&]\ (\textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ col)\ \{\ \textcolor{keywordflow}{return}\ row\ *\ (unsigned)\ classCount\ +\ col;\ \})}
\DoxyCodeLine{02139\ \ \ \ \ \ \ |\ hb\_sink\ (base\_indexes)}
\DoxyCodeLine{02140\ \ \ \ \ \ \ ;}
\DoxyCodeLine{02141\ \ \ \ \ \}}
\DoxyCodeLine{02142\ \ \ \ \ (\textcolor{keyword}{this}+baseArray).collect\_variation\_indices\ (c,\ base\_indexes.iter\ ());}
\DoxyCodeLine{02143\ \ \ \}}
\DoxyCodeLine{02144\ }
\DoxyCodeLine{02145\ \ \ \textcolor{keywordtype}{void}\ collect\_glyphs\ (\mbox{\hyperlink{struct_o_t_1_1hb__collect__glyphs__context__t}{hb\_collect\_glyphs\_context\_t}}\ *c)\textcolor{keyword}{\ const}}
\DoxyCodeLine{02146\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{02147\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!(\textcolor{keyword}{this}+markCoverage).collect\_coverage\ (c-\/>input)))\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{02148\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!(\textcolor{keyword}{this}+baseCoverage).collect\_coverage\ (c-\/>input)))\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{02149\ \ \ \}}
\DoxyCodeLine{02150\ }
\DoxyCodeLine{02151\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1_coverage}{Coverage}}\ \&get\_coverage\ ()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{this}+markCoverage;\ \}}
\DoxyCodeLine{02152\ }
\DoxyCodeLine{02153\ \ \ \textcolor{keywordtype}{bool}\ apply\ (\mbox{\hyperlink{struct_o_t_1_1hb__ot__apply__context__t}{hb\_ot\_apply\_context\_t}}\ *c)\textcolor{keyword}{\ const}}
\DoxyCodeLine{02154\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{02155\ \ \ \ \ TRACE\_APPLY\ (\textcolor{keyword}{this});}
\DoxyCodeLine{02156\ \ \ \ \ \mbox{\hyperlink{structhb__buffer__t}{hb\_buffer\_t}}\ *\mbox{\hyperlink{classbuffer}{buffer}}\ =\ c-\/>buffer;}
\DoxyCodeLine{02157\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ mark\_index\ =\ (\textcolor{keyword}{this}+markCoverage).get\_coverage\ \ (\mbox{\hyperlink{classbuffer}{buffer}}-\/>cur().codepoint);}
\DoxyCodeLine{02158\ \ \ \ \ \textcolor{keywordflow}{if}\ (likely\ (mark\_index\ ==\ NOT\_COVERED))\ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{02159\ }
\DoxyCodeLine{02160\ \ \ \ \ \textcolor{comment}{/*\ Now\ we\ search\ backwards\ for\ a\ non-\/mark\ glyph\ */}}
\DoxyCodeLine{02161\ \ \ \ \ \mbox{\hyperlink{struct_o_t_1_1hb__ot__apply__context__t_1_1skipping__iterator__t}{hb\_ot\_apply\_context\_t::skipping\_iterator\_t}}\ \&skippy\_iter\ =\ c-\/>iter\_input;}
\DoxyCodeLine{02162\ \ \ \ \ skippy\_iter.reset\ (\mbox{\hyperlink{classbuffer}{buffer}}-\/>idx,\ 1);}
\DoxyCodeLine{02163\ \ \ \ \ skippy\_iter.set\_lookup\_props\ (LookupFlag::IgnoreMarks);}
\DoxyCodeLine{02164\ \ \ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{02165\ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ unsafe\_from;}
\DoxyCodeLine{02166\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!skippy\_iter.prev\ (\&unsafe\_from))}
\DoxyCodeLine{02167\ \ \ \ \ \ \ \{}
\DoxyCodeLine{02168\ \ \ \ \ \mbox{\hyperlink{classbuffer}{buffer}}-\/>unsafe\_to\_concat\_from\_outbuffer\ (unsafe\_from,\ \mbox{\hyperlink{classbuffer}{buffer}}-\/>idx\ +\ 1);}
\DoxyCodeLine{02169\ \ \ \ \ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{02170\ \ \ \ \ \ \ \}}
\DoxyCodeLine{02171\ }
\DoxyCodeLine{02172\ \ \ \ \ \ \ \textcolor{comment}{/*\ We\ only\ want\ to\ attach\ to\ the\ first\ of\ a\ MultipleSubst\ sequence.}}
\DoxyCodeLine{02173\ \textcolor{comment}{\ \ \ \ \ \ \ *\ https://github.com/harfbuzz/harfbuzz/issues/740}}
\DoxyCodeLine{02174\ \textcolor{comment}{\ \ \ \ \ \ \ *\ Reject\ others...}}
\DoxyCodeLine{02175\ \textcolor{comment}{\ \ \ \ \ \ \ *\ ...but\ stop\ if\ we\ find\ a\ mark\ in\ the\ MultipleSubst\ sequence:}}
\DoxyCodeLine{02176\ \textcolor{comment}{\ \ \ \ \ \ \ *\ https://github.com/harfbuzz/harfbuzz/issues/1020\ */}}
\DoxyCodeLine{02177\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\_hb\_glyph\_info\_multiplied\ (\&\mbox{\hyperlink{classbuffer}{buffer}}-\/>info[skippy\_iter.idx])\ ||}
\DoxyCodeLine{02178\ \ \ \ \ \ \ 0\ ==\ \_hb\_glyph\_info\_get\_lig\_comp\ (\&\mbox{\hyperlink{classbuffer}{buffer}}-\/>info[skippy\_iter.idx])\ ||}
\DoxyCodeLine{02179\ \ \ \ \ \ \ (skippy\_iter.idx\ ==\ 0\ ||}
\DoxyCodeLine{02180\ \ \ \ \ \ \ \ \_hb\_glyph\_info\_is\_mark\ (\&\mbox{\hyperlink{classbuffer}{buffer}}-\/>info[skippy\_iter.idx\ -\/\ 1])\ ||}
\DoxyCodeLine{02181\ \ \ \ \ \ \ \ \_hb\_glyph\_info\_get\_lig\_id\ (\&\mbox{\hyperlink{classbuffer}{buffer}}-\/>info[skippy\_iter.idx])\ !=}
\DoxyCodeLine{02182\ \ \ \ \ \ \ \ \_hb\_glyph\_info\_get\_lig\_id\ (\&\mbox{\hyperlink{classbuffer}{buffer}}-\/>info[skippy\_iter.idx\ -\/\ 1])\ ||}
\DoxyCodeLine{02183\ \ \ \ \ \ \ \ \_hb\_glyph\_info\_get\_lig\_comp\ (\&\mbox{\hyperlink{classbuffer}{buffer}}-\/>info[skippy\_iter.idx])\ !=}
\DoxyCodeLine{02184\ \ \ \ \ \ \ \ \_hb\_glyph\_info\_get\_lig\_comp\ (\&\mbox{\hyperlink{classbuffer}{buffer}}-\/>info[skippy\_iter.idx\ -\/\ 1])\ +\ 1}
\DoxyCodeLine{02185\ \ \ \ \ \ \ \ ))}
\DoxyCodeLine{02186\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{02187\ \ \ \ \ \ \ skippy\_iter.reject\ ();}
\DoxyCodeLine{02188\ \ \ \ \ \}\ \textcolor{keywordflow}{while}\ (\textcolor{keyword}{true});}
\DoxyCodeLine{02189\ }
\DoxyCodeLine{02190\ \ \ \ \ \textcolor{comment}{/*\ Checking\ that\ matched\ glyph\ is\ actually\ a\ base\ glyph\ by\ GDEF\ is\ too\ strong;\ disabled\ */}}
\DoxyCodeLine{02191\ \ \ \ \ \textcolor{comment}{//if\ (!\_hb\_glyph\_info\_is\_base\_glyph\ (\&buffer-\/>info[skippy\_iter.idx]))\ \{\ return\_trace\ (false);\ \}}}
\DoxyCodeLine{02192\ }
\DoxyCodeLine{02193\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ base\_index\ =\ (\textcolor{keyword}{this}+baseCoverage).get\_coverage\ \ (\mbox{\hyperlink{classbuffer}{buffer}}-\/>info[skippy\_iter.idx].codepoint);}
\DoxyCodeLine{02194\ \ \ \ \ \textcolor{keywordflow}{if}\ (base\_index\ ==\ NOT\_COVERED)}
\DoxyCodeLine{02195\ \ \ \ \ \{}
\DoxyCodeLine{02196\ \ \ \ \ \ \ \mbox{\hyperlink{classbuffer}{buffer}}-\/>unsafe\_to\_concat\_from\_outbuffer\ (skippy\_iter.idx,\ \mbox{\hyperlink{classbuffer}{buffer}}-\/>idx\ +\ 1);}
\DoxyCodeLine{02197\ \ \ \ \ \ \ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{02198\ \ \ \ \ \}}
\DoxyCodeLine{02199\ }
\DoxyCodeLine{02200\ \ \ \ \ return\_trace\ ((\textcolor{keyword}{this}+markArray).apply\ (c,\ mark\_index,\ base\_index,\ \textcolor{keyword}{this}+baseArray,\ classCount,\ skippy\_iter.idx));}
\DoxyCodeLine{02201\ \ \ \}}
\DoxyCodeLine{02202\ }
\DoxyCodeLine{02203\ \ \ \textcolor{keywordtype}{bool}\ subset\ (\mbox{\hyperlink{structhb__subset__context__t}{hb\_subset\_context\_t}}\ *c)\textcolor{keyword}{\ const}}
\DoxyCodeLine{02204\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{02205\ \ \ \ \ TRACE\_SUBSET\ (\textcolor{keyword}{this});}
\DoxyCodeLine{02206\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structhb__set__t}{hb\_set\_t}}\ \&glyphset\ =\ *c-\/>plan-\/>glyphset\_gsub\ ();}
\DoxyCodeLine{02207\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structhb__map__t}{hb\_map\_t}}\ \&glyph\_map\ =\ *c-\/>plan-\/>glyph\_map;}
\DoxyCodeLine{02208\ }
\DoxyCodeLine{02209\ \ \ \ \ \textcolor{keyword}{auto}\ *out\ =\ c-\/>serializer-\/>start\_embed\ (*\textcolor{keyword}{this});}
\DoxyCodeLine{02210\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!c-\/>serializer-\/>extend\_min\ (out)))\ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{02211\ \ \ \ \ out-\/>format\ =\ format;}
\DoxyCodeLine{02212\ }
\DoxyCodeLine{02213\ \ \ \ \ \mbox{\hyperlink{structhb__map__t}{hb\_map\_t}}\ klass\_mapping;}
\DoxyCodeLine{02214\ \ \ \ \ Markclass\_closure\_and\_remap\_indexes\ (\textcolor{keyword}{this}+markCoverage,\ \textcolor{keyword}{this}+markArray,\ glyphset,\ \&klass\_mapping);}
\DoxyCodeLine{02215\ }
\DoxyCodeLine{02216\ \ \ \ \ \textcolor{keywordflow}{if}\ (!klass\_mapping.get\_population\ ())\ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{02217\ \ \ \ \ out-\/>classCount\ =\ klass\_mapping.get\_population\ ();}
\DoxyCodeLine{02218\ }
\DoxyCodeLine{02219\ \ \ \ \ \textcolor{keyword}{auto}\ mark\_iter\ =}
\DoxyCodeLine{02220\ \ \ \ \ +\ hb\_zip\ (\textcolor{keyword}{this}+markCoverage,\ \textcolor{keyword}{this}+markArray)}
\DoxyCodeLine{02221\ \ \ \ \ |\ hb\_filter\ (glyphset,\ hb\_first)}
\DoxyCodeLine{02222\ \ \ \ \ ;}
\DoxyCodeLine{02223\ }
\DoxyCodeLine{02224\ \ \ \ \ \mbox{\hyperlink{structhb__vector__t}{hb\_sorted\_vector\_t<hb\_codepoint\_t>}}\ new\_coverage;}
\DoxyCodeLine{02225\ \ \ \ \ +\ mark\_iter}
\DoxyCodeLine{02226\ \ \ \ \ |\ hb\_map\ (hb\_first)}
\DoxyCodeLine{02227\ \ \ \ \ |\ hb\_map\ (glyph\_map)}
\DoxyCodeLine{02228\ \ \ \ \ |\ hb\_sink\ (new\_coverage)}
\DoxyCodeLine{02229\ \ \ \ \ ;}
\DoxyCodeLine{02230\ }
\DoxyCodeLine{02231\ \ \ \ \ \textcolor{keywordflow}{if}\ (!out-\/>markCoverage.serialize\_serialize\ (c-\/>serializer,\ new\_coverage.iter\ ()))}
\DoxyCodeLine{02232\ \ \ \ \ \ \ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{02233\ }
\DoxyCodeLine{02234\ \ \ \ \ out-\/>markArray.serialize\_subset\ (c,\ markArray,\ \textcolor{keyword}{this},}
\DoxyCodeLine{02235\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{keyword}{this}+markCoverage).iter\ (),}
\DoxyCodeLine{02236\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&klass\_mapping);}
\DoxyCodeLine{02237\ }
\DoxyCodeLine{02238\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ basecount\ =\ (\textcolor{keyword}{this}+baseArray).rows;}
\DoxyCodeLine{02239\ \ \ \ \ \textcolor{keyword}{auto}\ base\_iter\ =}
\DoxyCodeLine{02240\ \ \ \ \ +\ hb\_zip\ (\textcolor{keyword}{this}+baseCoverage,\ hb\_range\ (basecount))}
\DoxyCodeLine{02241\ \ \ \ \ |\ hb\_filter\ (glyphset,\ hb\_first)}
\DoxyCodeLine{02242\ \ \ \ \ ;}
\DoxyCodeLine{02243\ }
\DoxyCodeLine{02244\ \ \ \ \ new\_coverage.reset\ ();}
\DoxyCodeLine{02245\ \ \ \ \ +\ base\_iter}
\DoxyCodeLine{02246\ \ \ \ \ |\ hb\_map\ (hb\_first)}
\DoxyCodeLine{02247\ \ \ \ \ |\ hb\_map\ (glyph\_map)}
\DoxyCodeLine{02248\ \ \ \ \ |\ hb\_sink\ (new\_coverage)}
\DoxyCodeLine{02249\ \ \ \ \ ;}
\DoxyCodeLine{02250\ }
\DoxyCodeLine{02251\ \ \ \ \ \textcolor{keywordflow}{if}\ (!out-\/>baseCoverage.serialize\_serialize\ (c-\/>serializer,\ new\_coverage.iter\ ()))}
\DoxyCodeLine{02252\ \ \ \ \ \ \ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{02253\ }
\DoxyCodeLine{02254\ \ \ \ \ \mbox{\hyperlink{structhb__vector__t}{hb\_sorted\_vector\_t<unsigned>}}\ base\_indexes;}
\DoxyCodeLine{02255\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ row\ :\ +\ base\_iter}
\DoxyCodeLine{02256\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ |\ hb\_map\ (hb\_second))}
\DoxyCodeLine{02257\ \ \ \ \ \{}
\DoxyCodeLine{02258\ \ \ \ \ \ \ +\ hb\_range\ ((\textcolor{keywordtype}{unsigned})\ classCount)}
\DoxyCodeLine{02259\ \ \ \ \ \ \ |\ hb\_filter\ (klass\_mapping)}
\DoxyCodeLine{02260\ \ \ \ \ \ \ |\ hb\_map\ ([\&]\ (\textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ col)\ \{\ \textcolor{keywordflow}{return}\ row\ *\ (unsigned)\ classCount\ +\ col;\ \})}
\DoxyCodeLine{02261\ \ \ \ \ \ \ |\ hb\_sink\ (base\_indexes)}
\DoxyCodeLine{02262\ \ \ \ \ \ \ ;}
\DoxyCodeLine{02263\ \ \ \ \ \}}
\DoxyCodeLine{02264\ }
\DoxyCodeLine{02265\ \ \ \ \ out-\/>baseArray.serialize\_subset\ (c,\ baseArray,\ \textcolor{keyword}{this},}
\DoxyCodeLine{02266\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ base\_iter.len\ (),}
\DoxyCodeLine{02267\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ base\_indexes.iter\ ());}
\DoxyCodeLine{02268\ }
\DoxyCodeLine{02269\ \ \ \ \ return\_trace\ (\textcolor{keyword}{true});}
\DoxyCodeLine{02270\ \ \ \}}
\DoxyCodeLine{02271\ }
\DoxyCodeLine{02272\ \ \ \textcolor{keywordtype}{bool}\ sanitize\ (\mbox{\hyperlink{structhb__sanitize__context__t}{hb\_sanitize\_context\_t}}\ *c)\textcolor{keyword}{\ const}}
\DoxyCodeLine{02273\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{02274\ \ \ \ \ TRACE\_SANITIZE\ (\textcolor{keyword}{this});}
\DoxyCodeLine{02275\ \ \ \ \ return\_trace\ (c-\/>check\_struct\ (\textcolor{keyword}{this})\ \&\&}
\DoxyCodeLine{02276\ \ \ \ \ \ \ \ \ \ \ markCoverage.sanitize\ (c,\ \textcolor{keyword}{this})\ \&\&}
\DoxyCodeLine{02277\ \ \ \ \ \ \ \ \ \ \ baseCoverage.sanitize\ (c,\ \textcolor{keyword}{this})\ \&\&}
\DoxyCodeLine{02278\ \ \ \ \ \ \ \ \ \ \ markArray.sanitize\ (c,\ \textcolor{keyword}{this})\ \&\&}
\DoxyCodeLine{02279\ \ \ \ \ \ \ \ \ \ \ baseArray.sanitize\ (c,\ \textcolor{keyword}{this},\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int})\ classCount));}
\DoxyCodeLine{02280\ \ \ \}}
\DoxyCodeLine{02281\ }
\DoxyCodeLine{02282\ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{02283\ \ \ \mbox{\hyperlink{struct_o_t_1_1_int_type}{HBUINT16}}\ \ format;\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Format\ identifier-\/-\/format\ =\ 1\ */}}
\DoxyCodeLine{02284\ \ \ \mbox{\hyperlink{struct_o_t_1_1_offset_to}{Offset16To<Coverage>}}}
\DoxyCodeLine{02285\ \ \ \ \ \ \ \ \ markCoverage;\ \ \ \ \ \ \ \textcolor{comment}{/*\ Offset\ to\ MarkCoverage\ table-\/-\/from}}
\DoxyCodeLine{02286\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ beginning\ of\ MarkBasePos\ subtable\ */}}
\DoxyCodeLine{02287\ \ \ \mbox{\hyperlink{struct_o_t_1_1_offset_to}{Offset16To<Coverage>}}}
\DoxyCodeLine{02288\ \ \ \ \ \ \ \ \ baseCoverage;\ \ \ \ \ \ \ \textcolor{comment}{/*\ Offset\ to\ BaseCoverage\ table-\/-\/from}}
\DoxyCodeLine{02289\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ beginning\ of\ MarkBasePos\ subtable\ */}}
\DoxyCodeLine{02290\ \ \ \mbox{\hyperlink{struct_o_t_1_1_int_type}{HBUINT16}}\ \ classCount;\ \ \ \ \ \textcolor{comment}{/*\ Number\ of\ classes\ defined\ for\ marks\ */}}
\DoxyCodeLine{02291\ \ \ \mbox{\hyperlink{struct_o_t_1_1_offset_to}{Offset16To<MarkArray>}}}
\DoxyCodeLine{02292\ \ \ \ \ \ \ \ \ markArray;\ \ \ \ \ \ \textcolor{comment}{/*\ Offset\ to\ MarkArray\ table-\/-\/from}}
\DoxyCodeLine{02293\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ beginning\ of\ MarkBasePos\ subtable\ */}}
\DoxyCodeLine{02294\ \ \ \mbox{\hyperlink{struct_o_t_1_1_offset_to}{Offset16To<BaseArray>}}}
\DoxyCodeLine{02295\ \ \ \ \ \ \ \ \ baseArray;\ \ \ \ \ \ \textcolor{comment}{/*\ Offset\ to\ BaseArray\ table-\/-\/from}}
\DoxyCodeLine{02296\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ beginning\ of\ MarkBasePos\ subtable\ */}}
\DoxyCodeLine{02297\ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{02298\ \ \ DEFINE\_SIZE\_STATIC\ (12);}
\DoxyCodeLine{02299\ \};}
\DoxyCodeLine{02300\ }
\DoxyCodeLine{02301\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_o_t_1_1_mark_base_pos}{MarkBasePos}}}
\DoxyCodeLine{02302\ \{}
\DoxyCodeLine{02303\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ context\_t,\ \textcolor{keyword}{typename}\ ...Ts>}
\DoxyCodeLine{02304\ \ \ \textcolor{keyword}{typename}\ context\_t::return\_t\ dispatch\ (context\_t\ *c,\ Ts\&\&...\ ds)\textcolor{keyword}{\ const}}
\DoxyCodeLine{02305\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{02306\ \ \ \ \ TRACE\_DISPATCH\ (\textcolor{keyword}{this},\ u.format);}
\DoxyCodeLine{02307\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!c-\/>may\_dispatch\ (\textcolor{keyword}{this},\ \&u.format)))\ return\_trace\ (c-\/>no\_dispatch\_return\_value\ ());}
\DoxyCodeLine{02308\ \ \ \ \ \textcolor{keywordflow}{switch}\ (u.format)\ \{}
\DoxyCodeLine{02309\ \ \ \ \ \textcolor{keywordflow}{case}\ 1:\ return\_trace\ (c-\/>dispatch\ (u.format1,\ std::forward<Ts>\ (ds)...));}
\DoxyCodeLine{02310\ \ \ \ \ \textcolor{keywordflow}{default}:return\_trace\ (c-\/>default\_return\_value\ ());}
\DoxyCodeLine{02311\ \ \ \ \ \}}
\DoxyCodeLine{02312\ \ \ \}}
\DoxyCodeLine{02313\ }
\DoxyCodeLine{02314\ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{02315\ \ \ \textcolor{keyword}{union\ }\{}
\DoxyCodeLine{02316\ \ \ \mbox{\hyperlink{struct_o_t_1_1_int_type}{HBUINT16}}\ \ \ \ \ \ format;\ \ \ \ \ \textcolor{comment}{/*\ Format\ identifier\ */}}
\DoxyCodeLine{02317\ \ \ \mbox{\hyperlink{struct_o_t_1_1_mark_base_pos_format1}{MarkBasePosFormat1}}\ \ format1;}
\DoxyCodeLine{02318\ \ \ \}\ u;}
\DoxyCodeLine{02319\ \};}
\DoxyCodeLine{02320\ }
\DoxyCodeLine{02321\ }
\DoxyCodeLine{02322\ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{struct_o_t_1_1_anchor_matrix}{AnchorMatrix}}\ \mbox{\hyperlink{struct_o_t_1_1_anchor_matrix}{LigatureAttach}};\ \ \textcolor{comment}{/*\ component-\/major-\/-\/}}
\DoxyCodeLine{02323\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ in\ order\ of\ writing\ direction-\/-\/,}}
\DoxyCodeLine{02324\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ mark-\/minor-\/-\/}}
\DoxyCodeLine{02325\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ ordered\ by\ class-\/-\/zero-\/based.\ */}}
\DoxyCodeLine{02326\ }
\DoxyCodeLine{02327\ \textcolor{comment}{/*\ Array\ of\ LigatureAttach\ tables\ ordered\ by\ LigatureCoverage\ Index\ */}}
\DoxyCodeLine{02328\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_o_t_1_1_ligature_array}{LigatureArray}}\ :\ \mbox{\hyperlink{struct_o_t_1_1_list16_of_offset16_to}{List16OfOffset16To}}<LigatureAttach>}
\DoxyCodeLine{02329\ \{}
\DoxyCodeLine{02330\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Iterator,}
\DoxyCodeLine{02331\ \ \ \ \ \ \ \ \ hb\_requires\ (hb\_is\_iterator\ (Iterator))>}
\DoxyCodeLine{02332\ \ \ \textcolor{keywordtype}{bool}\ subset\ (\mbox{\hyperlink{structhb__subset__context__t}{hb\_subset\_context\_t}}\ *c,}
\DoxyCodeLine{02333\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Iterator\ \ \ \ \ \ \ \ \ coverage,}
\DoxyCodeLine{02334\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \ \ \ \ \ \ \ \ class\_count,}
\DoxyCodeLine{02335\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structhb__map__t}{hb\_map\_t}}\ \ \ \ \ \ *klass\_mapping)\textcolor{keyword}{\ const}}
\DoxyCodeLine{02336\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{02337\ \ \ \ \ TRACE\_SUBSET\ (\textcolor{keyword}{this});}
\DoxyCodeLine{02338\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structhb__set__t}{hb\_set\_t}}\ \&glyphset\ =\ *c-\/>plan-\/>glyphset\_gsub\ ();}
\DoxyCodeLine{02339\ }
\DoxyCodeLine{02340\ \ \ \ \ \textcolor{keyword}{auto}\ *out\ =\ c-\/>serializer-\/>start\_embed\ (\textcolor{keyword}{this});}
\DoxyCodeLine{02341\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!c-\/>serializer-\/>extend\_min\ (out)))\ \ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{02342\ }
\DoxyCodeLine{02343\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ \_\ :\ +\ hb\_zip\ (coverage,\ *\textcolor{keyword}{this})}
\DoxyCodeLine{02344\ \ \ \ \ \ \ \ \ \ \ |\ hb\_filter\ (glyphset,\ hb\_first))}
\DoxyCodeLine{02345\ \ \ \ \ \{}
\DoxyCodeLine{02346\ \ \ \ \ \ \ \textcolor{keyword}{auto}\ *matrix\ =\ out-\/>serialize\_append\ (c-\/>serializer);}
\DoxyCodeLine{02347\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!matrix))\ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{02348\ }
\DoxyCodeLine{02349\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1_anchor_matrix}{LigatureAttach}}\&\ src\ =\ (\textcolor{keyword}{this}\ +\ \_.second);}
\DoxyCodeLine{02350\ \ \ \ \ \ \ \textcolor{keyword}{auto}\ indexes\ =}
\DoxyCodeLine{02351\ \ \ \ \ \ \ \ \ \ \ +\ hb\_range\ (src.rows\ *\ class\_count)}
\DoxyCodeLine{02352\ \ \ \ \ \ \ \ \ \ \ |\ hb\_filter\ ([=]\ (\textcolor{keywordtype}{unsigned}\ index)\ \{\ \textcolor{keywordflow}{return}\ klass\_mapping-\/>has\ (index\ \%\ class\_count);\ \})}
\DoxyCodeLine{02353\ \ \ \ \ \ \ \ \ \ \ ;}
\DoxyCodeLine{02354\ \ \ \ \ \ \ matrix-\/>serialize\_subset\ (c,}
\DoxyCodeLine{02355\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_.second,}
\DoxyCodeLine{02356\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{this},}
\DoxyCodeLine{02357\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ src.rows,}
\DoxyCodeLine{02358\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ indexes);}
\DoxyCodeLine{02359\ \ \ \ \ \}}
\DoxyCodeLine{02360\ \ \ \ \ return\_trace\ (this-\/>len);}
\DoxyCodeLine{02361\ \ \ \}}
\DoxyCodeLine{02362\ \};}
\DoxyCodeLine{02363\ }
\DoxyCodeLine{02364\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_o_t_1_1_mark_lig_pos_format1}{MarkLigPosFormat1}}}
\DoxyCodeLine{02365\ \{}
\DoxyCodeLine{02366\ \ \ \textcolor{keywordtype}{bool}\ intersects\ (\textcolor{keyword}{const}\ \mbox{\hyperlink{structhb__set__t}{hb\_set\_t}}\ *glyphs)\textcolor{keyword}{\ const}}
\DoxyCodeLine{02367\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{02368\ \ \ \ \ \textcolor{keywordflow}{return}\ (\textcolor{keyword}{this}+markCoverage).intersects\ (glyphs)\ \&\&}
\DoxyCodeLine{02369\ \ \ \ \ \ \ \ (\textcolor{keyword}{this}+ligatureCoverage).intersects\ (glyphs);}
\DoxyCodeLine{02370\ \ \ \}}
\DoxyCodeLine{02371\ }
\DoxyCodeLine{02372\ \ \ \textcolor{keywordtype}{void}\ closure\_lookups\ (\mbox{\hyperlink{struct_o_t_1_1hb__closure__lookups__context__t}{hb\_closure\_lookups\_context\_t}}\ *c)\textcolor{keyword}{\ const\ }\{\}}
\DoxyCodeLine{02373\ }
\DoxyCodeLine{02374\ \ \ \textcolor{keywordtype}{void}\ collect\_variation\_indices\ (\mbox{\hyperlink{struct_o_t_1_1hb__collect__variation__indices__context__t}{hb\_collect\_variation\_indices\_context\_t}}\ *c)\textcolor{keyword}{\ const}}
\DoxyCodeLine{02375\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{02376\ \ \ \ \ +\ hb\_zip\ (\textcolor{keyword}{this}+markCoverage,\ \textcolor{keyword}{this}+markArray)}
\DoxyCodeLine{02377\ \ \ \ \ |\ hb\_filter\ (c-\/>glyph\_set,\ hb\_first)}
\DoxyCodeLine{02378\ \ \ \ \ |\ hb\_map\ (hb\_second)}
\DoxyCodeLine{02379\ \ \ \ \ |\ hb\_apply\ ([\&]\ (\textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1_mark_record}{MarkRecord}}\&\ record)\ \{\ record.collect\_variation\_indices\ (c,\ \&(\textcolor{keyword}{this}+markArray));\ \})}
\DoxyCodeLine{02380\ \ \ \ \ ;}
\DoxyCodeLine{02381\ }
\DoxyCodeLine{02382\ \ \ \ \ \mbox{\hyperlink{structhb__map__t}{hb\_map\_t}}\ klass\_mapping;}
\DoxyCodeLine{02383\ \ \ \ \ Markclass\_closure\_and\_remap\_indexes\ (\textcolor{keyword}{this}+markCoverage,\ \textcolor{keyword}{this}+markArray,\ *c-\/>glyph\_set,\ \&klass\_mapping);}
\DoxyCodeLine{02384\ }
\DoxyCodeLine{02385\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ ligcount\ =\ (\textcolor{keyword}{this}+ligatureArray).len;}
\DoxyCodeLine{02386\ \ \ \ \ \textcolor{keyword}{auto}\ lig\_iter\ =}
\DoxyCodeLine{02387\ \ \ \ \ +\ hb\_zip\ (\textcolor{keyword}{this}+ligatureCoverage,\ hb\_range\ (ligcount))}
\DoxyCodeLine{02388\ \ \ \ \ |\ hb\_filter\ (c-\/>glyph\_set,\ hb\_first)}
\DoxyCodeLine{02389\ \ \ \ \ |\ hb\_map\ (hb\_second)}
\DoxyCodeLine{02390\ \ \ \ \ ;}
\DoxyCodeLine{02391\ }
\DoxyCodeLine{02392\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1_ligature_array}{LigatureArray}}\&\ lig\_array\ =\ \textcolor{keyword}{this}+ligatureArray;}
\DoxyCodeLine{02393\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ i\ :\ lig\_iter)}
\DoxyCodeLine{02394\ \ \ \ \ \{}
\DoxyCodeLine{02395\ \ \ \ \ \ \ \mbox{\hyperlink{structhb__vector__t}{hb\_sorted\_vector\_t<unsigned>}}\ lig\_indexes;}
\DoxyCodeLine{02396\ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ row\_count\ =\ lig\_array[i].rows;}
\DoxyCodeLine{02397\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ row\ :\ +\ hb\_range\ (row\_count))}
\DoxyCodeLine{02398\ \ \ \ \ \ \ \{}
\DoxyCodeLine{02399\ \ \ \ \ +\ hb\_range\ ((\textcolor{keywordtype}{unsigned})\ classCount)}
\DoxyCodeLine{02400\ \ \ \ \ |\ hb\_filter\ (klass\_mapping)}
\DoxyCodeLine{02401\ \ \ \ \ |\ hb\_map\ ([\&]\ (\textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ col)\ \{\ \textcolor{keywordflow}{return}\ row\ *\ (unsigned)\ classCount\ +\ col;\ \})}
\DoxyCodeLine{02402\ \ \ \ \ |\ hb\_sink\ (lig\_indexes)}
\DoxyCodeLine{02403\ \ \ \ \ ;}
\DoxyCodeLine{02404\ \ \ \ \ \ \ \}}
\DoxyCodeLine{02405\ }
\DoxyCodeLine{02406\ \ \ \ \ \ \ lig\_array[i].collect\_variation\_indices\ (c,\ lig\_indexes.iter\ ());}
\DoxyCodeLine{02407\ \ \ \ \ \}}
\DoxyCodeLine{02408\ \ \ \}}
\DoxyCodeLine{02409\ }
\DoxyCodeLine{02410\ \ \ \textcolor{keywordtype}{void}\ collect\_glyphs\ (\mbox{\hyperlink{struct_o_t_1_1hb__collect__glyphs__context__t}{hb\_collect\_glyphs\_context\_t}}\ *c)\textcolor{keyword}{\ const}}
\DoxyCodeLine{02411\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{02412\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!(\textcolor{keyword}{this}+markCoverage).collect\_coverage\ (c-\/>input)))\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{02413\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!(\textcolor{keyword}{this}+ligatureCoverage).collect\_coverage\ (c-\/>input)))\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{02414\ \ \ \}}
\DoxyCodeLine{02415\ }
\DoxyCodeLine{02416\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1_coverage}{Coverage}}\ \&get\_coverage\ ()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{this}+markCoverage;\ \}}
\DoxyCodeLine{02417\ }
\DoxyCodeLine{02418\ \ \ \textcolor{keywordtype}{bool}\ apply\ (\mbox{\hyperlink{struct_o_t_1_1hb__ot__apply__context__t}{hb\_ot\_apply\_context\_t}}\ *c)\textcolor{keyword}{\ const}}
\DoxyCodeLine{02419\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{02420\ \ \ \ \ TRACE\_APPLY\ (\textcolor{keyword}{this});}
\DoxyCodeLine{02421\ \ \ \ \ \mbox{\hyperlink{structhb__buffer__t}{hb\_buffer\_t}}\ *\mbox{\hyperlink{classbuffer}{buffer}}\ =\ c-\/>buffer;}
\DoxyCodeLine{02422\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ mark\_index\ =\ (\textcolor{keyword}{this}+markCoverage).get\_coverage\ \ (\mbox{\hyperlink{classbuffer}{buffer}}-\/>cur().codepoint);}
\DoxyCodeLine{02423\ \ \ \ \ \textcolor{keywordflow}{if}\ (likely\ (mark\_index\ ==\ NOT\_COVERED))\ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{02424\ }
\DoxyCodeLine{02425\ \ \ \ \ \textcolor{comment}{/*\ Now\ we\ search\ backwards\ for\ a\ non-\/mark\ glyph\ */}}
\DoxyCodeLine{02426\ \ \ \ \ \mbox{\hyperlink{struct_o_t_1_1hb__ot__apply__context__t_1_1skipping__iterator__t}{hb\_ot\_apply\_context\_t::skipping\_iterator\_t}}\ \&skippy\_iter\ =\ c-\/>iter\_input;}
\DoxyCodeLine{02427\ \ \ \ \ skippy\_iter.reset\ (\mbox{\hyperlink{classbuffer}{buffer}}-\/>idx,\ 1);}
\DoxyCodeLine{02428\ \ \ \ \ skippy\_iter.set\_lookup\_props\ (LookupFlag::IgnoreMarks);}
\DoxyCodeLine{02429\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ unsafe\_from;}
\DoxyCodeLine{02430\ \ \ \ \ \textcolor{keywordflow}{if}\ (!skippy\_iter.prev\ (\&unsafe\_from))}
\DoxyCodeLine{02431\ \ \ \ \ \{}
\DoxyCodeLine{02432\ \ \ \ \ \ \ \mbox{\hyperlink{classbuffer}{buffer}}-\/>unsafe\_to\_concat\_from\_outbuffer\ (unsafe\_from,\ \mbox{\hyperlink{classbuffer}{buffer}}-\/>idx\ +\ 1);}
\DoxyCodeLine{02433\ \ \ \ \ \ \ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{02434\ \ \ \ \ \}}
\DoxyCodeLine{02435\ }
\DoxyCodeLine{02436\ \ \ \ \ \textcolor{comment}{/*\ Checking\ that\ matched\ glyph\ is\ actually\ a\ ligature\ by\ GDEF\ is\ too\ strong;\ disabled\ */}}
\DoxyCodeLine{02437\ \ \ \ \ \textcolor{comment}{//if\ (!\_hb\_glyph\_info\_is\_ligature\ (\&buffer-\/>info[skippy\_iter.idx]))\ \{\ return\_trace\ (false);\ \}}}
\DoxyCodeLine{02438\ }
\DoxyCodeLine{02439\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ j\ =\ skippy\_iter.idx;}
\DoxyCodeLine{02440\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ lig\_index\ =\ (\textcolor{keyword}{this}+ligatureCoverage).get\_coverage\ \ (\mbox{\hyperlink{classbuffer}{buffer}}-\/>info[j].codepoint);}
\DoxyCodeLine{02441\ \ \ \ \ \textcolor{keywordflow}{if}\ (lig\_index\ ==\ NOT\_COVERED)}
\DoxyCodeLine{02442\ \ \ \ \ \{}
\DoxyCodeLine{02443\ \ \ \ \ \ \ \mbox{\hyperlink{classbuffer}{buffer}}-\/>unsafe\_to\_concat\_from\_outbuffer\ (skippy\_iter.idx,\ \mbox{\hyperlink{classbuffer}{buffer}}-\/>idx\ +\ 1);}
\DoxyCodeLine{02444\ \ \ \ \ \ \ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{02445\ \ \ \ \ \}}
\DoxyCodeLine{02446\ }
\DoxyCodeLine{02447\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1_ligature_array}{LigatureArray}}\&\ lig\_array\ =\ \textcolor{keyword}{this}+ligatureArray;}
\DoxyCodeLine{02448\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1_anchor_matrix}{LigatureAttach}}\&\ lig\_attach\ =\ lig\_array[lig\_index];}
\DoxyCodeLine{02449\ }
\DoxyCodeLine{02450\ \ \ \ \ \textcolor{comment}{/*\ Find\ component\ to\ attach\ to\ */}}
\DoxyCodeLine{02451\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ comp\_count\ =\ lig\_attach.rows;}
\DoxyCodeLine{02452\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!comp\_count))}
\DoxyCodeLine{02453\ \ \ \ \ \{}
\DoxyCodeLine{02454\ \ \ \ \ \ \ \mbox{\hyperlink{classbuffer}{buffer}}-\/>unsafe\_to\_concat\_from\_outbuffer\ (skippy\_iter.idx,\ \mbox{\hyperlink{classbuffer}{buffer}}-\/>idx\ +\ 1);}
\DoxyCodeLine{02455\ \ \ \ \ \ \ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{02456\ \ \ \ \ \}}
\DoxyCodeLine{02457\ }
\DoxyCodeLine{02458\ \ \ \ \ \textcolor{comment}{/*\ We\ must\ now\ check\ whether\ the\ ligature\ ID\ of\ the\ current\ mark\ glyph}}
\DoxyCodeLine{02459\ \textcolor{comment}{\ \ \ \ \ *\ is\ identical\ to\ the\ ligature\ ID\ of\ the\ found\ ligature.\ \ If\ yes,\ we}}
\DoxyCodeLine{02460\ \textcolor{comment}{\ \ \ \ \ *\ can\ directly\ use\ the\ component\ index.\ \ If\ not,\ we\ attach\ the\ mark}}
\DoxyCodeLine{02461\ \textcolor{comment}{\ \ \ \ \ *\ glyph\ to\ the\ last\ component\ of\ the\ ligature.\ */}}
\DoxyCodeLine{02462\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ comp\_index;}
\DoxyCodeLine{02463\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ lig\_id\ =\ \_hb\_glyph\_info\_get\_lig\_id\ (\&\mbox{\hyperlink{classbuffer}{buffer}}-\/>info[j]);}
\DoxyCodeLine{02464\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ mark\_id\ =\ \_hb\_glyph\_info\_get\_lig\_id\ (\&\mbox{\hyperlink{classbuffer}{buffer}}-\/>cur());}
\DoxyCodeLine{02465\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ mark\_comp\ =\ \_hb\_glyph\_info\_get\_lig\_comp\ (\&\mbox{\hyperlink{classbuffer}{buffer}}-\/>cur());}
\DoxyCodeLine{02466\ \ \ \ \ \textcolor{keywordflow}{if}\ (lig\_id\ \&\&\ lig\_id\ ==\ mark\_id\ \&\&\ mark\_comp\ >\ 0)}
\DoxyCodeLine{02467\ \ \ \ \ \ \ comp\_index\ =\ hb\_min\ (comp\_count,\ \_hb\_glyph\_info\_get\_lig\_comp\ (\&\mbox{\hyperlink{classbuffer}{buffer}}-\/>cur()))\ -\/\ 1;}
\DoxyCodeLine{02468\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{02469\ \ \ \ \ \ \ comp\_index\ =\ comp\_count\ -\/\ 1;}
\DoxyCodeLine{02470\ }
\DoxyCodeLine{02471\ \ \ \ \ return\_trace\ ((\textcolor{keyword}{this}+markArray).apply\ (c,\ mark\_index,\ comp\_index,\ lig\_attach,\ classCount,\ j));}
\DoxyCodeLine{02472\ \ \ \}}
\DoxyCodeLine{02473\ }
\DoxyCodeLine{02474\ \ \ \textcolor{keywordtype}{bool}\ subset\ (\mbox{\hyperlink{structhb__subset__context__t}{hb\_subset\_context\_t}}\ *c)\textcolor{keyword}{\ const}}
\DoxyCodeLine{02475\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{02476\ \ \ \ \ TRACE\_SUBSET\ (\textcolor{keyword}{this});}
\DoxyCodeLine{02477\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structhb__set__t}{hb\_set\_t}}\ \&glyphset\ =\ *c-\/>plan-\/>glyphset\_gsub\ ();}
\DoxyCodeLine{02478\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structhb__map__t}{hb\_map\_t}}\ \&glyph\_map\ =\ *c-\/>plan-\/>glyph\_map;}
\DoxyCodeLine{02479\ }
\DoxyCodeLine{02480\ \ \ \ \ \textcolor{keyword}{auto}\ *out\ =\ c-\/>serializer-\/>start\_embed\ (*\textcolor{keyword}{this});}
\DoxyCodeLine{02481\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!c-\/>serializer-\/>extend\_min\ (out)))\ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{02482\ \ \ \ \ out-\/>format\ =\ format;}
\DoxyCodeLine{02483\ }
\DoxyCodeLine{02484\ \ \ \ \ \mbox{\hyperlink{structhb__map__t}{hb\_map\_t}}\ klass\_mapping;}
\DoxyCodeLine{02485\ \ \ \ \ Markclass\_closure\_and\_remap\_indexes\ (\textcolor{keyword}{this}+markCoverage,\ \textcolor{keyword}{this}+markArray,\ glyphset,\ \&klass\_mapping);}
\DoxyCodeLine{02486\ }
\DoxyCodeLine{02487\ \ \ \ \ \textcolor{keywordflow}{if}\ (!klass\_mapping.get\_population\ ())\ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{02488\ \ \ \ \ out-\/>classCount\ =\ klass\_mapping.get\_population\ ();}
\DoxyCodeLine{02489\ }
\DoxyCodeLine{02490\ \ \ \ \ \textcolor{keyword}{auto}\ mark\_iter\ =}
\DoxyCodeLine{02491\ \ \ \ \ +\ hb\_zip\ (\textcolor{keyword}{this}+markCoverage,\ \textcolor{keyword}{this}+markArray)}
\DoxyCodeLine{02492\ \ \ \ \ |\ hb\_filter\ (glyphset,\ hb\_first)}
\DoxyCodeLine{02493\ \ \ \ \ ;}
\DoxyCodeLine{02494\ }
\DoxyCodeLine{02495\ \ \ \ \ \textcolor{keyword}{auto}\ new\_mark\_coverage\ =}
\DoxyCodeLine{02496\ \ \ \ \ +\ mark\_iter}
\DoxyCodeLine{02497\ \ \ \ \ |\ hb\_map\_retains\_sorting\ (hb\_first)}
\DoxyCodeLine{02498\ \ \ \ \ |\ hb\_map\_retains\_sorting\ (glyph\_map)}
\DoxyCodeLine{02499\ \ \ \ \ ;}
\DoxyCodeLine{02500\ }
\DoxyCodeLine{02501\ \ \ \ \ \textcolor{keywordflow}{if}\ (!out-\/>markCoverage.serialize\_serialize\ (c-\/>serializer,\ new\_mark\_coverage))}
\DoxyCodeLine{02502\ \ \ \ \ \ \ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{02503\ }
\DoxyCodeLine{02504\ \ \ \ \ out-\/>markArray.serialize\_subset\ (c,\ markArray,\ \textcolor{keyword}{this},}
\DoxyCodeLine{02505\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{keyword}{this}+markCoverage).iter\ (),}
\DoxyCodeLine{02506\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&klass\_mapping);}
\DoxyCodeLine{02507\ }
\DoxyCodeLine{02508\ \ \ \ \ \textcolor{keyword}{auto}\ new\_ligature\_coverage\ =}
\DoxyCodeLine{02509\ \ \ \ \ +\ hb\_iter\ (\textcolor{keyword}{this}\ +\ ligatureCoverage)}
\DoxyCodeLine{02510\ \ \ \ \ |\ hb\_filter\ (glyphset)}
\DoxyCodeLine{02511\ \ \ \ \ |\ hb\_map\_retains\_sorting\ (glyph\_map)}
\DoxyCodeLine{02512\ \ \ \ \ ;}
\DoxyCodeLine{02513\ }
\DoxyCodeLine{02514\ \ \ \ \ \textcolor{keywordflow}{if}\ (!out-\/>ligatureCoverage.serialize\_serialize\ (c-\/>serializer,\ new\_ligature\_coverage))}
\DoxyCodeLine{02515\ \ \ \ \ \ \ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{02516\ }
\DoxyCodeLine{02517\ \ \ \ \ out-\/>ligatureArray.serialize\_subset\ (c,\ ligatureArray,\ \textcolor{keyword}{this},}
\DoxyCodeLine{02518\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ hb\_iter\ (\textcolor{keyword}{this}+ligatureCoverage),\ classCount,\ \&klass\_mapping);}
\DoxyCodeLine{02519\ }
\DoxyCodeLine{02520\ \ \ \ \ return\_trace\ (\textcolor{keyword}{true});}
\DoxyCodeLine{02521\ \ \ \}}
\DoxyCodeLine{02522\ }
\DoxyCodeLine{02523\ \ \ \textcolor{keywordtype}{bool}\ sanitize\ (\mbox{\hyperlink{structhb__sanitize__context__t}{hb\_sanitize\_context\_t}}\ *c)\textcolor{keyword}{\ const}}
\DoxyCodeLine{02524\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{02525\ \ \ \ \ TRACE\_SANITIZE\ (\textcolor{keyword}{this});}
\DoxyCodeLine{02526\ \ \ \ \ return\_trace\ (c-\/>check\_struct\ (\textcolor{keyword}{this})\ \&\&}
\DoxyCodeLine{02527\ \ \ \ \ \ \ \ \ \ \ markCoverage.sanitize\ (c,\ \textcolor{keyword}{this})\ \&\&}
\DoxyCodeLine{02528\ \ \ \ \ \ \ \ \ \ \ ligatureCoverage.sanitize\ (c,\ \textcolor{keyword}{this})\ \&\&}
\DoxyCodeLine{02529\ \ \ \ \ \ \ \ \ \ \ markArray.sanitize\ (c,\ \textcolor{keyword}{this})\ \&\&}
\DoxyCodeLine{02530\ \ \ \ \ \ \ \ \ \ \ ligatureArray.sanitize\ (c,\ \textcolor{keyword}{this},\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int})\ classCount));}
\DoxyCodeLine{02531\ \ \ \}}
\DoxyCodeLine{02532\ }
\DoxyCodeLine{02533\ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{02534\ \ \ \mbox{\hyperlink{struct_o_t_1_1_int_type}{HBUINT16}}\ \ format;\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Format\ identifier-\/-\/format\ =\ 1\ */}}
\DoxyCodeLine{02535\ \ \ \mbox{\hyperlink{struct_o_t_1_1_offset_to}{Offset16To<Coverage>}}}
\DoxyCodeLine{02536\ \ \ \ \ \ \ \ \ markCoverage;\ \ \ \ \ \ \ \textcolor{comment}{/*\ Offset\ to\ Mark\ Coverage\ table-\/-\/from}}
\DoxyCodeLine{02537\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ beginning\ of\ MarkLigPos\ subtable\ */}}
\DoxyCodeLine{02538\ \ \ \mbox{\hyperlink{struct_o_t_1_1_offset_to}{Offset16To<Coverage>}}}
\DoxyCodeLine{02539\ \ \ \ \ \ \ \ \ ligatureCoverage;\ \ \ \textcolor{comment}{/*\ Offset\ to\ Ligature\ Coverage}}
\DoxyCodeLine{02540\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ table-\/-\/from\ beginning\ of\ MarkLigPos}}
\DoxyCodeLine{02541\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ subtable\ */}}
\DoxyCodeLine{02542\ \ \ \mbox{\hyperlink{struct_o_t_1_1_int_type}{HBUINT16}}\ \ classCount;\ \ \ \ \ \textcolor{comment}{/*\ Number\ of\ defined\ mark\ classes\ */}}
\DoxyCodeLine{02543\ \ \ \mbox{\hyperlink{struct_o_t_1_1_offset_to}{Offset16To<MarkArray>}}}
\DoxyCodeLine{02544\ \ \ \ \ \ \ \ \ markArray;\ \ \ \ \ \ \textcolor{comment}{/*\ Offset\ to\ MarkArray\ table-\/-\/from}}
\DoxyCodeLine{02545\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ beginning\ of\ MarkLigPos\ subtable\ */}}
\DoxyCodeLine{02546\ \ \ \mbox{\hyperlink{struct_o_t_1_1_offset_to}{Offset16To<LigatureArray>}}}
\DoxyCodeLine{02547\ \ \ \ \ \ \ \ \ ligatureArray;\ \ \ \ \ \ \textcolor{comment}{/*\ Offset\ to\ LigatureArray\ table-\/-\/from}}
\DoxyCodeLine{02548\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ beginning\ of\ MarkLigPos\ subtable\ */}}
\DoxyCodeLine{02549\ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{02550\ \ \ DEFINE\_SIZE\_STATIC\ (12);}
\DoxyCodeLine{02551\ \};}
\DoxyCodeLine{02552\ }
\DoxyCodeLine{02553\ }
\DoxyCodeLine{02554\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_o_t_1_1_mark_lig_pos}{MarkLigPos}}}
\DoxyCodeLine{02555\ \{}
\DoxyCodeLine{02556\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ context\_t,\ \textcolor{keyword}{typename}\ ...Ts>}
\DoxyCodeLine{02557\ \ \ \textcolor{keyword}{typename}\ context\_t::return\_t\ dispatch\ (context\_t\ *c,\ Ts\&\&...\ ds)\textcolor{keyword}{\ const}}
\DoxyCodeLine{02558\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{02559\ \ \ \ \ TRACE\_DISPATCH\ (\textcolor{keyword}{this},\ u.format);}
\DoxyCodeLine{02560\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!c-\/>may\_dispatch\ (\textcolor{keyword}{this},\ \&u.format)))\ return\_trace\ (c-\/>no\_dispatch\_return\_value\ ());}
\DoxyCodeLine{02561\ \ \ \ \ \textcolor{keywordflow}{switch}\ (u.format)\ \{}
\DoxyCodeLine{02562\ \ \ \ \ \textcolor{keywordflow}{case}\ 1:\ return\_trace\ (c-\/>dispatch\ (u.format1,\ std::forward<Ts>\ (ds)...));}
\DoxyCodeLine{02563\ \ \ \ \ \textcolor{keywordflow}{default}:return\_trace\ (c-\/>default\_return\_value\ ());}
\DoxyCodeLine{02564\ \ \ \ \ \}}
\DoxyCodeLine{02565\ \ \ \}}
\DoxyCodeLine{02566\ }
\DoxyCodeLine{02567\ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{02568\ \ \ \textcolor{keyword}{union\ }\{}
\DoxyCodeLine{02569\ \ \ \mbox{\hyperlink{struct_o_t_1_1_int_type}{HBUINT16}}\ \ \ \ \ \ format;\ \ \ \ \ \textcolor{comment}{/*\ Format\ identifier\ */}}
\DoxyCodeLine{02570\ \ \ \mbox{\hyperlink{struct_o_t_1_1_mark_lig_pos_format1}{MarkLigPosFormat1}}\ \ \ \ format1;}
\DoxyCodeLine{02571\ \ \ \}\ u;}
\DoxyCodeLine{02572\ \};}
\DoxyCodeLine{02573\ }
\DoxyCodeLine{02574\ }
\DoxyCodeLine{02575\ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{struct_o_t_1_1_anchor_matrix}{AnchorMatrix}}\ \mbox{\hyperlink{struct_o_t_1_1_anchor_matrix}{Mark2Array}};\ \ \textcolor{comment}{/*\ mark2-\/major-\/-\/}}
\DoxyCodeLine{02576\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ in\ order\ of\ Mark2Coverage\ Index-\/-\/,}}
\DoxyCodeLine{02577\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ mark1-\/minor-\/-\/}}
\DoxyCodeLine{02578\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ ordered\ by\ class-\/-\/zero-\/based.\ */}}
\DoxyCodeLine{02579\ }
\DoxyCodeLine{02580\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_o_t_1_1_mark_mark_pos_format1}{MarkMarkPosFormat1}}}
\DoxyCodeLine{02581\ \{}
\DoxyCodeLine{02582\ \ \ \textcolor{keywordtype}{bool}\ intersects\ (\textcolor{keyword}{const}\ \mbox{\hyperlink{structhb__set__t}{hb\_set\_t}}\ *glyphs)\textcolor{keyword}{\ const}}
\DoxyCodeLine{02583\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{02584\ \ \ \ \ \textcolor{keywordflow}{return}\ (\textcolor{keyword}{this}+mark1Coverage).intersects\ (glyphs)\ \&\&}
\DoxyCodeLine{02585\ \ \ \ \ \ \ \ (\textcolor{keyword}{this}+mark2Coverage).intersects\ (glyphs);}
\DoxyCodeLine{02586\ \ \ \}}
\DoxyCodeLine{02587\ }
\DoxyCodeLine{02588\ \ \ \textcolor{keywordtype}{void}\ closure\_lookups\ (\mbox{\hyperlink{struct_o_t_1_1hb__closure__lookups__context__t}{hb\_closure\_lookups\_context\_t}}\ *c)\textcolor{keyword}{\ const\ }\{\}}
\DoxyCodeLine{02589\ }
\DoxyCodeLine{02590\ \ \ \textcolor{keywordtype}{void}\ collect\_variation\_indices\ (\mbox{\hyperlink{struct_o_t_1_1hb__collect__variation__indices__context__t}{hb\_collect\_variation\_indices\_context\_t}}\ *c)\textcolor{keyword}{\ const}}
\DoxyCodeLine{02591\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{02592\ \ \ \ \ +\ hb\_zip\ (\textcolor{keyword}{this}+mark1Coverage,\ \textcolor{keyword}{this}+mark1Array)}
\DoxyCodeLine{02593\ \ \ \ \ |\ hb\_filter\ (c-\/>glyph\_set,\ hb\_first)}
\DoxyCodeLine{02594\ \ \ \ \ |\ hb\_map\ (hb\_second)}
\DoxyCodeLine{02595\ \ \ \ \ |\ hb\_apply\ ([\&]\ (\textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1_mark_record}{MarkRecord}}\&\ record)\ \{\ record.collect\_variation\_indices\ (c,\ \&(\textcolor{keyword}{this}+mark1Array));\ \})}
\DoxyCodeLine{02596\ \ \ \ \ ;}
\DoxyCodeLine{02597\ }
\DoxyCodeLine{02598\ \ \ \ \ \mbox{\hyperlink{structhb__map__t}{hb\_map\_t}}\ klass\_mapping;}
\DoxyCodeLine{02599\ \ \ \ \ Markclass\_closure\_and\_remap\_indexes\ (\textcolor{keyword}{this}+mark1Coverage,\ \textcolor{keyword}{this}+mark1Array,\ *c-\/>glyph\_set,\ \&klass\_mapping);}
\DoxyCodeLine{02600\ }
\DoxyCodeLine{02601\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ mark2\_count\ =\ (\textcolor{keyword}{this}+mark2Array).rows;}
\DoxyCodeLine{02602\ \ \ \ \ \textcolor{keyword}{auto}\ mark2\_iter\ =}
\DoxyCodeLine{02603\ \ \ \ \ +\ hb\_zip\ (\textcolor{keyword}{this}+mark2Coverage,\ hb\_range\ (mark2\_count))}
\DoxyCodeLine{02604\ \ \ \ \ |\ hb\_filter\ (c-\/>glyph\_set,\ hb\_first)}
\DoxyCodeLine{02605\ \ \ \ \ |\ hb\_map\ (hb\_second)}
\DoxyCodeLine{02606\ \ \ \ \ ;}
\DoxyCodeLine{02607\ }
\DoxyCodeLine{02608\ \ \ \ \ \mbox{\hyperlink{structhb__vector__t}{hb\_sorted\_vector\_t<unsigned>}}\ mark2\_indexes;}
\DoxyCodeLine{02609\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ row\ :\ mark2\_iter)}
\DoxyCodeLine{02610\ \ \ \ \ \{}
\DoxyCodeLine{02611\ \ \ \ \ \ \ +\ hb\_range\ ((\textcolor{keywordtype}{unsigned})\ classCount)}
\DoxyCodeLine{02612\ \ \ \ \ \ \ |\ hb\_filter\ (klass\_mapping)}
\DoxyCodeLine{02613\ \ \ \ \ \ \ |\ hb\_map\ ([\&]\ (\textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ col)\ \{\ \textcolor{keywordflow}{return}\ row\ *\ (unsigned)\ classCount\ +\ col;\ \})}
\DoxyCodeLine{02614\ \ \ \ \ \ \ |\ hb\_sink\ (mark2\_indexes)}
\DoxyCodeLine{02615\ \ \ \ \ \ \ ;}
\DoxyCodeLine{02616\ \ \ \ \ \}}
\DoxyCodeLine{02617\ \ \ \ \ (\textcolor{keyword}{this}+mark2Array).collect\_variation\_indices\ (c,\ mark2\_indexes.iter\ ());}
\DoxyCodeLine{02618\ \ \ \}}
\DoxyCodeLine{02619\ }
\DoxyCodeLine{02620\ \ \ \textcolor{keywordtype}{void}\ collect\_glyphs\ (\mbox{\hyperlink{struct_o_t_1_1hb__collect__glyphs__context__t}{hb\_collect\_glyphs\_context\_t}}\ *c)\textcolor{keyword}{\ const}}
\DoxyCodeLine{02621\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{02622\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!(\textcolor{keyword}{this}+mark1Coverage).collect\_coverage\ (c-\/>input)))\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{02623\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!(\textcolor{keyword}{this}+mark2Coverage).collect\_coverage\ (c-\/>input)))\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{02624\ \ \ \}}
\DoxyCodeLine{02625\ }
\DoxyCodeLine{02626\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1_coverage}{Coverage}}\ \&get\_coverage\ ()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{this}+mark1Coverage;\ \}}
\DoxyCodeLine{02627\ }
\DoxyCodeLine{02628\ \ \ \textcolor{keywordtype}{bool}\ apply\ (\mbox{\hyperlink{struct_o_t_1_1hb__ot__apply__context__t}{hb\_ot\_apply\_context\_t}}\ *c)\textcolor{keyword}{\ const}}
\DoxyCodeLine{02629\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{02630\ \ \ \ \ TRACE\_APPLY\ (\textcolor{keyword}{this});}
\DoxyCodeLine{02631\ \ \ \ \ \mbox{\hyperlink{structhb__buffer__t}{hb\_buffer\_t}}\ *\mbox{\hyperlink{classbuffer}{buffer}}\ =\ c-\/>buffer;}
\DoxyCodeLine{02632\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ mark1\_index\ =\ (\textcolor{keyword}{this}+mark1Coverage).get\_coverage\ \ (\mbox{\hyperlink{classbuffer}{buffer}}-\/>cur().codepoint);}
\DoxyCodeLine{02633\ \ \ \ \ \textcolor{keywordflow}{if}\ (likely\ (mark1\_index\ ==\ NOT\_COVERED))\ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{02634\ }
\DoxyCodeLine{02635\ \ \ \ \ \textcolor{comment}{/*\ now\ we\ search\ backwards\ for\ a\ suitable\ mark\ glyph\ until\ a\ non-\/mark\ glyph\ */}}
\DoxyCodeLine{02636\ \ \ \ \ \mbox{\hyperlink{struct_o_t_1_1hb__ot__apply__context__t_1_1skipping__iterator__t}{hb\_ot\_apply\_context\_t::skipping\_iterator\_t}}\ \&skippy\_iter\ =\ c-\/>iter\_input;}
\DoxyCodeLine{02637\ \ \ \ \ skippy\_iter.reset\ (\mbox{\hyperlink{classbuffer}{buffer}}-\/>idx,\ 1);}
\DoxyCodeLine{02638\ \ \ \ \ skippy\_iter.set\_lookup\_props\ (c-\/>lookup\_props\ \&\ \string~LookupFlag::IgnoreFlags);}
\DoxyCodeLine{02639\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ unsafe\_from;}
\DoxyCodeLine{02640\ \ \ \ \ \textcolor{keywordflow}{if}\ (!skippy\_iter.prev\ (\&unsafe\_from))}
\DoxyCodeLine{02641\ \ \ \ \ \{}
\DoxyCodeLine{02642\ \ \ \ \ \ \ \mbox{\hyperlink{classbuffer}{buffer}}-\/>unsafe\_to\_concat\_from\_outbuffer\ (unsafe\_from,\ \mbox{\hyperlink{classbuffer}{buffer}}-\/>idx\ +\ 1);}
\DoxyCodeLine{02643\ \ \ \ \ \ \ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{02644\ \ \ \ \ \}}
\DoxyCodeLine{02645\ }
\DoxyCodeLine{02646\ \ \ \ \ \textcolor{keywordflow}{if}\ (!\_hb\_glyph\_info\_is\_mark\ (\&\mbox{\hyperlink{classbuffer}{buffer}}-\/>info[skippy\_iter.idx]))}
\DoxyCodeLine{02647\ \ \ \ \ \{}
\DoxyCodeLine{02648\ \ \ \ \ \ \ \mbox{\hyperlink{classbuffer}{buffer}}-\/>unsafe\_to\_concat\_from\_outbuffer\ (skippy\_iter.idx,\ \mbox{\hyperlink{classbuffer}{buffer}}-\/>idx\ +\ 1);}
\DoxyCodeLine{02649\ \ \ \ \ \ \ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{02650\ \ \ \ \ \}}
\DoxyCodeLine{02651\ }
\DoxyCodeLine{02652\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ j\ =\ skippy\_iter.idx;}
\DoxyCodeLine{02653\ }
\DoxyCodeLine{02654\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ id1\ =\ \_hb\_glyph\_info\_get\_lig\_id\ (\&\mbox{\hyperlink{classbuffer}{buffer}}-\/>cur());}
\DoxyCodeLine{02655\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ id2\ =\ \_hb\_glyph\_info\_get\_lig\_id\ (\&\mbox{\hyperlink{classbuffer}{buffer}}-\/>info[j]);}
\DoxyCodeLine{02656\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ comp1\ =\ \_hb\_glyph\_info\_get\_lig\_comp\ (\&\mbox{\hyperlink{classbuffer}{buffer}}-\/>cur());}
\DoxyCodeLine{02657\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ comp2\ =\ \_hb\_glyph\_info\_get\_lig\_comp\ (\&\mbox{\hyperlink{classbuffer}{buffer}}-\/>info[j]);}
\DoxyCodeLine{02658\ }
\DoxyCodeLine{02659\ \ \ \ \ \textcolor{keywordflow}{if}\ (likely\ (id1\ ==\ id2))}
\DoxyCodeLine{02660\ \ \ \ \ \{}
\DoxyCodeLine{02661\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (id1\ ==\ 0)\ \textcolor{comment}{/*\ Marks\ belonging\ to\ the\ same\ base.\ */}}
\DoxyCodeLine{02662\ \ \ \ \ \textcolor{keywordflow}{goto}\ good;}
\DoxyCodeLine{02663\ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (comp1\ ==\ comp2)\ \textcolor{comment}{/*\ Marks\ belonging\ to\ the\ same\ ligature\ component.\ */}}
\DoxyCodeLine{02664\ \ \ \ \ \textcolor{keywordflow}{goto}\ good;}
\DoxyCodeLine{02665\ \ \ \ \ \}}
\DoxyCodeLine{02666\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{02667\ \ \ \ \ \{}
\DoxyCodeLine{02668\ \ \ \ \ \ \ \textcolor{comment}{/*\ If\ ligature\ ids\ don't\ match,\ it\ may\ be\ the\ case\ that\ one\ of\ the\ marks}}
\DoxyCodeLine{02669\ \textcolor{comment}{\ \ \ \ \ \ \ *\ itself\ is\ a\ ligature.\ \ In\ which\ case\ match.\ */}}
\DoxyCodeLine{02670\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((id1\ >\ 0\ \&\&\ !comp1)\ ||\ (id2\ >\ 0\ \&\&\ !comp2))}
\DoxyCodeLine{02671\ \ \ \ \ \textcolor{keywordflow}{goto}\ good;}
\DoxyCodeLine{02672\ \ \ \ \ \}}
\DoxyCodeLine{02673\ }
\DoxyCodeLine{02674\ \ \ \ \ \textcolor{comment}{/*\ Didn't\ match.\ */}}
\DoxyCodeLine{02675\ \ \ \ \ \mbox{\hyperlink{classbuffer}{buffer}}-\/>unsafe\_to\_concat\_from\_outbuffer\ (skippy\_iter.idx,\ \mbox{\hyperlink{classbuffer}{buffer}}-\/>idx\ +\ 1);}
\DoxyCodeLine{02676\ \ \ \ \ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{02677\ }
\DoxyCodeLine{02678\ \ \ \ \ good:}
\DoxyCodeLine{02679\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ mark2\_index\ =\ (\textcolor{keyword}{this}+mark2Coverage).get\_coverage\ \ (\mbox{\hyperlink{classbuffer}{buffer}}-\/>info[j].codepoint);}
\DoxyCodeLine{02680\ \ \ \ \ \textcolor{keywordflow}{if}\ (mark2\_index\ ==\ NOT\_COVERED)}
\DoxyCodeLine{02681\ \ \ \ \ \{}
\DoxyCodeLine{02682\ \ \ \ \ \ \ \mbox{\hyperlink{classbuffer}{buffer}}-\/>unsafe\_to\_concat\_from\_outbuffer\ (skippy\_iter.idx,\ \mbox{\hyperlink{classbuffer}{buffer}}-\/>idx\ +\ 1);}
\DoxyCodeLine{02683\ \ \ \ \ \ \ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{02684\ \ \ \ \ \}}
\DoxyCodeLine{02685\ }
\DoxyCodeLine{02686\ \ \ \ \ return\_trace\ ((\textcolor{keyword}{this}+mark1Array).apply\ (c,\ mark1\_index,\ mark2\_index,\ \textcolor{keyword}{this}+mark2Array,\ classCount,\ j));}
\DoxyCodeLine{02687\ \ \ \}}
\DoxyCodeLine{02688\ }
\DoxyCodeLine{02689\ \ \ \textcolor{keywordtype}{bool}\ subset\ (\mbox{\hyperlink{structhb__subset__context__t}{hb\_subset\_context\_t}}\ *c)\textcolor{keyword}{\ const}}
\DoxyCodeLine{02690\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{02691\ \ \ \ \ TRACE\_SUBSET\ (\textcolor{keyword}{this});}
\DoxyCodeLine{02692\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structhb__set__t}{hb\_set\_t}}\ \&glyphset\ =\ *c-\/>plan-\/>glyphset\_gsub\ ();}
\DoxyCodeLine{02693\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structhb__map__t}{hb\_map\_t}}\ \&glyph\_map\ =\ *c-\/>plan-\/>glyph\_map;}
\DoxyCodeLine{02694\ }
\DoxyCodeLine{02695\ \ \ \ \ \textcolor{keyword}{auto}\ *out\ =\ c-\/>serializer-\/>start\_embed\ (*\textcolor{keyword}{this});}
\DoxyCodeLine{02696\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!c-\/>serializer-\/>extend\_min\ (out)))\ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{02697\ \ \ \ \ out-\/>format\ =\ format;}
\DoxyCodeLine{02698\ }
\DoxyCodeLine{02699\ \ \ \ \ \mbox{\hyperlink{structhb__map__t}{hb\_map\_t}}\ klass\_mapping;}
\DoxyCodeLine{02700\ \ \ \ \ Markclass\_closure\_and\_remap\_indexes\ (\textcolor{keyword}{this}+mark1Coverage,\ \textcolor{keyword}{this}+mark1Array,\ glyphset,\ \&klass\_mapping);}
\DoxyCodeLine{02701\ }
\DoxyCodeLine{02702\ \ \ \ \ \textcolor{keywordflow}{if}\ (!klass\_mapping.get\_population\ ())\ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{02703\ \ \ \ \ out-\/>classCount\ =\ klass\_mapping.get\_population\ ();}
\DoxyCodeLine{02704\ }
\DoxyCodeLine{02705\ \ \ \ \ \textcolor{keyword}{auto}\ mark1\_iter\ =}
\DoxyCodeLine{02706\ \ \ \ \ +\ hb\_zip\ (\textcolor{keyword}{this}+mark1Coverage,\ \textcolor{keyword}{this}+mark1Array)}
\DoxyCodeLine{02707\ \ \ \ \ |\ hb\_filter\ (glyphset,\ hb\_first)}
\DoxyCodeLine{02708\ \ \ \ \ ;}
\DoxyCodeLine{02709\ }
\DoxyCodeLine{02710\ \ \ \ \ \mbox{\hyperlink{structhb__vector__t}{hb\_sorted\_vector\_t<hb\_codepoint\_t>}}\ new\_coverage;}
\DoxyCodeLine{02711\ \ \ \ \ +\ mark1\_iter}
\DoxyCodeLine{02712\ \ \ \ \ |\ hb\_map\ (hb\_first)}
\DoxyCodeLine{02713\ \ \ \ \ |\ hb\_map\ (glyph\_map)}
\DoxyCodeLine{02714\ \ \ \ \ |\ hb\_sink\ (new\_coverage)}
\DoxyCodeLine{02715\ \ \ \ \ ;}
\DoxyCodeLine{02716\ }
\DoxyCodeLine{02717\ \ \ \ \ \textcolor{keywordflow}{if}\ (!out-\/>mark1Coverage.serialize\_serialize\ (c-\/>serializer,\ new\_coverage.iter\ ()))}
\DoxyCodeLine{02718\ \ \ \ \ \ \ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{02719\ }
\DoxyCodeLine{02720\ \ \ \ \ out-\/>mark1Array.serialize\_subset\ (c,\ mark1Array,\ \textcolor{keyword}{this},}
\DoxyCodeLine{02721\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{keyword}{this}+mark1Coverage).iter\ (),}
\DoxyCodeLine{02722\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&klass\_mapping);}
\DoxyCodeLine{02723\ }
\DoxyCodeLine{02724\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ mark2count\ =\ (\textcolor{keyword}{this}+mark2Array).rows;}
\DoxyCodeLine{02725\ \ \ \ \ \textcolor{keyword}{auto}\ mark2\_iter\ =}
\DoxyCodeLine{02726\ \ \ \ \ +\ hb\_zip\ (\textcolor{keyword}{this}+mark2Coverage,\ hb\_range\ (mark2count))}
\DoxyCodeLine{02727\ \ \ \ \ |\ hb\_filter\ (glyphset,\ hb\_first)}
\DoxyCodeLine{02728\ \ \ \ \ ;}
\DoxyCodeLine{02729\ }
\DoxyCodeLine{02730\ \ \ \ \ new\_coverage.reset\ ();}
\DoxyCodeLine{02731\ \ \ \ \ +\ mark2\_iter}
\DoxyCodeLine{02732\ \ \ \ \ |\ hb\_map\ (hb\_first)}
\DoxyCodeLine{02733\ \ \ \ \ |\ hb\_map\ (glyph\_map)}
\DoxyCodeLine{02734\ \ \ \ \ |\ hb\_sink\ (new\_coverage)}
\DoxyCodeLine{02735\ \ \ \ \ ;}
\DoxyCodeLine{02736\ }
\DoxyCodeLine{02737\ \ \ \ \ \textcolor{keywordflow}{if}\ (!out-\/>mark2Coverage.serialize\_serialize\ (c-\/>serializer,\ new\_coverage.iter\ ()))}
\DoxyCodeLine{02738\ \ \ \ \ \ \ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{02739\ }
\DoxyCodeLine{02740\ \ \ \ \ \mbox{\hyperlink{structhb__vector__t}{hb\_sorted\_vector\_t<unsigned>}}\ mark2\_indexes;}
\DoxyCodeLine{02741\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ row\ :\ +\ mark2\_iter}
\DoxyCodeLine{02742\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ |\ hb\_map\ (hb\_second))}
\DoxyCodeLine{02743\ \ \ \ \ \{}
\DoxyCodeLine{02744\ \ \ \ \ \ \ +\ hb\_range\ ((\textcolor{keywordtype}{unsigned})\ classCount)}
\DoxyCodeLine{02745\ \ \ \ \ \ \ |\ hb\_filter\ (klass\_mapping)}
\DoxyCodeLine{02746\ \ \ \ \ \ \ |\ hb\_map\ ([\&]\ (\textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ col)\ \{\ \textcolor{keywordflow}{return}\ row\ *\ (unsigned)\ classCount\ +\ col;\ \})}
\DoxyCodeLine{02747\ \ \ \ \ \ \ |\ hb\_sink\ (mark2\_indexes)}
\DoxyCodeLine{02748\ \ \ \ \ \ \ ;}
\DoxyCodeLine{02749\ \ \ \ \ \}}
\DoxyCodeLine{02750\ }
\DoxyCodeLine{02751\ \ \ \ \ out-\/>mark2Array.serialize\_subset\ (c,\ mark2Array,\ \textcolor{keyword}{this},\ mark2\_iter.len\ (),\ mark2\_indexes.iter\ ());}
\DoxyCodeLine{02752\ }
\DoxyCodeLine{02753\ \ \ \ \ return\_trace\ (\textcolor{keyword}{true});}
\DoxyCodeLine{02754\ \ \ \}}
\DoxyCodeLine{02755\ }
\DoxyCodeLine{02756\ \ \ \textcolor{keywordtype}{bool}\ sanitize\ (\mbox{\hyperlink{structhb__sanitize__context__t}{hb\_sanitize\_context\_t}}\ *c)\textcolor{keyword}{\ const}}
\DoxyCodeLine{02757\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{02758\ \ \ \ \ TRACE\_SANITIZE\ (\textcolor{keyword}{this});}
\DoxyCodeLine{02759\ \ \ \ \ return\_trace\ (c-\/>check\_struct\ (\textcolor{keyword}{this})\ \&\&}
\DoxyCodeLine{02760\ \ \ \ \ \ \ \ \ \ \ mark1Coverage.sanitize\ (c,\ \textcolor{keyword}{this})\ \&\&}
\DoxyCodeLine{02761\ \ \ \ \ \ \ \ \ \ \ mark2Coverage.sanitize\ (c,\ \textcolor{keyword}{this})\ \&\&}
\DoxyCodeLine{02762\ \ \ \ \ \ \ \ \ \ \ mark1Array.sanitize\ (c,\ \textcolor{keyword}{this})\ \&\&}
\DoxyCodeLine{02763\ \ \ \ \ \ \ \ \ \ \ mark2Array.sanitize\ (c,\ \textcolor{keyword}{this},\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int})\ classCount));}
\DoxyCodeLine{02764\ \ \ \}}
\DoxyCodeLine{02765\ }
\DoxyCodeLine{02766\ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{02767\ \ \ \mbox{\hyperlink{struct_o_t_1_1_int_type}{HBUINT16}}\ \ format;\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Format\ identifier-\/-\/format\ =\ 1\ */}}
\DoxyCodeLine{02768\ \ \ \mbox{\hyperlink{struct_o_t_1_1_offset_to}{Offset16To<Coverage>}}}
\DoxyCodeLine{02769\ \ \ \ \ \ \ \ \ mark1Coverage;\ \ \ \ \ \ \textcolor{comment}{/*\ Offset\ to\ Combining\ Mark1\ Coverage}}
\DoxyCodeLine{02770\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ table-\/-\/from\ beginning\ of\ MarkMarkPos}}
\DoxyCodeLine{02771\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ subtable\ */}}
\DoxyCodeLine{02772\ \ \ \mbox{\hyperlink{struct_o_t_1_1_offset_to}{Offset16To<Coverage>}}}
\DoxyCodeLine{02773\ \ \ \ \ \ \ \ \ mark2Coverage;\ \ \ \ \ \ \textcolor{comment}{/*\ Offset\ to\ Combining\ Mark2\ Coverage}}
\DoxyCodeLine{02774\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ table-\/-\/from\ beginning\ of\ MarkMarkPos}}
\DoxyCodeLine{02775\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ subtable\ */}}
\DoxyCodeLine{02776\ \ \ \mbox{\hyperlink{struct_o_t_1_1_int_type}{HBUINT16}}\ \ classCount;\ \ \ \ \ \textcolor{comment}{/*\ Number\ of\ defined\ mark\ classes\ */}}
\DoxyCodeLine{02777\ \ \ \mbox{\hyperlink{struct_o_t_1_1_offset_to}{Offset16To<MarkArray>}}}
\DoxyCodeLine{02778\ \ \ \ \ \ \ \ \ mark1Array;\ \ \ \ \ \textcolor{comment}{/*\ Offset\ to\ Mark1Array\ table-\/-\/from}}
\DoxyCodeLine{02779\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ beginning\ of\ MarkMarkPos\ subtable\ */}}
\DoxyCodeLine{02780\ \ \ \mbox{\hyperlink{struct_o_t_1_1_offset_to}{Offset16To<Mark2Array>}}}
\DoxyCodeLine{02781\ \ \ \ \ \ \ \ \ mark2Array;\ \ \ \ \ \textcolor{comment}{/*\ Offset\ to\ Mark2Array\ table-\/-\/from}}
\DoxyCodeLine{02782\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ beginning\ of\ MarkMarkPos\ subtable\ */}}
\DoxyCodeLine{02783\ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{02784\ \ \ DEFINE\_SIZE\_STATIC\ (12);}
\DoxyCodeLine{02785\ \};}
\DoxyCodeLine{02786\ }
\DoxyCodeLine{02787\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_o_t_1_1_mark_mark_pos}{MarkMarkPos}}}
\DoxyCodeLine{02788\ \{}
\DoxyCodeLine{02789\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ context\_t,\ \textcolor{keyword}{typename}\ ...Ts>}
\DoxyCodeLine{02790\ \ \ \textcolor{keyword}{typename}\ context\_t::return\_t\ dispatch\ (context\_t\ *c,\ Ts\&\&...\ ds)\textcolor{keyword}{\ const}}
\DoxyCodeLine{02791\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{02792\ \ \ \ \ TRACE\_DISPATCH\ (\textcolor{keyword}{this},\ u.format);}
\DoxyCodeLine{02793\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!c-\/>may\_dispatch\ (\textcolor{keyword}{this},\ \&u.format)))\ return\_trace\ (c-\/>no\_dispatch\_return\_value\ ());}
\DoxyCodeLine{02794\ \ \ \ \ \textcolor{keywordflow}{switch}\ (u.format)\ \{}
\DoxyCodeLine{02795\ \ \ \ \ \textcolor{keywordflow}{case}\ 1:\ return\_trace\ (c-\/>dispatch\ (u.format1,\ std::forward<Ts>\ (ds)...));}
\DoxyCodeLine{02796\ \ \ \ \ \textcolor{keywordflow}{default}:return\_trace\ (c-\/>default\_return\_value\ ());}
\DoxyCodeLine{02797\ \ \ \ \ \}}
\DoxyCodeLine{02798\ \ \ \}}
\DoxyCodeLine{02799\ }
\DoxyCodeLine{02800\ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{02801\ \ \ \textcolor{keyword}{union\ }\{}
\DoxyCodeLine{02802\ \ \ \mbox{\hyperlink{struct_o_t_1_1_int_type}{HBUINT16}}\ \ \ \ \ \ format;\ \ \ \ \ \textcolor{comment}{/*\ Format\ identifier\ */}}
\DoxyCodeLine{02803\ \ \ \mbox{\hyperlink{struct_o_t_1_1_mark_mark_pos_format1}{MarkMarkPosFormat1}}\ \ format1;}
\DoxyCodeLine{02804\ \ \ \}\ u;}
\DoxyCodeLine{02805\ \};}
\DoxyCodeLine{02806\ }
\DoxyCodeLine{02807\ }
\DoxyCodeLine{02808\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_o_t_1_1_context_pos}{ContextPos}}\ :\ \mbox{\hyperlink{struct_o_t_1_1_context}{Context}}\ \{\};}
\DoxyCodeLine{02809\ }
\DoxyCodeLine{02810\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_o_t_1_1_chain_context_pos}{ChainContextPos}}\ :\ \mbox{\hyperlink{struct_o_t_1_1_chain_context}{ChainContext}}\ \{\};}
\DoxyCodeLine{02811\ }
\DoxyCodeLine{02812\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_o_t_1_1_extension_pos}{ExtensionPos}}\ :\ \mbox{\hyperlink{struct_o_t_1_1_extension}{Extension}}<ExtensionPos>}
\DoxyCodeLine{02813\ \{}
\DoxyCodeLine{02814\ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_o_t_1_1_pos_lookup_sub_table}{PosLookupSubTable}}\ \mbox{\hyperlink{struct_o_t_1_1_pos_lookup_sub_table}{SubTable}};}
\DoxyCodeLine{02815\ \};}
\DoxyCodeLine{02816\ }
\DoxyCodeLine{02817\ }
\DoxyCodeLine{02818\ }
\DoxyCodeLine{02819\ \textcolor{comment}{/*}}
\DoxyCodeLine{02820\ \textcolor{comment}{\ *\ PosLookup}}
\DoxyCodeLine{02821\ \textcolor{comment}{\ */}}
\DoxyCodeLine{02822\ }
\DoxyCodeLine{02823\ }
\DoxyCodeLine{02824\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_o_t_1_1_pos_lookup_sub_table}{PosLookupSubTable}}}
\DoxyCodeLine{02825\ \{}
\DoxyCodeLine{02826\ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_o_t_1_1_lookup}{Lookup}};}
\DoxyCodeLine{02827\ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_o_t_1_1_pos_lookup}{PosLookup}};}
\DoxyCodeLine{02828\ }
\DoxyCodeLine{02829\ \ \ \textcolor{keyword}{enum}\ Type\ \{}
\DoxyCodeLine{02830\ \ \ \ \ Single\ \ \ \ \ \ =\ 1,}
\DoxyCodeLine{02831\ \ \ \ \ Pair\ \ \ \ \ \ \ \ =\ 2,}
\DoxyCodeLine{02832\ \ \ \ \ Cursive\ \ \ \ \ =\ 3,}
\DoxyCodeLine{02833\ \ \ \ \ MarkBase\ \ \ \ \ \ \ \ =\ 4,}
\DoxyCodeLine{02834\ \ \ \ \ MarkLig\ \ \ \ \ =\ 5,}
\DoxyCodeLine{02835\ \ \ \ \ MarkMark\ \ \ \ \ \ \ \ =\ 6,}
\DoxyCodeLine{02836\ \ \ \ \ \mbox{\hyperlink{struct_o_t_1_1_context}{Context}}\ \ \ \ \ \ =\ 7,}
\DoxyCodeLine{02837\ \ \ \ \ \mbox{\hyperlink{struct_o_t_1_1_chain_context}{ChainContext}}\ \ \ \ =\ 8,}
\DoxyCodeLine{02838\ \ \ \ \ \mbox{\hyperlink{struct_o_t_1_1_extension}{Extension}}\ \ \ \ \ \ =\ 9}
\DoxyCodeLine{02839\ \ \ \};}
\DoxyCodeLine{02840\ }
\DoxyCodeLine{02841\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ context\_t,\ \textcolor{keyword}{typename}\ ...Ts>}
\DoxyCodeLine{02842\ \ \ \textcolor{keyword}{typename}\ context\_t::return\_t\ dispatch\ (context\_t\ *c,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ lookup\_type,\ Ts\&\&...\ ds)\textcolor{keyword}{\ const}}
\DoxyCodeLine{02843\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{02844\ \ \ \ \ TRACE\_DISPATCH\ (\textcolor{keyword}{this},\ lookup\_type);}
\DoxyCodeLine{02845\ \ \ \ \ \textcolor{keywordflow}{switch}\ (lookup\_type)\ \{}
\DoxyCodeLine{02846\ \ \ \ \ \textcolor{keywordflow}{case}\ Single:\ \ \ \ \ \ \ \ return\_trace\ (u.single.dispatch\ (c,\ std::forward<Ts>\ (ds)...));}
\DoxyCodeLine{02847\ \ \ \ \ \textcolor{keywordflow}{case}\ Pair:\ \ \ \ \ \ \ \ \ \ return\_trace\ (u.pair.dispatch\ (c,\ std::forward<Ts>\ (ds)...));}
\DoxyCodeLine{02848\ \ \ \ \ \textcolor{keywordflow}{case}\ Cursive:\ \ \ \ \ \ \ return\_trace\ (u.cursive.dispatch\ (c,\ std::forward<Ts>\ (ds)...));}
\DoxyCodeLine{02849\ \ \ \ \ \textcolor{keywordflow}{case}\ MarkBase:\ \ \ \ \ \ return\_trace\ (u.markBase.dispatch\ (c,\ std::forward<Ts>\ (ds)...));}
\DoxyCodeLine{02850\ \ \ \ \ \textcolor{keywordflow}{case}\ MarkLig:\ \ \ \ \ \ \ return\_trace\ (u.markLig.dispatch\ (c,\ std::forward<Ts>\ (ds)...));}
\DoxyCodeLine{02851\ \ \ \ \ \textcolor{keywordflow}{case}\ MarkMark:\ \ \ \ \ \ return\_trace\ (u.markMark.dispatch\ (c,\ std::forward<Ts>\ (ds)...));}
\DoxyCodeLine{02852\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{struct_o_t_1_1_context}{Context}}:\ \ \ \ \ \ \ \ return\_trace\ (u.context.dispatch\ (c,\ std::forward<Ts>\ (ds)...));}
\DoxyCodeLine{02853\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{struct_o_t_1_1_chain_context}{ChainContext}}:\ \ \ \ \ \ return\_trace\ (u.chainContext.dispatch\ (c,\ std::forward<Ts>\ (ds)...));}
\DoxyCodeLine{02854\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{struct_o_t_1_1_extension}{Extension}}:\ \ \ \ \ \ \ \ return\_trace\ (u.extension.dispatch\ (c,\ std::forward<Ts>\ (ds)...));}
\DoxyCodeLine{02855\ \ \ \ \ \textcolor{keywordflow}{default}:\ \ \ \ \ \ \ \ \ \ \ \ return\_trace\ (c-\/>default\_return\_value\ ());}
\DoxyCodeLine{02856\ \ \ \ \ \}}
\DoxyCodeLine{02857\ \ \ \}}
\DoxyCodeLine{02858\ }
\DoxyCodeLine{02859\ \ \ \textcolor{keywordtype}{bool}\ intersects\ (\textcolor{keyword}{const}\ \mbox{\hyperlink{structhb__set__t}{hb\_set\_t}}\ *glyphs,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ lookup\_type)\textcolor{keyword}{\ const}}
\DoxyCodeLine{02860\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{02861\ \ \ \ \ \mbox{\hyperlink{struct_o_t_1_1hb__intersects__context__t}{hb\_intersects\_context\_t}}\ c\ (glyphs);}
\DoxyCodeLine{02862\ \ \ \ \ \textcolor{keywordflow}{return}\ dispatch\ (\&c,\ lookup\_type);}
\DoxyCodeLine{02863\ \ \ \}}
\DoxyCodeLine{02864\ }
\DoxyCodeLine{02865\ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{02866\ \ \ \textcolor{keyword}{union\ }\{}
\DoxyCodeLine{02867\ \ \ \mbox{\hyperlink{struct_o_t_1_1_single_pos}{SinglePos}}\ \ \ \ \ \ \ \ single;}
\DoxyCodeLine{02868\ \ \ \mbox{\hyperlink{struct_o_t_1_1_pair_pos}{PairPos}}\ \ \ \ \ \ \ \ pair;}
\DoxyCodeLine{02869\ \ \ \mbox{\hyperlink{struct_o_t_1_1_cursive_pos}{CursivePos}}\ \ \ \ \ \ cursive;}
\DoxyCodeLine{02870\ \ \ \mbox{\hyperlink{struct_o_t_1_1_mark_base_pos}{MarkBasePos}}\ \ \ \ \ \ \ \ markBase;}
\DoxyCodeLine{02871\ \ \ \mbox{\hyperlink{struct_o_t_1_1_mark_lig_pos}{MarkLigPos}}\ \ \ \ \ \ markLig;}
\DoxyCodeLine{02872\ \ \ \mbox{\hyperlink{struct_o_t_1_1_mark_mark_pos}{MarkMarkPos}}\ \ \ \ \ \ \ \ markMark;}
\DoxyCodeLine{02873\ \ \ \mbox{\hyperlink{struct_o_t_1_1_context_pos}{ContextPos}}\ \ \ \ \ \ context;}
\DoxyCodeLine{02874\ \ \ \mbox{\hyperlink{struct_o_t_1_1_chain_context_pos}{ChainContextPos}}\ \ \ \ chainContext;}
\DoxyCodeLine{02875\ \ \ \mbox{\hyperlink{struct_o_t_1_1_extension_pos}{ExtensionPos}}\ \ \ \ \ \ extension;}
\DoxyCodeLine{02876\ \ \ \}\ u;}
\DoxyCodeLine{02877\ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{02878\ \ \ DEFINE\_SIZE\_MIN\ (0);}
\DoxyCodeLine{02879\ \};}
\DoxyCodeLine{02880\ }
\DoxyCodeLine{02881\ }
\DoxyCodeLine{02882\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_o_t_1_1_pos_lookup}{PosLookup}}\ :\ \mbox{\hyperlink{struct_o_t_1_1_lookup}{Lookup}}}
\DoxyCodeLine{02883\ \{}
\DoxyCodeLine{02884\ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_o_t_1_1_pos_lookup_sub_table}{PosLookupSubTable}}\ \mbox{\hyperlink{struct_o_t_1_1_pos_lookup_sub_table}{SubTable}};}
\DoxyCodeLine{02885\ }
\DoxyCodeLine{02886\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1_pos_lookup_sub_table}{SubTable}}\&\ get\_subtable\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ i)\textcolor{keyword}{\ const}}
\DoxyCodeLine{02887\ \textcolor{keyword}{\ \ }\{\ \textcolor{keywordflow}{return}\ Lookup::get\_subtable<SubTable>\ (i);\ \}}
\DoxyCodeLine{02888\ }
\DoxyCodeLine{02889\ \ \ \textcolor{keywordtype}{bool}\ is\_reverse\ ()\textcolor{keyword}{\ const}}
\DoxyCodeLine{02890\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{02891\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{02892\ \ \ \}}
\DoxyCodeLine{02893\ }
\DoxyCodeLine{02894\ \ \ \textcolor{keywordtype}{bool}\ apply\ (\mbox{\hyperlink{struct_o_t_1_1hb__ot__apply__context__t}{hb\_ot\_apply\_context\_t}}\ *c)\textcolor{keyword}{\ const}}
\DoxyCodeLine{02895\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{02896\ \ \ \ \ TRACE\_APPLY\ (\textcolor{keyword}{this});}
\DoxyCodeLine{02897\ \ \ \ \ return\_trace\ (dispatch\ (c));}
\DoxyCodeLine{02898\ \ \ \}}
\DoxyCodeLine{02899\ }
\DoxyCodeLine{02900\ \ \ \textcolor{keywordtype}{bool}\ intersects\ (\textcolor{keyword}{const}\ \mbox{\hyperlink{structhb__set__t}{hb\_set\_t}}\ *glyphs)\textcolor{keyword}{\ const}}
\DoxyCodeLine{02901\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{02902\ \ \ \ \ \mbox{\hyperlink{struct_o_t_1_1hb__intersects__context__t}{hb\_intersects\_context\_t}}\ c\ (glyphs);}
\DoxyCodeLine{02903\ \ \ \ \ \textcolor{keywordflow}{return}\ dispatch\ (\&c);}
\DoxyCodeLine{02904\ \ \ \}}
\DoxyCodeLine{02905\ }
\DoxyCodeLine{02906\ \ \ \mbox{\hyperlink{structhb__empty__t}{hb\_collect\_glyphs\_context\_t::return\_t}}\ collect\_glyphs\ (\mbox{\hyperlink{struct_o_t_1_1hb__collect__glyphs__context__t}{hb\_collect\_glyphs\_context\_t}}\ *c)\textcolor{keyword}{\ const}}
\DoxyCodeLine{02907\ \textcolor{keyword}{\ \ }\{\ \textcolor{keywordflow}{return}\ dispatch\ (c);\ \}}
\DoxyCodeLine{02908\ }
\DoxyCodeLine{02909\ \ \ \mbox{\hyperlink{structhb__empty__t}{hb\_closure\_lookups\_context\_t::return\_t}}\ closure\_lookups\ (\mbox{\hyperlink{struct_o_t_1_1hb__closure__lookups__context__t}{hb\_closure\_lookups\_context\_t}}\ *c,\ \textcolor{keywordtype}{unsigned}\ this\_index)\textcolor{keyword}{\ const}}
\DoxyCodeLine{02910\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{02911\ \ \ \ \ \textcolor{keywordflow}{if}\ (c-\/>is\_lookup\_visited\ (this\_index))}
\DoxyCodeLine{02912\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ hb\_closure\_lookups\_context\_t::default\_return\_value\ ();}
\DoxyCodeLine{02913\ }
\DoxyCodeLine{02914\ \ \ \ \ c-\/>set\_lookup\_visited\ (this\_index);}
\DoxyCodeLine{02915\ \ \ \ \ \textcolor{keywordflow}{if}\ (!intersects\ (c-\/>glyphs))}
\DoxyCodeLine{02916\ \ \ \ \ \{}
\DoxyCodeLine{02917\ \ \ \ \ \ \ c-\/>set\_lookup\_inactive\ (this\_index);}
\DoxyCodeLine{02918\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ hb\_closure\_lookups\_context\_t::default\_return\_value\ ();}
\DoxyCodeLine{02919\ \ \ \ \ \}}
\DoxyCodeLine{02920\ \ \ \ \ c-\/>set\_recurse\_func\ (dispatch\_closure\_lookups\_recurse\_func);}
\DoxyCodeLine{02921\ }
\DoxyCodeLine{02922\ \ \ \ \ \mbox{\hyperlink{structhb__empty__t}{hb\_closure\_lookups\_context\_t::return\_t}}\ ret\ =\ dispatch\ (c);}
\DoxyCodeLine{02923\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{02924\ \ \ \}}
\DoxyCodeLine{02925\ }
\DoxyCodeLine{02926\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ set\_t>}
\DoxyCodeLine{02927\ \ \ \textcolor{keywordtype}{void}\ collect\_coverage\ (set\_t\ *glyphs)\textcolor{keyword}{\ const}}
\DoxyCodeLine{02928\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{02929\ \ \ \ \ \mbox{\hyperlink{struct_o_t_1_1hb__collect__coverage__context__t}{hb\_collect\_coverage\_context\_t<set\_t>}}\ c\ (glyphs);}
\DoxyCodeLine{02930\ \ \ \ \ dispatch\ (\&c);}
\DoxyCodeLine{02931\ \ \ \}}
\DoxyCodeLine{02932\ }
\DoxyCodeLine{02933\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ apply\_recurse\_func\ (\mbox{\hyperlink{struct_o_t_1_1hb__ot__apply__context__t}{hb\_ot\_apply\_context\_t}}\ *c,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ lookup\_index);}
\DoxyCodeLine{02934\ }
\DoxyCodeLine{02935\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ context\_t>}
\DoxyCodeLine{02936\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{typename}\ context\_t::return\_t\ dispatch\_recurse\_func\ (context\_t\ *c,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ lookup\_index);}
\DoxyCodeLine{02937\ }
\DoxyCodeLine{02938\ \ \ HB\_INTERNAL\ \textcolor{keyword}{static}\ \mbox{\hyperlink{structhb__empty__t}{hb\_closure\_lookups\_context\_t::return\_t}}\ dispatch\_closure\_lookups\_recurse\_func\ (\mbox{\hyperlink{struct_o_t_1_1hb__closure__lookups__context__t}{hb\_closure\_lookups\_context\_t}}\ *c,\ \textcolor{keywordtype}{unsigned}\ this\_index);}
\DoxyCodeLine{02939\ }
\DoxyCodeLine{02940\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ context\_t,\ \textcolor{keyword}{typename}\ ...Ts>}
\DoxyCodeLine{02941\ \ \ \textcolor{keyword}{typename}\ context\_t::return\_t\ dispatch\ (context\_t\ *c,\ Ts\&\&...\ ds)\textcolor{keyword}{\ const}}
\DoxyCodeLine{02942\ \textcolor{keyword}{\ \ }\{\ \textcolor{keywordflow}{return}\ Lookup::dispatch<SubTable>\ (c,\ std::forward<Ts>\ (ds)...);\ \}}
\DoxyCodeLine{02943\ }
\DoxyCodeLine{02944\ \ \ \textcolor{keywordtype}{bool}\ subset\ (\mbox{\hyperlink{structhb__subset__context__t}{hb\_subset\_context\_t}}\ *c)\textcolor{keyword}{\ const}}
\DoxyCodeLine{02945\ \textcolor{keyword}{\ \ }\{\ \textcolor{keywordflow}{return}\ Lookup::subset<SubTable>\ (c);\ \}}
\DoxyCodeLine{02946\ }
\DoxyCodeLine{02947\ \ \ \textcolor{keywordtype}{bool}\ sanitize\ (\mbox{\hyperlink{structhb__sanitize__context__t}{hb\_sanitize\_context\_t}}\ *c)\textcolor{keyword}{\ const}}
\DoxyCodeLine{02948\ \textcolor{keyword}{\ \ }\{\ \textcolor{keywordflow}{return}\ Lookup::sanitize<SubTable>\ (c);\ \}}
\DoxyCodeLine{02949\ \};}
\DoxyCodeLine{02950\ }
\DoxyCodeLine{02951\ \textcolor{comment}{/*}}
\DoxyCodeLine{02952\ \textcolor{comment}{\ *\ GPOS\ -\/-\/\ Glyph\ Positioning}}
\DoxyCodeLine{02953\ \textcolor{comment}{\ *\ https://docs.microsoft.com/en-\/us/typography/opentype/spec/gpos}}
\DoxyCodeLine{02954\ \textcolor{comment}{\ */}}
\DoxyCodeLine{02955\ }
\DoxyCodeLine{02956\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_o_t_1_1_g_p_o_s}{GPOS}}\ :\ \mbox{\hyperlink{struct_o_t_1_1_g_s_u_b_g_p_o_s}{GSUBGPOS}}}
\DoxyCodeLine{02957\ \{}
\DoxyCodeLine{02958\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ hb\_tag\_t\ tableTag\ =\ HB\_OT\_TAG\_GPOS;}
\DoxyCodeLine{02959\ }
\DoxyCodeLine{02960\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1_pos_lookup}{PosLookup}}\&\ get\_lookup\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ i)\textcolor{keyword}{\ const}}
\DoxyCodeLine{02961\ \textcolor{keyword}{\ \ }\{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}\textcolor{keyword}{const\ }\mbox{\hyperlink{struct_o_t_1_1_pos_lookup}{PosLookup}}\ \&\textcolor{keyword}{>}\ (GSUBGPOS::get\_lookup\ (i));\ \}}
\DoxyCodeLine{02962\ }
\DoxyCodeLine{02963\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ position\_start\ (\mbox{\hyperlink{structhb__font__t}{hb\_font\_t}}\ *font,\ \mbox{\hyperlink{structhb__buffer__t}{hb\_buffer\_t}}\ *\mbox{\hyperlink{classbuffer}{buffer}});}
\DoxyCodeLine{02964\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ position\_finish\_advances\ (\mbox{\hyperlink{structhb__font__t}{hb\_font\_t}}\ *font,\ \mbox{\hyperlink{structhb__buffer__t}{hb\_buffer\_t}}\ *\mbox{\hyperlink{classbuffer}{buffer}});}
\DoxyCodeLine{02965\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ position\_finish\_offsets\ (\mbox{\hyperlink{structhb__font__t}{hb\_font\_t}}\ *font,\ \mbox{\hyperlink{structhb__buffer__t}{hb\_buffer\_t}}\ *\mbox{\hyperlink{classbuffer}{buffer}});}
\DoxyCodeLine{02966\ }
\DoxyCodeLine{02967\ \ \ \textcolor{keywordtype}{bool}\ subset\ (\mbox{\hyperlink{structhb__subset__context__t}{hb\_subset\_context\_t}}\ *c)\textcolor{keyword}{\ const}}
\DoxyCodeLine{02968\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{02969\ \ \ \ \ \mbox{\hyperlink{struct_o_t_1_1hb__subset__layout__context__t}{hb\_subset\_layout\_context\_t}}\ l\ (c,\ tableTag,\ c-\/>plan-\/>gpos\_lookups,\ c-\/>plan-\/>gpos\_langsys,\ c-\/>plan-\/>gpos\_features);}
\DoxyCodeLine{02970\ \ \ \ \ \textcolor{keywordflow}{return}\ GSUBGPOS::subset<PosLookup>\ (\&l);}
\DoxyCodeLine{02971\ \ \ \}}
\DoxyCodeLine{02972\ }
\DoxyCodeLine{02973\ \ \ \textcolor{keywordtype}{bool}\ sanitize\ (\mbox{\hyperlink{structhb__sanitize__context__t}{hb\_sanitize\_context\_t}}\ *c)\textcolor{keyword}{\ const}}
\DoxyCodeLine{02974\ \textcolor{keyword}{\ \ }\{\ \textcolor{keywordflow}{return}\ GSUBGPOS::sanitize<PosLookup>\ (c);\ \}}
\DoxyCodeLine{02975\ }
\DoxyCodeLine{02976\ \ \ HB\_INTERNAL\ \textcolor{keywordtype}{bool}\ is\_blocklisted\ (\mbox{\hyperlink{structhb__blob__t}{hb\_blob\_t}}\ *blob,}
\DoxyCodeLine{02977\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structhb__face__t}{hb\_face\_t}}\ *face)\ \textcolor{keyword}{const};}
\DoxyCodeLine{02978\ }
\DoxyCodeLine{02979\ \ \ \textcolor{keywordtype}{void}\ collect\_variation\_indices\ (\mbox{\hyperlink{struct_o_t_1_1hb__collect__variation__indices__context__t}{hb\_collect\_variation\_indices\_context\_t}}\ *c)\textcolor{keyword}{\ const}}
\DoxyCodeLine{02980\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{02981\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ i\ =\ 0;\ i\ <\ GSUBGPOS::get\_lookup\_count\ ();\ i++)}
\DoxyCodeLine{02982\ \ \ \ \ \{}
\DoxyCodeLine{02983\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!c-\/>gpos\_lookups-\/>has\ (i))\ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02984\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1_pos_lookup}{PosLookup}}\ \&l\ =\ get\_lookup\ (i);}
\DoxyCodeLine{02985\ \ \ \ \ \ \ l.dispatch\ (c);}
\DoxyCodeLine{02986\ \ \ \ \ \}}
\DoxyCodeLine{02987\ \ \ \}}
\DoxyCodeLine{02988\ }
\DoxyCodeLine{02989\ \ \ \textcolor{keywordtype}{void}\ closure\_lookups\ (\mbox{\hyperlink{structhb__face__t}{hb\_face\_t}}\ \ \ \ \ \ *face,}
\DoxyCodeLine{02990\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structhb__set__t}{hb\_set\_t}}\ *glyphs,}
\DoxyCodeLine{02991\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structhb__set__t}{hb\_set\_t}}\ \ \ \ \ \ \ *lookup\_indexes\ \textcolor{comment}{/*\ IN/OUT\ */})\textcolor{keyword}{\ const}}
\DoxyCodeLine{02992\ \textcolor{keyword}{\ \ }\{\ GSUBGPOS::closure\_lookups<PosLookup>\ (face,\ glyphs,\ lookup\_indexes);\ \}}
\DoxyCodeLine{02993\ }
\DoxyCodeLine{02994\ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{struct_o_t_1_1_g_s_u_b_g_p_o_s_1_1accelerator__t}{GSUBGPOS::accelerator\_t<GPOS>}}\ \mbox{\hyperlink{struct_o_t_1_1_g_s_u_b_g_p_o_s_1_1accelerator__t}{accelerator\_t}};}
\DoxyCodeLine{02995\ \};}
\DoxyCodeLine{02996\ }
\DoxyCodeLine{02997\ }
\DoxyCodeLine{02998\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}}
\DoxyCodeLine{02999\ reverse\_cursive\_minor\_offset\ (\mbox{\hyperlink{structhb__glyph__position__t}{hb\_glyph\_position\_t}}\ *pos,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ i,\ hb\_direction\_t\ direction,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ new\_parent)}
\DoxyCodeLine{03000\ \{}
\DoxyCodeLine{03001\ \ \ \textcolor{keywordtype}{int}\ chain\ =\ pos[i].attach\_chain(),\ type\ =\ pos[i].attach\_type();}
\DoxyCodeLine{03002\ \ \ \textcolor{keywordflow}{if}\ (likely\ (!chain\ ||\ 0\ ==\ (type\ \&\ ATTACH\_TYPE\_CURSIVE)))}
\DoxyCodeLine{03003\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{03004\ }
\DoxyCodeLine{03005\ \ \ pos[i].attach\_chain()\ =\ 0;}
\DoxyCodeLine{03006\ }
\DoxyCodeLine{03007\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ j\ =\ (int)\ i\ +\ chain;}
\DoxyCodeLine{03008\ }
\DoxyCodeLine{03009\ \ \ \textcolor{comment}{/*\ Stop\ if\ we\ see\ new\ parent\ in\ the\ chain.\ */}}
\DoxyCodeLine{03010\ \ \ \textcolor{keywordflow}{if}\ (j\ ==\ new\_parent)}
\DoxyCodeLine{03011\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{03012\ }
\DoxyCodeLine{03013\ \ \ reverse\_cursive\_minor\_offset\ (pos,\ j,\ direction,\ new\_parent);}
\DoxyCodeLine{03014\ }
\DoxyCodeLine{03015\ \ \ \textcolor{keywordflow}{if}\ (HB\_DIRECTION\_IS\_HORIZONTAL\ (direction))}
\DoxyCodeLine{03016\ \ \ \ \ pos[j].y\_offset\ =\ -\/pos[i].y\_offset;}
\DoxyCodeLine{03017\ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{03018\ \ \ \ \ pos[j].x\_offset\ =\ -\/pos[i].x\_offset;}
\DoxyCodeLine{03019\ }
\DoxyCodeLine{03020\ \ \ pos[j].attach\_chain()\ =\ -\/chain;}
\DoxyCodeLine{03021\ \ \ pos[j].attach\_type()\ =\ type;}
\DoxyCodeLine{03022\ \}}
\DoxyCodeLine{03023\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}}
\DoxyCodeLine{03024\ propagate\_attachment\_offsets\ (\mbox{\hyperlink{structhb__glyph__position__t}{hb\_glyph\_position\_t}}\ *pos,}
\DoxyCodeLine{03025\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ len,}
\DoxyCodeLine{03026\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ i,}
\DoxyCodeLine{03027\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ hb\_direction\_t\ direction)}
\DoxyCodeLine{03028\ \{}
\DoxyCodeLine{03029\ \ \ \textcolor{comment}{/*\ Adjusts\ offsets\ of\ attached\ glyphs\ (both\ cursive\ and\ mark)\ to\ accumulate}}
\DoxyCodeLine{03030\ \textcolor{comment}{\ \ \ *\ offset\ of\ glyph\ they\ are\ attached\ to.\ */}}
\DoxyCodeLine{03031\ \ \ \textcolor{keywordtype}{int}\ chain\ =\ pos[i].attach\_chain(),\ type\ =\ pos[i].attach\_type();}
\DoxyCodeLine{03032\ \ \ \textcolor{keywordflow}{if}\ (likely\ (!chain))}
\DoxyCodeLine{03033\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{03034\ }
\DoxyCodeLine{03035\ \ \ pos[i].attach\_chain()\ =\ 0;}
\DoxyCodeLine{03036\ }
\DoxyCodeLine{03037\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ j\ =\ (int)\ i\ +\ chain;}
\DoxyCodeLine{03038\ }
\DoxyCodeLine{03039\ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (j\ >=\ len))}
\DoxyCodeLine{03040\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{03041\ }
\DoxyCodeLine{03042\ \ \ propagate\_attachment\_offsets\ (pos,\ len,\ j,\ direction);}
\DoxyCodeLine{03043\ }
\DoxyCodeLine{03044\ \ \ assert\ (!!(type\ \&\ ATTACH\_TYPE\_MARK)\ \string^\ !!(type\ \&\ ATTACH\_TYPE\_CURSIVE));}
\DoxyCodeLine{03045\ }
\DoxyCodeLine{03046\ \ \ \textcolor{keywordflow}{if}\ (type\ \&\ ATTACH\_TYPE\_CURSIVE)}
\DoxyCodeLine{03047\ \ \ \{}
\DoxyCodeLine{03048\ \ \ \ \ \textcolor{keywordflow}{if}\ (HB\_DIRECTION\_IS\_HORIZONTAL\ (direction))}
\DoxyCodeLine{03049\ \ \ \ \ \ \ pos[i].y\_offset\ +=\ pos[j].y\_offset;}
\DoxyCodeLine{03050\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{03051\ \ \ \ \ \ \ pos[i].x\_offset\ +=\ pos[j].x\_offset;}
\DoxyCodeLine{03052\ \ \ \}}
\DoxyCodeLine{03053\ \ \ \textcolor{keywordflow}{else}\ \textcolor{comment}{/*if\ (type\ \&\ ATTACH\_TYPE\_MARK)*/}}
\DoxyCodeLine{03054\ \ \ \{}
\DoxyCodeLine{03055\ \ \ \ \ pos[i].x\_offset\ +=\ pos[j].x\_offset;}
\DoxyCodeLine{03056\ \ \ \ \ pos[i].y\_offset\ +=\ pos[j].y\_offset;}
\DoxyCodeLine{03057\ }
\DoxyCodeLine{03058\ \ \ \ \ assert\ (j\ <\ i);}
\DoxyCodeLine{03059\ \ \ \ \ \textcolor{keywordflow}{if}\ (HB\_DIRECTION\_IS\_FORWARD\ (direction))}
\DoxyCodeLine{03060\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ k\ =\ j;\ k\ <\ i;\ k++)\ \{}
\DoxyCodeLine{03061\ \ \ \ \ pos[i].x\_offset\ -\/=\ pos[k].x\_advance;}
\DoxyCodeLine{03062\ \ \ \ \ pos[i].y\_offset\ -\/=\ pos[k].y\_advance;}
\DoxyCodeLine{03063\ \ \ \ \ \ \ \}}
\DoxyCodeLine{03064\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{03065\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ k\ =\ j\ +\ 1;\ k\ <\ i\ +\ 1;\ k++)\ \{}
\DoxyCodeLine{03066\ \ \ \ \ pos[i].x\_offset\ +=\ pos[k].x\_advance;}
\DoxyCodeLine{03067\ \ \ \ \ pos[i].y\_offset\ +=\ pos[k].y\_advance;}
\DoxyCodeLine{03068\ \ \ \ \ \ \ \}}
\DoxyCodeLine{03069\ \ \ \}}
\DoxyCodeLine{03070\ \}}
\DoxyCodeLine{03071\ }
\DoxyCodeLine{03072\ \textcolor{keywordtype}{void}}
\DoxyCodeLine{03073\ GPOS::position\_start\ (\mbox{\hyperlink{structhb__font__t}{hb\_font\_t}}\ *font\ HB\_UNUSED,\ \mbox{\hyperlink{structhb__buffer__t}{hb\_buffer\_t}}\ *\mbox{\hyperlink{classbuffer}{buffer}})}
\DoxyCodeLine{03074\ \{}
\DoxyCodeLine{03075\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ count\ =\ \mbox{\hyperlink{classbuffer}{buffer}}-\/>len;}
\DoxyCodeLine{03076\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ count;\ i++)}
\DoxyCodeLine{03077\ \ \ \ \ \mbox{\hyperlink{classbuffer}{buffer}}-\/>pos[i].attach\_chain()\ =\ \mbox{\hyperlink{classbuffer}{buffer}}-\/>pos[i].attach\_type()\ =\ 0;}
\DoxyCodeLine{03078\ \}}
\DoxyCodeLine{03079\ }
\DoxyCodeLine{03080\ \textcolor{keywordtype}{void}}
\DoxyCodeLine{03081\ GPOS::position\_finish\_advances\ (\mbox{\hyperlink{structhb__font__t}{hb\_font\_t}}\ *font\ HB\_UNUSED,\ \mbox{\hyperlink{structhb__buffer__t}{hb\_buffer\_t}}\ *\mbox{\hyperlink{classbuffer}{buffer}}\ HB\_UNUSED)}
\DoxyCodeLine{03082\ \{}
\DoxyCodeLine{03083\ \ \ \textcolor{comment}{//\_hb\_buffer\_assert\_gsubgpos\_vars\ (buffer);}}
\DoxyCodeLine{03084\ \}}
\DoxyCodeLine{03085\ }
\DoxyCodeLine{03086\ \textcolor{keywordtype}{void}}
\DoxyCodeLine{03087\ GPOS::position\_finish\_offsets\ (\mbox{\hyperlink{structhb__font__t}{hb\_font\_t}}\ *font,\ \mbox{\hyperlink{structhb__buffer__t}{hb\_buffer\_t}}\ *\mbox{\hyperlink{classbuffer}{buffer}})}
\DoxyCodeLine{03088\ \{}
\DoxyCodeLine{03089\ \ \ \_hb\_buffer\_assert\_gsubgpos\_vars\ (\mbox{\hyperlink{classbuffer}{buffer}});}
\DoxyCodeLine{03090\ }
\DoxyCodeLine{03091\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ len;}
\DoxyCodeLine{03092\ \ \ \mbox{\hyperlink{structhb__glyph__position__t}{hb\_glyph\_position\_t}}\ *pos\ =\ hb\_buffer\_get\_glyph\_positions\ (\mbox{\hyperlink{classbuffer}{buffer}},\ \&len);}
\DoxyCodeLine{03093\ \ \ hb\_direction\_t\ direction\ =\ \mbox{\hyperlink{classbuffer}{buffer}}-\/>props.direction;}
\DoxyCodeLine{03094\ }
\DoxyCodeLine{03095\ \ \ \textcolor{comment}{/*\ Handle\ attachments\ */}}
\DoxyCodeLine{03096\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classbuffer}{buffer}}-\/>scratch\_flags\ \&\ HB\_BUFFER\_SCRATCH\_FLAG\_HAS\_GPOS\_ATTACHMENT)}
\DoxyCodeLine{03097\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ i\ =\ 0;\ i\ <\ len;\ i++)}
\DoxyCodeLine{03098\ \ \ \ \ \ \ propagate\_attachment\_offsets\ (pos,\ len,\ i,\ direction);}
\DoxyCodeLine{03099\ }
\DoxyCodeLine{03100\ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (font-\/>slant))}
\DoxyCodeLine{03101\ \ \ \{}
\DoxyCodeLine{03102\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ i\ =\ 0;\ i\ <\ len;\ i++)}
\DoxyCodeLine{03103\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (pos[i].y\_offset))}
\DoxyCodeLine{03104\ \ \ \ \ \ \ \ \ pos[i].x\_offset\ +=\ \_hb\_roundf\ (font-\/>slant\_xy\ *\ pos[i].y\_offset);}
\DoxyCodeLine{03105\ \ \ \}}
\DoxyCodeLine{03106\ \}}
\DoxyCodeLine{03107\ }
\DoxyCodeLine{03108\ }
\DoxyCodeLine{03109\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_o_t_1_1_g_p_o_s__accelerator__t}{GPOS\_accelerator\_t}}\ :\ \mbox{\hyperlink{struct_o_t_1_1_g_s_u_b_g_p_o_s_1_1accelerator__t}{GPOS::accelerator\_t}}\ \{}
\DoxyCodeLine{03110\ \ \ \mbox{\hyperlink{struct_o_t_1_1_g_p_o_s__accelerator__t}{GPOS\_accelerator\_t}}\ (\mbox{\hyperlink{structhb__face__t}{hb\_face\_t}}\ *face)\ :\ \mbox{\hyperlink{struct_o_t_1_1_g_s_u_b_g_p_o_s_1_1accelerator__t}{GPOS::accelerator\_t}}\ (face)\ \{\}}
\DoxyCodeLine{03111\ \};}
\DoxyCodeLine{03112\ }
\DoxyCodeLine{03113\ }
\DoxyCodeLine{03114\ \textcolor{comment}{/*\ Out-\/of-\/class\ implementation\ for\ methods\ recursing\ */}}
\DoxyCodeLine{03115\ }
\DoxyCodeLine{03116\ \textcolor{preprocessor}{\#ifndef\ HB\_NO\_OT\_LAYOUT}}
\DoxyCodeLine{03117\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ context\_t>}
\DoxyCodeLine{03118\ \textcolor{comment}{/*static*/}\ \textcolor{keyword}{typename}\ context\_t::return\_t\ PosLookup::dispatch\_recurse\_func\ (context\_t\ *c,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ lookup\_index)}
\DoxyCodeLine{03119\ \{}
\DoxyCodeLine{03120\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1_pos_lookup}{PosLookup}}\ \&l\ =\ c-\/>face-\/>table.GPOS.get\_relaxed\ ()-\/>table-\/>get\_lookup\ (lookup\_index);}
\DoxyCodeLine{03121\ \ \ \textcolor{keywordflow}{return}\ l.dispatch\ (c);}
\DoxyCodeLine{03122\ \}}
\DoxyCodeLine{03123\ }
\DoxyCodeLine{03124\ \textcolor{comment}{/*static*/}\ \textcolor{keyword}{inline}\ hb\_closure\_lookups\_context\_t::return\_t\ PosLookup::dispatch\_closure\_lookups\_recurse\_func\ (hb\_closure\_lookups\_context\_t\ *c,\ \textcolor{keywordtype}{unsigned}\ this\_index)}
\DoxyCodeLine{03125\ \{}
\DoxyCodeLine{03126\ \ \ \textcolor{keyword}{const}\ PosLookup\ \&l\ =\ c-\/>face-\/>table.GPOS.get\_relaxed\ ()-\/>table-\/>get\_lookup\ (this\_index);}
\DoxyCodeLine{03127\ \ \ \textcolor{keywordflow}{return}\ l.closure\_lookups\ (c,\ this\_index);}
\DoxyCodeLine{03128\ \}}
\DoxyCodeLine{03129\ }
\DoxyCodeLine{03130\ \textcolor{comment}{/*static*/}\ \textcolor{keywordtype}{bool}\ PosLookup::apply\_recurse\_func\ (hb\_ot\_apply\_context\_t\ *c,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ lookup\_index)}
\DoxyCodeLine{03131\ \{}
\DoxyCodeLine{03132\ \ \ \textcolor{keyword}{const}\ PosLookup\ \&l\ =\ c-\/>face-\/>table.GPOS.get\_relaxed\ ()-\/>table-\/>get\_lookup\ (lookup\_index);}
\DoxyCodeLine{03133\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ saved\_lookup\_props\ =\ c-\/>lookup\_props;}
\DoxyCodeLine{03134\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ saved\_lookup\_index\ =\ c-\/>lookup\_index;}
\DoxyCodeLine{03135\ \ \ c-\/>set\_lookup\_index\ (lookup\_index);}
\DoxyCodeLine{03136\ \ \ c-\/>set\_lookup\_props\ (l.get\_props\ ());}
\DoxyCodeLine{03137\ \ \ \textcolor{keywordtype}{bool}\ ret\ =\ l.dispatch\ (c);}
\DoxyCodeLine{03138\ \ \ c-\/>set\_lookup\_index\ (saved\_lookup\_index);}
\DoxyCodeLine{03139\ \ \ c-\/>set\_lookup\_props\ (saved\_lookup\_props);}
\DoxyCodeLine{03140\ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{03141\ \}}
\DoxyCodeLine{03142\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{03143\ }
\DoxyCodeLine{03144\ }
\DoxyCodeLine{03145\ \}\ \textcolor{comment}{/*\ namespace\ OT\ */}}
\DoxyCodeLine{03146\ }
\DoxyCodeLine{03147\ }
\DoxyCodeLine{03148\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ HB\_OT\_LAYOUT\_GPOS\_TABLE\_HH\ */}\textcolor{preprocessor}{}}

\end{DoxyCode}
