\hypertarget{hb-ot-cff1-table_8hh_source}{}\doxysection{hb-\/ot-\/cff1-\/table.hh}
\label{hb-ot-cff1-table_8hh_source}\index{AseSprite/aseprite/third\_party/harfbuzz/src/hb-\/ot-\/cff1-\/table.hh@{AseSprite/aseprite/third\_party/harfbuzz/src/hb-\/ot-\/cff1-\/table.hh}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*}}
\DoxyCodeLine{00002\ \textcolor{comment}{\ *\ Copyright\ Â©\ 2018\ Adobe\ Inc.}}
\DoxyCodeLine{00003\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00004\ \textcolor{comment}{\ *\ \ This\ is\ part\ of\ HarfBuzz,\ a\ text\ shaping\ library.}}
\DoxyCodeLine{00005\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00006\ \textcolor{comment}{\ *\ Permission\ is\ hereby\ granted,\ without\ written\ agreement\ and\ without}}
\DoxyCodeLine{00007\ \textcolor{comment}{\ *\ license\ or\ royalty\ fees,\ to\ use,\ copy,\ modify,\ and\ distribute\ this}}
\DoxyCodeLine{00008\ \textcolor{comment}{\ *\ software\ and\ its\ documentation\ for\ any\ purpose,\ provided\ that\ the}}
\DoxyCodeLine{00009\ \textcolor{comment}{\ *\ above\ copyright\ notice\ and\ the\ following\ two\ paragraphs\ appear\ in}}
\DoxyCodeLine{00010\ \textcolor{comment}{\ *\ all\ copies\ of\ this\ software.}}
\DoxyCodeLine{00011\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00012\ \textcolor{comment}{\ *\ IN\ NO\ EVENT\ SHALL\ THE\ COPYRIGHT\ HOLDER\ BE\ LIABLE\ TO\ ANY\ PARTY\ FOR}}
\DoxyCodeLine{00013\ \textcolor{comment}{\ *\ DIRECT,\ INDIRECT,\ SPECIAL,\ INCIDENTAL,\ OR\ CONSEQUENTIAL\ DAMAGES}}
\DoxyCodeLine{00014\ \textcolor{comment}{\ *\ ARISING\ OUT\ OF\ THE\ USE\ OF\ THIS\ SOFTWARE\ AND\ ITS\ DOCUMENTATION,\ EVEN}}
\DoxyCodeLine{00015\ \textcolor{comment}{\ *\ IF\ THE\ COPYRIGHT\ HOLDER\ HAS\ BEEN\ ADVISED\ OF\ THE\ POSSIBILITY\ OF\ SUCH}}
\DoxyCodeLine{00016\ \textcolor{comment}{\ *\ DAMAGE.}}
\DoxyCodeLine{00017\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00018\ \textcolor{comment}{\ *\ THE\ COPYRIGHT\ HOLDER\ SPECIFICALLY\ DISCLAIMS\ ANY\ WARRANTIES,\ INCLUDING,}}
\DoxyCodeLine{00019\ \textcolor{comment}{\ *\ BUT\ NOT\ LIMITED\ TO,\ THE\ IMPLIED\ WARRANTIES\ OF\ MERCHANTABILITY\ AND}}
\DoxyCodeLine{00020\ \textcolor{comment}{\ *\ FITNESS\ FOR\ A\ PARTICULAR\ PURPOSE.\ \ THE\ SOFTWARE\ PROVIDED\ HEREUNDER\ IS}}
\DoxyCodeLine{00021\ \textcolor{comment}{\ *\ ON\ AN\ "{}AS\ IS"{}\ BASIS,\ AND\ THE\ COPYRIGHT\ HOLDER\ HAS\ NO\ OBLIGATION\ TO}}
\DoxyCodeLine{00022\ \textcolor{comment}{\ *\ PROVIDE\ MAINTENANCE,\ SUPPORT,\ UPDATES,\ ENHANCEMENTS,\ OR\ MODIFICATIONS.}}
\DoxyCodeLine{00023\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00024\ \textcolor{comment}{\ *\ Adobe\ Author(s):\ Michiharu\ Ariza}}
\DoxyCodeLine{00025\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00027\ \textcolor{preprocessor}{\#ifndef\ HB\_OT\_CFF1\_TABLE\_HH}}
\DoxyCodeLine{00028\ \textcolor{preprocessor}{\#define\ HB\_OT\_CFF1\_TABLE\_HH}}
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00030\ \textcolor{preprocessor}{\#include\ "{}hb-\/ot-\/cff-\/common.hh"{}}}
\DoxyCodeLine{00031\ \textcolor{preprocessor}{\#include\ "{}hb-\/subset-\/cff1.hh"{}}}
\DoxyCodeLine{00032\ \textcolor{preprocessor}{\#include\ "{}hb-\/draw.hh"{}}}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00034\ \textcolor{preprocessor}{\#define\ HB\_STRING\_ARRAY\_NAME\ cff1\_std\_strings}}
\DoxyCodeLine{00035\ \textcolor{preprocessor}{\#define\ HB\_STRING\_ARRAY\_LIST\ "{}hb-\/ot-\/cff1-\/std-\/str.hh"{}}}
\DoxyCodeLine{00036\ \textcolor{preprocessor}{\#include\ "{}hb-\/string-\/array.hh"{}}}
\DoxyCodeLine{00037\ \textcolor{preprocessor}{\#undef\ HB\_STRING\_ARRAY\_LIST}}
\DoxyCodeLine{00038\ \textcolor{preprocessor}{\#undef\ HB\_STRING\_ARRAY\_NAME}}
\DoxyCodeLine{00039\ }
\DoxyCodeLine{00040\ \textcolor{keyword}{namespace\ }CFF\ \{}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00042\ \textcolor{comment}{/*}}
\DoxyCodeLine{00043\ \textcolor{comment}{\ *\ CFF\ -\/-\/\ Compact\ Font\ Format\ (CFF)}}
\DoxyCodeLine{00044\ \textcolor{comment}{\ *\ https://www.adobe.com/content/dam/acom/en/devnet/font/pdfs/5176.CFF.pdf}}
\DoxyCodeLine{00045\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00046\ \textcolor{preprocessor}{\#define\ HB\_OT\_TAG\_cff1\ HB\_TAG('C','F','F','\ ')}}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00048\ \textcolor{preprocessor}{\#define\ CFF\_UNDEF\_SID\ \ \ CFF\_UNDEF\_CODE}}
\DoxyCodeLine{00049\ }
\DoxyCodeLine{00050\ \textcolor{keyword}{enum}\ EncodingID\ \{\ StandardEncoding\ =\ 0,\ ExpertEncoding\ =\ 1\ \};}
\DoxyCodeLine{00051\ \textcolor{keyword}{enum}\ CharsetID\ \{\ ISOAdobeCharset\ =\ 0,\ ExpertCharset\ =\ 1,\ ExpertSubsetCharset\ =\ 2\ \};}
\DoxyCodeLine{00052\ }
\DoxyCodeLine{00053\ \textcolor{keyword}{typedef}\ CFFIndex<HBUINT16>\ \ CFF1Index;}
\DoxyCodeLine{00054\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Type>\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_c_f_f_1_1_c_f_f1_index_of}{CFF1IndexOf}}\ :\ \mbox{\hyperlink{struct_c_f_f_1_1_c_f_f_index_of}{CFFIndexOf}}<HBUINT16,\ Type>\ \{\};}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00056\ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{struct_c_f_f_1_1_c_f_f_index}{CFFIndex<HBUINT16>}}\ \mbox{\hyperlink{struct_c_f_f_1_1_c_f_f_index}{CFF1Index}};}
\DoxyCodeLine{00057\ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{struct_c_f_f_1_1_c_f_f_index}{CFF1Index}}\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_c_f_f_1_1_c_f_f_index}{CFF1CharStrings}};}
\DoxyCodeLine{00058\ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{struct_c_f_f_1_1_subrs}{Subrs<HBUINT16>}}\ \ \ \ \mbox{\hyperlink{struct_c_f_f_1_1_subrs}{CFF1Subrs}};}
\DoxyCodeLine{00059\ }
\DoxyCodeLine{00060\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_c_f_f_1_1_c_f_f1_f_d_select}{CFF1FDSelect}}\ :\ \mbox{\hyperlink{struct_c_f_f_1_1_f_d_select}{FDSelect}}\ \{\};}
\DoxyCodeLine{00061\ }
\DoxyCodeLine{00062\ \textcolor{comment}{/*\ Encoding\ */}}
\DoxyCodeLine{00063\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_c_f_f_1_1_encoding0}{Encoding0}}\ \{}
\DoxyCodeLine{00064\ \ \ \textcolor{keywordtype}{bool}\ sanitize\ (\mbox{\hyperlink{structhb__sanitize__context__t}{hb\_sanitize\_context\_t}}\ *c)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00065\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00066\ \ \ \ \ TRACE\_SANITIZE\ (\textcolor{keyword}{this});}
\DoxyCodeLine{00067\ \ \ \ \ return\_trace\ (codes.sanitize\ (c));}
\DoxyCodeLine{00068\ \ \ \}}
\DoxyCodeLine{00069\ }
\DoxyCodeLine{00070\ \ \ hb\_codepoint\_t\ get\_code\ (hb\_codepoint\_t\ glyph)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00071\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00072\ \ \ \ \ assert\ (glyph\ >\ 0);}
\DoxyCodeLine{00073\ \ \ \ \ glyph-\/-\/;}
\DoxyCodeLine{00074\ \ \ \ \ \textcolor{keywordflow}{if}\ (glyph\ <\ nCodes\ ())}
\DoxyCodeLine{00075\ \ \ \ \ \{}
\DoxyCodeLine{00076\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (hb\_codepoint\_t)codes[glyph];}
\DoxyCodeLine{00077\ \ \ \ \ \}}
\DoxyCodeLine{00078\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ CFF\_UNDEF\_CODE;}
\DoxyCodeLine{00080\ \ \ \}}
\DoxyCodeLine{00081\ }
\DoxyCodeLine{00082\ \ \ \mbox{\hyperlink{struct_o_t_1_1_int_type}{HBUINT8}}\ \&nCodes\ ()\ \{\ \textcolor{keywordflow}{return}\ codes.len;\ \}}
\DoxyCodeLine{00083\ \ \ \mbox{\hyperlink{struct_o_t_1_1_int_type}{HBUINT8}}\ nCodes\ ()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ codes.len;\ \}}
\DoxyCodeLine{00084\ }
\DoxyCodeLine{00085\ \ \ \mbox{\hyperlink{struct_o_t_1_1_array_of}{ArrayOf<HBUINT8,\ HBUINT8>}}\ codes;}
\DoxyCodeLine{00086\ }
\DoxyCodeLine{00087\ \ \ DEFINE\_SIZE\_ARRAY\_SIZED\ (1,\ codes);}
\DoxyCodeLine{00088\ \};}
\DoxyCodeLine{00089\ }
\DoxyCodeLine{00090\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_c_f_f_1_1_encoding1___range}{Encoding1\_Range}}\ \{}
\DoxyCodeLine{00091\ \ \ \textcolor{keywordtype}{bool}\ sanitize\ (\mbox{\hyperlink{structhb__sanitize__context__t}{hb\_sanitize\_context\_t}}\ *c)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00092\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00093\ \ \ \ \ TRACE\_SANITIZE\ (\textcolor{keyword}{this});}
\DoxyCodeLine{00094\ \ \ \ \ return\_trace\ (c-\/>check\_struct\ (\textcolor{keyword}{this}));}
\DoxyCodeLine{00095\ \ \ \}}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00097\ \ \ \mbox{\hyperlink{struct_o_t_1_1_int_type}{HBUINT8}}\ \ \ first;}
\DoxyCodeLine{00098\ \ \ \mbox{\hyperlink{struct_o_t_1_1_int_type}{HBUINT8}}\ \ \ nLeft;}
\DoxyCodeLine{00099\ }
\DoxyCodeLine{00100\ \ \ DEFINE\_SIZE\_STATIC\ (2);}
\DoxyCodeLine{00101\ \};}
\DoxyCodeLine{00102\ }
\DoxyCodeLine{00103\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_c_f_f_1_1_encoding1}{Encoding1}}\ \{}
\DoxyCodeLine{00104\ \ \ \textcolor{keywordtype}{bool}\ sanitize\ (\mbox{\hyperlink{structhb__sanitize__context__t}{hb\_sanitize\_context\_t}}\ *c)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00105\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00106\ \ \ \ \ TRACE\_SANITIZE\ (\textcolor{keyword}{this});}
\DoxyCodeLine{00107\ \ \ \ \ return\_trace\ (ranges.sanitize\ (c));}
\DoxyCodeLine{00108\ \ \ \}}
\DoxyCodeLine{00109\ }
\DoxyCodeLine{00110\ \ \ hb\_codepoint\_t\ get\_code\ (hb\_codepoint\_t\ glyph)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00111\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00112\ \ \ \ \ assert\ (glyph\ >\ 0);}
\DoxyCodeLine{00113\ \ \ \ \ glyph-\/-\/;}
\DoxyCodeLine{00114\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ nRanges\ ();\ i++)}
\DoxyCodeLine{00115\ \ \ \ \ \{}
\DoxyCodeLine{00116\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (glyph\ <=\ ranges[i].nLeft)}
\DoxyCodeLine{00117\ \ \ \ \ \ \ \{}
\DoxyCodeLine{00118\ \ \ \ \ hb\_codepoint\_t\ \mbox{\hyperlink{structcode}{code}}\ =\ (hb\_codepoint\_t)\ ranges[i].first\ +\ glyph;}
\DoxyCodeLine{00119\ \ \ \ \ \textcolor{keywordflow}{return}\ (likely\ (\mbox{\hyperlink{structcode}{code}}\ <\ 0x100)\ ?\ \mbox{\hyperlink{structcode}{code}}:\ CFF\_UNDEF\_CODE);}
\DoxyCodeLine{00120\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00121\ \ \ \ \ \ \ glyph\ -\/=\ (ranges[i].nLeft\ +\ 1);}
\DoxyCodeLine{00122\ \ \ \ \ \}}
\DoxyCodeLine{00123\ \ \ \ \ \textcolor{keywordflow}{return}\ CFF\_UNDEF\_CODE;}
\DoxyCodeLine{00124\ \ \ \}}
\DoxyCodeLine{00125\ }
\DoxyCodeLine{00126\ \ \ \mbox{\hyperlink{struct_o_t_1_1_int_type}{HBUINT8}}\ \&nRanges\ ()\ \{\ \textcolor{keywordflow}{return}\ ranges.len;\ \}}
\DoxyCodeLine{00127\ \ \ \mbox{\hyperlink{struct_o_t_1_1_int_type}{HBUINT8}}\ nRanges\ ()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ ranges.len;\ \}}
\DoxyCodeLine{00128\ }
\DoxyCodeLine{00129\ \ \ \mbox{\hyperlink{struct_o_t_1_1_array_of}{ArrayOf<Encoding1\_Range,\ HBUINT8>}}\ ranges;}
\DoxyCodeLine{00130\ }
\DoxyCodeLine{00131\ \ \ DEFINE\_SIZE\_ARRAY\_SIZED\ (1,\ ranges);}
\DoxyCodeLine{00132\ \};}
\DoxyCodeLine{00133\ }
\DoxyCodeLine{00134\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_c_f_f_1_1_supp_encoding}{SuppEncoding}}\ \{}
\DoxyCodeLine{00135\ \ \ \textcolor{keywordtype}{bool}\ sanitize\ (\mbox{\hyperlink{structhb__sanitize__context__t}{hb\_sanitize\_context\_t}}\ *c)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00136\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00137\ \ \ \ \ TRACE\_SANITIZE\ (\textcolor{keyword}{this});}
\DoxyCodeLine{00138\ \ \ \ \ return\_trace\ (c-\/>check\_struct\ (\textcolor{keyword}{this}));}
\DoxyCodeLine{00139\ \ \ \}}
\DoxyCodeLine{00140\ }
\DoxyCodeLine{00141\ \ \ \mbox{\hyperlink{struct_o_t_1_1_int_type}{HBUINT8}}\ \ \ \mbox{\hyperlink{structcode}{code}};}
\DoxyCodeLine{00142\ \ \ \mbox{\hyperlink{struct_o_t_1_1_int_type}{HBUINT16}}\ \ glyph;}
\DoxyCodeLine{00143\ }
\DoxyCodeLine{00144\ \ \ DEFINE\_SIZE\_STATIC\ (3);}
\DoxyCodeLine{00145\ \};}
\DoxyCodeLine{00146\ }
\DoxyCodeLine{00147\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_c_f_f_1_1_c_f_f1_supp_enc_data}{CFF1SuppEncData}}\ \{}
\DoxyCodeLine{00148\ \ \ \textcolor{keywordtype}{bool}\ sanitize\ (\mbox{\hyperlink{structhb__sanitize__context__t}{hb\_sanitize\_context\_t}}\ *c)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00149\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00150\ \ \ \ \ TRACE\_SANITIZE\ (\textcolor{keyword}{this});}
\DoxyCodeLine{00151\ \ \ \ \ return\_trace\ (supps.sanitize\ (c));}
\DoxyCodeLine{00152\ \ \ \}}
\DoxyCodeLine{00153\ }
\DoxyCodeLine{00154\ \ \ \textcolor{keywordtype}{void}\ get\_codes\ (hb\_codepoint\_t\ sid,\ \mbox{\hyperlink{structhb__vector__t}{hb\_vector\_t<hb\_codepoint\_t>}}\ \&codes)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00155\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00156\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ nSups\ ();\ i++)}
\DoxyCodeLine{00157\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (sid\ ==\ supps[i].glyph)}
\DoxyCodeLine{00158\ \ \ \ \ codes.push\ (supps[i].\mbox{\hyperlink{structcode}{code}});}
\DoxyCodeLine{00159\ \ \ \}}
\DoxyCodeLine{00160\ }
\DoxyCodeLine{00161\ \ \ \mbox{\hyperlink{struct_o_t_1_1_int_type}{HBUINT8}}\ \&nSups\ ()\ \{\ \textcolor{keywordflow}{return}\ supps.len;\ \}}
\DoxyCodeLine{00162\ \ \ \mbox{\hyperlink{struct_o_t_1_1_int_type}{HBUINT8}}\ nSups\ ()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ supps.len;\ \}}
\DoxyCodeLine{00163\ }
\DoxyCodeLine{00164\ \ \ \mbox{\hyperlink{struct_o_t_1_1_array_of}{ArrayOf<SuppEncoding,\ HBUINT8>}}\ supps;}
\DoxyCodeLine{00165\ }
\DoxyCodeLine{00166\ \ \ DEFINE\_SIZE\_ARRAY\_SIZED\ (1,\ supps);}
\DoxyCodeLine{00167\ \};}
\DoxyCodeLine{00168\ }
\DoxyCodeLine{00169\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_c_f_f_1_1_encoding}{Encoding}}}
\DoxyCodeLine{00170\ \{}
\DoxyCodeLine{00171\ \ \ \textcolor{comment}{/*\ serialize\ a\ fullset\ Encoding\ */}}
\DoxyCodeLine{00172\ \ \ \textcolor{keywordtype}{bool}\ serialize\ (\mbox{\hyperlink{structhb__serialize__context__t}{hb\_serialize\_context\_t}}\ *c,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_c_f_f_1_1_encoding}{Encoding}}\ \&src)}
\DoxyCodeLine{00173\ \ \ \{}
\DoxyCodeLine{00174\ \ \ \ \ TRACE\_SERIALIZE\ (\textcolor{keyword}{this});}
\DoxyCodeLine{00175\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ size\ =\ src.get\_size\ ();}
\DoxyCodeLine{00176\ \ \ \ \ \mbox{\hyperlink{struct_c_f_f_1_1_encoding}{Encoding}}\ *dest\ =\ c-\/>allocate\_size<\mbox{\hyperlink{struct_c_f_f_1_1_encoding}{Encoding}}>\ (size);}
\DoxyCodeLine{00177\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!dest))\ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{00178\ \ \ \ \ memcpy\ (dest,\ \&src,\ size);}
\DoxyCodeLine{00179\ \ \ \ \ return\_trace\ (\textcolor{keyword}{true});}
\DoxyCodeLine{00180\ \ \ \}}
\DoxyCodeLine{00181\ }
\DoxyCodeLine{00182\ \ \ \textcolor{comment}{/*\ serialize\ a\ subset\ Encoding\ */}}
\DoxyCodeLine{00183\ \ \ \textcolor{keywordtype}{bool}\ serialize\ (\mbox{\hyperlink{structhb__serialize__context__t}{hb\_serialize\_context\_t}}\ *c,}
\DoxyCodeLine{00184\ \ \ \ \ \ \ \ \ \ \ uint8\_t\ format,}
\DoxyCodeLine{00185\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ enc\_count,}
\DoxyCodeLine{00186\ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structhb__vector__t}{hb\_vector\_t<code\_pair\_t>}}\&\ code\_ranges,}
\DoxyCodeLine{00187\ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structhb__vector__t}{hb\_vector\_t<code\_pair\_t>}}\&\ supp\_codes)}
\DoxyCodeLine{00188\ \ \ \{}
\DoxyCodeLine{00189\ \ \ \ \ TRACE\_SERIALIZE\ (\textcolor{keyword}{this});}
\DoxyCodeLine{00190\ \ \ \ \ \mbox{\hyperlink{struct_c_f_f_1_1_encoding}{Encoding}}\ *dest\ =\ c-\/>extend\_min\ (\textcolor{keyword}{this});}
\DoxyCodeLine{00191\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!dest))\ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{00192\ \ \ \ \ dest-\/>format\ =\ format\ |\ ((supp\_codes.length\ >\ 0)\ ?\ 0x80\ :\ 0);}
\DoxyCodeLine{00193\ \ \ \ \ \textcolor{keywordflow}{switch}\ (format)\ \{}
\DoxyCodeLine{00194\ \ \ \ \ \textcolor{keywordflow}{case}\ 0:}
\DoxyCodeLine{00195\ \ \ \ \ \{}
\DoxyCodeLine{00196\ \ \ \ \ \ \ \mbox{\hyperlink{struct_c_f_f_1_1_encoding0}{Encoding0}}\ *fmt0\ =\ c-\/>allocate\_size<\mbox{\hyperlink{struct_c_f_f_1_1_encoding0}{Encoding0}}>\ (Encoding0::min\_size\ +\ HBUINT8::static\_size\ *\ enc\_count);}
\DoxyCodeLine{00197\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!fmt0))\ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{00198\ \ \ \ \ \ \ fmt0-\/>nCodes\ ()\ =\ enc\_count;}
\DoxyCodeLine{00199\ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ glyph\ =\ 0;}
\DoxyCodeLine{00200\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ code\_ranges.length;\ i++)}
\DoxyCodeLine{00201\ \ \ \ \ \ \ \{}
\DoxyCodeLine{00202\ \ \ \ \ hb\_codepoint\_t\ \mbox{\hyperlink{structcode}{code}}\ =\ code\_ranges[i].code;}
\DoxyCodeLine{00203\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ left\ =\ (\textcolor{keywordtype}{int})code\_ranges[i].glyph;\ left\ >=\ 0;\ left-\/-\/)}
\DoxyCodeLine{00204\ \ \ \ \ \ \ fmt0-\/>codes[glyph++]\ =\ \mbox{\hyperlink{structcode}{code}}++;}
\DoxyCodeLine{00205\ \ \ \ \ if\ (unlikely\ (!((glyph\ <=\ 0x100)\ \&\&\ (\mbox{\hyperlink{structcode}{code}}\ <=\ 0x100))))}
\DoxyCodeLine{00206\ \ \ \ \ \ \ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{00207\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00208\ \ \ \ \ \}}
\DoxyCodeLine{00209\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00210\ }
\DoxyCodeLine{00211\ \ \ \ \ \textcolor{keywordflow}{case}\ 1:}
\DoxyCodeLine{00212\ \ \ \ \ \{}
\DoxyCodeLine{00213\ \ \ \ \ \ \ \mbox{\hyperlink{struct_c_f_f_1_1_encoding1}{Encoding1}}\ *fmt1\ =\ c-\/>allocate\_size<\mbox{\hyperlink{struct_c_f_f_1_1_encoding1}{Encoding1}}>\ (Encoding1::min\_size\ +\ Encoding1\_Range::static\_size\ *\ code\_ranges.length);}
\DoxyCodeLine{00214\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!fmt1))\ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{00215\ \ \ \ \ \ \ fmt1-\/>nRanges\ ()\ =\ code\_ranges.length;}
\DoxyCodeLine{00216\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ code\_ranges.length;\ i++)}
\DoxyCodeLine{00217\ \ \ \ \ \ \ \{}
\DoxyCodeLine{00218\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!((code\_ranges[i].\mbox{\hyperlink{structcode}{code}}\ <=\ 0xFF)\ \&\&\ (code\_ranges[i].glyph\ <=\ 0xFF))))}
\DoxyCodeLine{00219\ \ \ \ \ \ \ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{00220\ \ \ \ \ fmt1-\/>ranges[i].first\ =\ code\_ranges[i].code;}
\DoxyCodeLine{00221\ \ \ \ \ fmt1-\/>ranges[i].nLeft\ =\ code\_ranges[i].glyph;}
\DoxyCodeLine{00222\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00223\ \ \ \ \ \}}
\DoxyCodeLine{00224\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00225\ }
\DoxyCodeLine{00226\ \ \ \ \ \}}
\DoxyCodeLine{00227\ }
\DoxyCodeLine{00228\ \ \ \ \ \textcolor{keywordflow}{if}\ (supp\_codes.length)}
\DoxyCodeLine{00229\ \ \ \ \ \{}
\DoxyCodeLine{00230\ \ \ \ \ \ \ \mbox{\hyperlink{struct_c_f_f_1_1_c_f_f1_supp_enc_data}{CFF1SuppEncData}}\ *suppData\ =\ c-\/>allocate\_size<\mbox{\hyperlink{struct_c_f_f_1_1_c_f_f1_supp_enc_data}{CFF1SuppEncData}}>\ (CFF1SuppEncData::min\_size\ +\ SuppEncoding::static\_size\ *\ supp\_codes.length);}
\DoxyCodeLine{00231\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!suppData))\ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{00232\ \ \ \ \ \ \ suppData-\/>nSups\ ()\ =\ supp\_codes.length;}
\DoxyCodeLine{00233\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ supp\_codes.length;\ i++)}
\DoxyCodeLine{00234\ \ \ \ \ \ \ \{}
\DoxyCodeLine{00235\ \ \ \ \ suppData-\/>supps[i].code\ =\ supp\_codes[i].code;}
\DoxyCodeLine{00236\ \ \ \ \ suppData-\/>supps[i].glyph\ =\ supp\_codes[i].glyph;\ \textcolor{comment}{/*\ actually\ SID\ */}}
\DoxyCodeLine{00237\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00238\ \ \ \ \ \}}
\DoxyCodeLine{00239\ }
\DoxyCodeLine{00240\ \ \ \ \ return\_trace\ (\textcolor{keyword}{true});}
\DoxyCodeLine{00241\ \ \ \}}
\DoxyCodeLine{00242\ }
\DoxyCodeLine{00243\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ get\_size\ ()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00244\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00245\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ size\ =\ min\_size;}
\DoxyCodeLine{00246\ \ \ \ \ \textcolor{keywordflow}{switch}\ (table\_format\ ())}
\DoxyCodeLine{00247\ \ \ \ \ \{}
\DoxyCodeLine{00248\ \ \ \ \ \textcolor{keywordflow}{case}\ 0:\ size\ +=\ u.format0.get\_size\ ();\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00249\ \ \ \ \ \textcolor{keywordflow}{case}\ 1:\ size\ +=\ u.format1.get\_size\ ();\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00250\ \ \ \ \ \}}
\DoxyCodeLine{00251\ \ \ \ \ \textcolor{keywordflow}{if}\ (has\_supplement\ ())}
\DoxyCodeLine{00252\ \ \ \ \ \ \ size\ +=\ suppEncData\ ().get\_size\ ();}
\DoxyCodeLine{00253\ \ \ \ \ \textcolor{keywordflow}{return}\ size;}
\DoxyCodeLine{00254\ \ \ \}}
\DoxyCodeLine{00255\ }
\DoxyCodeLine{00256\ \ \ hb\_codepoint\_t\ get\_code\ (hb\_codepoint\_t\ glyph)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00257\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00258\ \ \ \ \ \textcolor{keywordflow}{switch}\ (table\_format\ ())}
\DoxyCodeLine{00259\ \ \ \ \ \{}
\DoxyCodeLine{00260\ \ \ \ \ \textcolor{keywordflow}{case}\ 0:\ \textcolor{keywordflow}{return}\ u.format0.get\_code\ (glyph);}
\DoxyCodeLine{00261\ \ \ \ \ \textcolor{keywordflow}{case}\ 1:\ \textcolor{keywordflow}{return}\ u.format1.get\_code\ (glyph);}
\DoxyCodeLine{00262\ \ \ \ \ \textcolor{keywordflow}{default}:\textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00263\ \ \ \ \ \}}
\DoxyCodeLine{00264\ \ \ \}}
\DoxyCodeLine{00265\ }
\DoxyCodeLine{00266\ \ \ uint8\_t\ table\_format\ ()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ format\ \&\ 0x7F;\ \}}
\DoxyCodeLine{00267\ \ \ \textcolor{keywordtype}{bool}\ \ has\_supplement\ ()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ format\ \&\ 0x80;\ \}}
\DoxyCodeLine{00268\ }
\DoxyCodeLine{00269\ \ \ \textcolor{keywordtype}{void}\ get\_supplement\_codes\ (hb\_codepoint\_t\ sid,\ \mbox{\hyperlink{structhb__vector__t}{hb\_vector\_t<hb\_codepoint\_t>}}\ \&codes)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00270\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00271\ \ \ \ \ codes.resize\ (0);}
\DoxyCodeLine{00272\ \ \ \ \ \textcolor{keywordflow}{if}\ (has\_supplement\ ())}
\DoxyCodeLine{00273\ \ \ \ \ \ \ suppEncData().get\_codes\ (sid,\ codes);}
\DoxyCodeLine{00274\ \ \ \}}
\DoxyCodeLine{00275\ }
\DoxyCodeLine{00276\ \ \ \textcolor{keywordtype}{bool}\ sanitize\ (\mbox{\hyperlink{structhb__sanitize__context__t}{hb\_sanitize\_context\_t}}\ *c)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00277\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00278\ \ \ \ \ TRACE\_SANITIZE\ (\textcolor{keyword}{this});}
\DoxyCodeLine{00279\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!c-\/>check\_struct\ (\textcolor{keyword}{this})))}
\DoxyCodeLine{00280\ \ \ \ \ \ \ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{00281\ }
\DoxyCodeLine{00282\ \ \ \ \ \textcolor{keywordflow}{switch}\ (table\_format\ ())}
\DoxyCodeLine{00283\ \ \ \ \ \{}
\DoxyCodeLine{00284\ \ \ \ \ \textcolor{keywordflow}{case}\ 0:\ \textcolor{keywordflow}{if}\ (unlikely\ (!u.format0.sanitize\ (c)))\ \{\ return\_trace\ (\textcolor{keyword}{false});\ \}\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00285\ \ \ \ \ \textcolor{keywordflow}{case}\ 1:\ \textcolor{keywordflow}{if}\ (unlikely\ (!u.format1.sanitize\ (c)))\ \{\ return\_trace\ (\textcolor{keyword}{false});\ \}\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00286\ \ \ \ \ \textcolor{keywordflow}{default}:return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{00287\ \ \ \ \ \}}
\DoxyCodeLine{00288\ \ \ \ \ return\_trace\ (likely\ (!has\_supplement\ ()\ ||\ suppEncData\ ().sanitize\ (c)));}
\DoxyCodeLine{00289\ \ \ \}}
\DoxyCodeLine{00290\ }
\DoxyCodeLine{00291\ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00292\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_c_f_f_1_1_c_f_f1_supp_enc_data}{CFF1SuppEncData}}\ \&suppEncData\ ()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00293\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00294\ \ \ \ \ \textcolor{keywordflow}{switch}\ (table\_format\ ())}
\DoxyCodeLine{00295\ \ \ \ \ \{}
\DoxyCodeLine{00296\ \ \ \ \ \textcolor{keywordflow}{case}\ 0:\ \textcolor{keywordflow}{return}\ StructAfter<CFF1SuppEncData>\ (u.format0.codes[u.format0.nCodes\ ()-\/1]);}
\DoxyCodeLine{00297\ \ \ \ \ \textcolor{keywordflow}{case}\ 1:\ \textcolor{keywordflow}{return}\ StructAfter<CFF1SuppEncData>\ (u.format1.ranges[u.format1.nRanges\ ()-\/1]);}
\DoxyCodeLine{00298\ \ \ \ \ \textcolor{keywordflow}{default}:\textcolor{keywordflow}{return}\ \mbox{\hyperlink{struct_null}{Null}}\ (\mbox{\hyperlink{struct_c_f_f_1_1_c_f_f1_supp_enc_data}{CFF1SuppEncData}});}
\DoxyCodeLine{00299\ \ \ \ \ \}}
\DoxyCodeLine{00300\ \ \ \}}
\DoxyCodeLine{00301\ }
\DoxyCodeLine{00302\ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00303\ \ \ \mbox{\hyperlink{struct_o_t_1_1_int_type}{HBUINT8}}\ \ \ \ format;}
\DoxyCodeLine{00304\ \ \ \textcolor{keyword}{union\ }\{}
\DoxyCodeLine{00305\ \ \ \mbox{\hyperlink{struct_c_f_f_1_1_encoding0}{Encoding0}}\ \ \ \ format0;}
\DoxyCodeLine{00306\ \ \ \mbox{\hyperlink{struct_c_f_f_1_1_encoding1}{Encoding1}}\ \ \ \ format1;}
\DoxyCodeLine{00307\ \ \ \}\ u;}
\DoxyCodeLine{00308\ \ \ \textcolor{comment}{/*\ CFF1SuppEncData\ \ suppEncData;\ */}}
\DoxyCodeLine{00309\ }
\DoxyCodeLine{00310\ \ \ DEFINE\_SIZE\_MIN\ (1);}
\DoxyCodeLine{00311\ \};}
\DoxyCodeLine{00312\ }
\DoxyCodeLine{00313\ \textcolor{comment}{/*\ Charset\ */}}
\DoxyCodeLine{00314\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_c_f_f_1_1_charset0}{Charset0}}\ \{}
\DoxyCodeLine{00315\ \ \ \textcolor{keywordtype}{bool}\ sanitize\ (\mbox{\hyperlink{structhb__sanitize__context__t}{hb\_sanitize\_context\_t}}\ *c,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ num\_glyphs)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00316\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00317\ \ \ \ \ TRACE\_SANITIZE\ (\textcolor{keyword}{this});}
\DoxyCodeLine{00318\ \ \ \ \ return\_trace\ (c-\/>check\_struct\ (\textcolor{keyword}{this})\ \&\&\ sids[num\_glyphs\ -\/\ 1].sanitize\ (c));}
\DoxyCodeLine{00319\ \ \ \}}
\DoxyCodeLine{00320\ }
\DoxyCodeLine{00321\ \ \ hb\_codepoint\_t\ get\_sid\ (hb\_codepoint\_t\ glyph)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00322\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00323\ \ \ \ \ \textcolor{keywordflow}{if}\ (glyph\ ==\ 0)}
\DoxyCodeLine{00324\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00325\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00326\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ sids[glyph\ -\/\ 1];}
\DoxyCodeLine{00327\ \ \ \}}
\DoxyCodeLine{00328\ }
\DoxyCodeLine{00329\ \ \ hb\_codepoint\_t\ get\_glyph\ (hb\_codepoint\_t\ sid,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ num\_glyphs)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00330\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00331\ \ \ \ \ \textcolor{keywordflow}{if}\ (sid\ ==\ 0)}
\DoxyCodeLine{00332\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00333\ }
\DoxyCodeLine{00334\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ glyph\ =\ 1;\ glyph\ <\ num\_glyphs;\ glyph++)}
\DoxyCodeLine{00335\ \ \ \ \ \{}
\DoxyCodeLine{00336\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (sids[glyph-\/1]\ ==\ sid)}
\DoxyCodeLine{00337\ \ \ \ \ \textcolor{keywordflow}{return}\ glyph;}
\DoxyCodeLine{00338\ \ \ \ \ \}}
\DoxyCodeLine{00339\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00340\ \ \ \}}
\DoxyCodeLine{00341\ }
\DoxyCodeLine{00342\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ get\_size\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ num\_glyphs)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00343\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00344\ \ \ \ \ assert\ (num\_glyphs\ >\ 0);}
\DoxyCodeLine{00345\ \ \ \ \ \textcolor{keywordflow}{return}\ HBUINT16::static\_size\ *\ (num\_glyphs\ -\/\ 1);}
\DoxyCodeLine{00346\ \ \ \}}
\DoxyCodeLine{00347\ }
\DoxyCodeLine{00348\ \ \ \mbox{\hyperlink{struct_o_t_1_1_int_type}{HBUINT16}}\ \ sids[HB\_VAR\_ARRAY];}
\DoxyCodeLine{00349\ }
\DoxyCodeLine{00350\ \ \ DEFINE\_SIZE\_ARRAY(0,\ sids);}
\DoxyCodeLine{00351\ \};}
\DoxyCodeLine{00352\ }
\DoxyCodeLine{00353\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ TYPE>}
\DoxyCodeLine{00354\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_c_f_f_1_1_charset___range}{Charset\_Range}}\ \{}
\DoxyCodeLine{00355\ \ \ \textcolor{keywordtype}{bool}\ sanitize\ (\mbox{\hyperlink{structhb__sanitize__context__t}{hb\_sanitize\_context\_t}}\ *c)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00356\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00357\ \ \ \ \ TRACE\_SANITIZE\ (\textcolor{keyword}{this});}
\DoxyCodeLine{00358\ \ \ \ \ return\_trace\ (c-\/>check\_struct\ (\textcolor{keyword}{this}));}
\DoxyCodeLine{00359\ \ \ \}}
\DoxyCodeLine{00360\ }
\DoxyCodeLine{00361\ \ \ \mbox{\hyperlink{struct_o_t_1_1_int_type}{HBUINT16}}\ \ first;}
\DoxyCodeLine{00362\ \ \ TYPE\ \ \ \ \ \ nLeft;}
\DoxyCodeLine{00363\ }
\DoxyCodeLine{00364\ \ \ DEFINE\_SIZE\_STATIC\ (HBUINT16::static\_size\ +\ TYPE::static\_size);}
\DoxyCodeLine{00365\ \};}
\DoxyCodeLine{00366\ }
\DoxyCodeLine{00367\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ TYPE>}
\DoxyCodeLine{00368\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_c_f_f_1_1_charset1__2}{Charset1\_2}}\ \{}
\DoxyCodeLine{00369\ \ \ \textcolor{keywordtype}{bool}\ sanitize\ (\mbox{\hyperlink{structhb__sanitize__context__t}{hb\_sanitize\_context\_t}}\ *c,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ num\_glyphs)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00370\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00371\ \ \ \ \ TRACE\_SANITIZE\ (\textcolor{keyword}{this});}
\DoxyCodeLine{00372\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!c-\/>check\_struct\ (\textcolor{keyword}{this})))}
\DoxyCodeLine{00373\ \ \ \ \ \ \ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{00374\ \ \ \ \ num\_glyphs-\/-\/;}
\DoxyCodeLine{00375\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ i\ =\ 0;\ num\_glyphs\ >\ 0;\ i++)}
\DoxyCodeLine{00376\ \ \ \ \ \{}
\DoxyCodeLine{00377\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!ranges[i].sanitize\ (c)\ ||\ (num\_glyphs\ <\ ranges[i].nLeft\ +\ 1)))}
\DoxyCodeLine{00378\ \ \ \ \ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{00379\ \ \ \ \ \ \ num\_glyphs\ -\/=\ (ranges[i].nLeft\ +\ 1);}
\DoxyCodeLine{00380\ \ \ \ \ \}}
\DoxyCodeLine{00381\ \ \ \ \ return\_trace\ (\textcolor{keyword}{true});}
\DoxyCodeLine{00382\ \ \ \}}
\DoxyCodeLine{00383\ }
\DoxyCodeLine{00384\ \ \ hb\_codepoint\_t\ get\_sid\ (hb\_codepoint\_t\ glyph)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00385\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00386\ \ \ \ \ \textcolor{keywordflow}{if}\ (glyph\ ==\ 0)\ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00387\ \ \ \ \ glyph-\/-\/;}
\DoxyCodeLine{00388\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ i\ =\ 0;;\ i++)}
\DoxyCodeLine{00389\ \ \ \ \ \{}
\DoxyCodeLine{00390\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (glyph\ <=\ ranges[i].nLeft)}
\DoxyCodeLine{00391\ \ \ \ \ \textcolor{keywordflow}{return}\ (hb\_codepoint\_t)ranges[i].first\ +\ glyph;}
\DoxyCodeLine{00392\ \ \ \ \ \ \ glyph\ -\/=\ (ranges[i].nLeft\ +\ 1);}
\DoxyCodeLine{00393\ \ \ \ \ \}}
\DoxyCodeLine{00394\ }
\DoxyCodeLine{00395\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00396\ \ \ \}}
\DoxyCodeLine{00397\ }
\DoxyCodeLine{00398\ \ \ hb\_codepoint\_t\ get\_glyph\ (hb\_codepoint\_t\ sid,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ num\_glyphs)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00399\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00400\ \ \ \ \ \textcolor{keywordflow}{if}\ (sid\ ==\ 0)\ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00401\ \ \ \ \ hb\_codepoint\_t\ \ glyph\ =\ 1;}
\DoxyCodeLine{00402\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ i\ =\ 0;;\ i++)}
\DoxyCodeLine{00403\ \ \ \ \ \{}
\DoxyCodeLine{00404\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (glyph\ >=\ num\_glyphs)}
\DoxyCodeLine{00405\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00406\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((ranges[i].first\ <=\ sid)\ \&\&\ (sid\ <=\ ranges[i].first\ +\ ranges[i].nLeft))}
\DoxyCodeLine{00407\ \ \ \ \ \textcolor{keywordflow}{return}\ glyph\ +\ (sid\ -\/\ ranges[i].first);}
\DoxyCodeLine{00408\ \ \ \ \ \ \ glyph\ +=\ (ranges[i].nLeft\ +\ 1);}
\DoxyCodeLine{00409\ \ \ \ \ \}}
\DoxyCodeLine{00410\ }
\DoxyCodeLine{00411\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00412\ \ \ \}}
\DoxyCodeLine{00413\ }
\DoxyCodeLine{00414\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ get\_size\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ num\_glyphs)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00415\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00416\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ size\ =\ HBUINT8::static\_size;}
\DoxyCodeLine{00417\ \ \ \ \ \textcolor{keywordtype}{int}\ glyph\ =\ (int)num\_glyphs;}
\DoxyCodeLine{00418\ }
\DoxyCodeLine{00419\ \ \ \ \ assert\ (glyph\ >\ 0);}
\DoxyCodeLine{00420\ \ \ \ \ glyph-\/-\/;}
\DoxyCodeLine{00421\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ i\ =\ 0;\ glyph\ >\ 0;\ i++)}
\DoxyCodeLine{00422\ \ \ \ \ \{}
\DoxyCodeLine{00423\ \ \ \ \ \ \ glyph\ -\/=\ (ranges[i].nLeft\ +\ 1);}
\DoxyCodeLine{00424\ \ \ \ \ \ \ size\ +=\ \mbox{\hyperlink{struct_c_f_f_1_1_charset___range}{Charset\_Range<TYPE>::static\_size}};}
\DoxyCodeLine{00425\ \ \ \ \ \}}
\DoxyCodeLine{00426\ }
\DoxyCodeLine{00427\ \ \ \ \ \textcolor{keywordflow}{return}\ size;}
\DoxyCodeLine{00428\ \ \ \}}
\DoxyCodeLine{00429\ }
\DoxyCodeLine{00430\ \ \ \mbox{\hyperlink{struct_c_f_f_1_1_charset___range}{Charset\_Range<TYPE>}}\ \ \ ranges[HB\_VAR\_ARRAY];}
\DoxyCodeLine{00431\ }
\DoxyCodeLine{00432\ \ \ DEFINE\_SIZE\_ARRAY\ (0,\ ranges);}
\DoxyCodeLine{00433\ \};}
\DoxyCodeLine{00434\ }
\DoxyCodeLine{00435\ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{struct_c_f_f_1_1_charset1__2}{Charset1\_2<HBUINT8>}}\ \ \ \ \ \mbox{\hyperlink{struct_c_f_f_1_1_charset1__2}{Charset1}};}
\DoxyCodeLine{00436\ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{struct_c_f_f_1_1_charset1__2}{Charset1\_2<HBUINT16>}}\ \ \ \ \mbox{\hyperlink{struct_c_f_f_1_1_charset1__2}{Charset2}};}
\DoxyCodeLine{00437\ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{struct_c_f_f_1_1_charset___range}{Charset\_Range<HBUINT8>}}\ \ \mbox{\hyperlink{struct_c_f_f_1_1_charset___range}{Charset1\_Range}};}
\DoxyCodeLine{00438\ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{struct_c_f_f_1_1_charset___range}{Charset\_Range<HBUINT16>}}\ \mbox{\hyperlink{struct_c_f_f_1_1_charset___range}{Charset2\_Range}};}
\DoxyCodeLine{00439\ }
\DoxyCodeLine{00440\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_c_f_f_1_1_charset}{Charset}}}
\DoxyCodeLine{00441\ \{}
\DoxyCodeLine{00442\ \ \ \textcolor{comment}{/*\ serialize\ a\ fullset\ Charset\ */}}
\DoxyCodeLine{00443\ \ \ \textcolor{keywordtype}{bool}\ serialize\ (\mbox{\hyperlink{structhb__serialize__context__t}{hb\_serialize\_context\_t}}\ *c,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_c_f_f_1_1_charset}{Charset}}\ \&src,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ num\_glyphs)}
\DoxyCodeLine{00444\ \ \ \{}
\DoxyCodeLine{00445\ \ \ \ \ TRACE\_SERIALIZE\ (\textcolor{keyword}{this});}
\DoxyCodeLine{00446\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ size\ =\ src.get\_size\ (num\_glyphs);}
\DoxyCodeLine{00447\ \ \ \ \ \mbox{\hyperlink{struct_c_f_f_1_1_charset}{Charset}}\ *dest\ =\ c-\/>allocate\_size<\mbox{\hyperlink{struct_c_f_f_1_1_charset}{Charset}}>\ (size);}
\DoxyCodeLine{00448\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!dest))\ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{00449\ \ \ \ \ memcpy\ (dest,\ \&src,\ size);}
\DoxyCodeLine{00450\ \ \ \ \ return\_trace\ (\textcolor{keyword}{true});}
\DoxyCodeLine{00451\ \ \ \}}
\DoxyCodeLine{00452\ }
\DoxyCodeLine{00453\ \ \ \textcolor{comment}{/*\ serialize\ a\ subset\ Charset\ */}}
\DoxyCodeLine{00454\ \ \ \textcolor{keywordtype}{bool}\ serialize\ (\mbox{\hyperlink{structhb__serialize__context__t}{hb\_serialize\_context\_t}}\ *c,}
\DoxyCodeLine{00455\ \ \ \ \ \ \ \ \ \ \ uint8\_t\ format,}
\DoxyCodeLine{00456\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ num\_glyphs,}
\DoxyCodeLine{00457\ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structhb__vector__t}{hb\_vector\_t<code\_pair\_t>}}\&\ sid\_ranges)}
\DoxyCodeLine{00458\ \ \ \{}
\DoxyCodeLine{00459\ \ \ \ \ TRACE\_SERIALIZE\ (\textcolor{keyword}{this});}
\DoxyCodeLine{00460\ \ \ \ \ \mbox{\hyperlink{struct_c_f_f_1_1_charset}{Charset}}\ *dest\ =\ c-\/>extend\_min\ (\textcolor{keyword}{this});}
\DoxyCodeLine{00461\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!dest))\ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{00462\ \ \ \ \ dest-\/>format\ =\ format;}
\DoxyCodeLine{00463\ \ \ \ \ \textcolor{keywordflow}{switch}\ (format)}
\DoxyCodeLine{00464\ \ \ \ \ \{}
\DoxyCodeLine{00465\ \ \ \ \ \textcolor{keywordflow}{case}\ 0:}
\DoxyCodeLine{00466\ \ \ \ \ \{}
\DoxyCodeLine{00467\ \ \ \ \ \ \ \mbox{\hyperlink{struct_c_f_f_1_1_charset0}{Charset0}}\ *fmt0\ =\ c-\/>allocate\_size<\mbox{\hyperlink{struct_c_f_f_1_1_charset0}{Charset0}}>\ (Charset0::min\_size\ +\ HBUINT16::static\_size\ *\ (num\_glyphs\ -\/\ 1));}
\DoxyCodeLine{00468\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!fmt0))\ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{00469\ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ glyph\ =\ 0;}
\DoxyCodeLine{00470\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ sid\_ranges.length;\ i++)}
\DoxyCodeLine{00471\ \ \ \ \ \ \ \{}
\DoxyCodeLine{00472\ \ \ \ \ hb\_codepoint\_t\ sid\ =\ sid\_ranges[i].code;}
\DoxyCodeLine{00473\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ left\ =\ (\textcolor{keywordtype}{int})sid\_ranges[i].glyph;\ left\ >=\ 0;\ left-\/-\/)}
\DoxyCodeLine{00474\ \ \ \ \ \ \ fmt0-\/>sids[glyph++]\ =\ sid++;}
\DoxyCodeLine{00475\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00476\ \ \ \ \ \}}
\DoxyCodeLine{00477\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00478\ }
\DoxyCodeLine{00479\ \ \ \ \ \textcolor{keywordflow}{case}\ 1:}
\DoxyCodeLine{00480\ \ \ \ \ \{}
\DoxyCodeLine{00481\ \ \ \ \ \ \ \mbox{\hyperlink{struct_c_f_f_1_1_charset1__2}{Charset1}}\ *fmt1\ =\ c-\/>allocate\_size<\mbox{\hyperlink{struct_c_f_f_1_1_charset1__2}{Charset1}}>\ (Charset1::min\_size\ +\ Charset1\_Range::static\_size\ *\ sid\_ranges.length);}
\DoxyCodeLine{00482\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!fmt1))\ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{00483\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ sid\_ranges.length;\ i++)}
\DoxyCodeLine{00484\ \ \ \ \ \ \ \{}
\DoxyCodeLine{00485\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!(sid\_ranges[i].glyph\ <=\ 0xFF)))}
\DoxyCodeLine{00486\ \ \ \ \ \ \ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{00487\ \ \ \ \ fmt1-\/>ranges[i].first\ =\ sid\_ranges[i].code;}
\DoxyCodeLine{00488\ \ \ \ \ fmt1-\/>ranges[i].nLeft\ =\ sid\_ranges[i].glyph;}
\DoxyCodeLine{00489\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00490\ \ \ \ \ \}}
\DoxyCodeLine{00491\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00492\ }
\DoxyCodeLine{00493\ \ \ \ \ \textcolor{keywordflow}{case}\ 2:}
\DoxyCodeLine{00494\ \ \ \ \ \{}
\DoxyCodeLine{00495\ \ \ \ \ \ \ \mbox{\hyperlink{struct_c_f_f_1_1_charset1__2}{Charset2}}\ *fmt2\ =\ c-\/>allocate\_size<\mbox{\hyperlink{struct_c_f_f_1_1_charset1__2}{Charset2}}>\ (Charset2::min\_size\ +\ Charset2\_Range::static\_size\ *\ sid\_ranges.length);}
\DoxyCodeLine{00496\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!fmt2))\ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{00497\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ sid\_ranges.length;\ i++)}
\DoxyCodeLine{00498\ \ \ \ \ \ \ \{}
\DoxyCodeLine{00499\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!(sid\_ranges[i].glyph\ <=\ 0xFFFF)))}
\DoxyCodeLine{00500\ \ \ \ \ \ \ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{00501\ \ \ \ \ fmt2-\/>ranges[i].first\ =\ sid\_ranges[i].code;}
\DoxyCodeLine{00502\ \ \ \ \ fmt2-\/>ranges[i].nLeft\ =\ sid\_ranges[i].glyph;}
\DoxyCodeLine{00503\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00504\ \ \ \ \ \}}
\DoxyCodeLine{00505\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00506\ }
\DoxyCodeLine{00507\ \ \ \ \ \}}
\DoxyCodeLine{00508\ \ \ \ \ return\_trace\ (\textcolor{keyword}{true});}
\DoxyCodeLine{00509\ \ \ \}}
\DoxyCodeLine{00510\ }
\DoxyCodeLine{00511\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ get\_size\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ num\_glyphs)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00512\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00513\ \ \ \ \ \textcolor{keywordflow}{switch}\ (format)}
\DoxyCodeLine{00514\ \ \ \ \ \{}
\DoxyCodeLine{00515\ \ \ \ \ \textcolor{keywordflow}{case}\ 0:\ \textcolor{keywordflow}{return}\ min\_size\ +\ u.format0.get\_size\ (num\_glyphs);}
\DoxyCodeLine{00516\ \ \ \ \ \textcolor{keywordflow}{case}\ 1:\ \textcolor{keywordflow}{return}\ min\_size\ +\ u.format1.get\_size\ (num\_glyphs);}
\DoxyCodeLine{00517\ \ \ \ \ \textcolor{keywordflow}{case}\ 2:\ \textcolor{keywordflow}{return}\ min\_size\ +\ u.format2.get\_size\ (num\_glyphs);}
\DoxyCodeLine{00518\ \ \ \ \ \textcolor{keywordflow}{default}:\textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00519\ \ \ \ \ \}}
\DoxyCodeLine{00520\ \ \ \}}
\DoxyCodeLine{00521\ }
\DoxyCodeLine{00522\ \ \ hb\_codepoint\_t\ get\_sid\ (hb\_codepoint\_t\ glyph,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ num\_glyphs)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00523\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00524\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (glyph\ >=\ num\_glyphs))\ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00525\ \ \ \ \ \textcolor{keywordflow}{switch}\ (format)}
\DoxyCodeLine{00526\ \ \ \ \ \{}
\DoxyCodeLine{00527\ \ \ \ \ \textcolor{keywordflow}{case}\ 0:\ \textcolor{keywordflow}{return}\ u.format0.get\_sid\ (glyph);}
\DoxyCodeLine{00528\ \ \ \ \ \textcolor{keywordflow}{case}\ 1:\ \textcolor{keywordflow}{return}\ u.format1.get\_sid\ (glyph);}
\DoxyCodeLine{00529\ \ \ \ \ \textcolor{keywordflow}{case}\ 2:\ \textcolor{keywordflow}{return}\ u.format2.get\_sid\ (glyph);}
\DoxyCodeLine{00530\ \ \ \ \ \textcolor{keywordflow}{default}:\textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00531\ \ \ \ \ \}}
\DoxyCodeLine{00532\ \ \ \}}
\DoxyCodeLine{00533\ }
\DoxyCodeLine{00534\ \ \ hb\_codepoint\_t\ get\_glyph\ (hb\_codepoint\_t\ sid,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ num\_glyphs)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00535\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00536\ \ \ \ \ \textcolor{keywordflow}{switch}\ (format)}
\DoxyCodeLine{00537\ \ \ \ \ \{}
\DoxyCodeLine{00538\ \ \ \ \ \textcolor{keywordflow}{case}\ 0:\ \textcolor{keywordflow}{return}\ u.format0.get\_glyph\ (sid,\ num\_glyphs);}
\DoxyCodeLine{00539\ \ \ \ \ \textcolor{keywordflow}{case}\ 1:\ \textcolor{keywordflow}{return}\ u.format1.get\_glyph\ (sid,\ num\_glyphs);}
\DoxyCodeLine{00540\ \ \ \ \ \textcolor{keywordflow}{case}\ 2:\ \textcolor{keywordflow}{return}\ u.format2.get\_glyph\ (sid,\ num\_glyphs);}
\DoxyCodeLine{00541\ \ \ \ \ \textcolor{keywordflow}{default}:\textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00542\ \ \ \ \ \}}
\DoxyCodeLine{00543\ \ \ \}}
\DoxyCodeLine{00544\ }
\DoxyCodeLine{00545\ \ \ \textcolor{keywordtype}{bool}\ sanitize\ (\mbox{\hyperlink{structhb__sanitize__context__t}{hb\_sanitize\_context\_t}}\ *c)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00546\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00547\ \ \ \ \ TRACE\_SANITIZE\ (\textcolor{keyword}{this});}
\DoxyCodeLine{00548\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!c-\/>check\_struct\ (\textcolor{keyword}{this})))}
\DoxyCodeLine{00549\ \ \ \ \ \ \ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{00550\ }
\DoxyCodeLine{00551\ \ \ \ \ \textcolor{keywordflow}{switch}\ (format)}
\DoxyCodeLine{00552\ \ \ \ \ \{}
\DoxyCodeLine{00553\ \ \ \ \ \textcolor{keywordflow}{case}\ 0:\ return\_trace\ (u.format0.sanitize\ (c,\ c-\/>get\_num\_glyphs\ ()));}
\DoxyCodeLine{00554\ \ \ \ \ \textcolor{keywordflow}{case}\ 1:\ return\_trace\ (u.format1.sanitize\ (c,\ c-\/>get\_num\_glyphs\ ()));}
\DoxyCodeLine{00555\ \ \ \ \ \textcolor{keywordflow}{case}\ 2:\ return\_trace\ (u.format2.sanitize\ (c,\ c-\/>get\_num\_glyphs\ ()));}
\DoxyCodeLine{00556\ \ \ \ \ \textcolor{keywordflow}{default}:return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{00557\ \ \ \ \ \}}
\DoxyCodeLine{00558\ \ \ \}}
\DoxyCodeLine{00559\ }
\DoxyCodeLine{00560\ \ \ \mbox{\hyperlink{struct_o_t_1_1_int_type}{HBUINT8}}\ \ \ \ \ \ \ format;}
\DoxyCodeLine{00561\ \ \ \textcolor{keyword}{union\ }\{}
\DoxyCodeLine{00562\ \ \ \ \ \mbox{\hyperlink{struct_c_f_f_1_1_charset0}{Charset0}}\ \ \ \ format0;}
\DoxyCodeLine{00563\ \ \ \ \ \mbox{\hyperlink{struct_c_f_f_1_1_charset1__2}{Charset1}}\ \ \ \ format1;}
\DoxyCodeLine{00564\ \ \ \ \ \mbox{\hyperlink{struct_c_f_f_1_1_charset1__2}{Charset2}}\ \ \ \ format2;}
\DoxyCodeLine{00565\ \ \ \}\ u;}
\DoxyCodeLine{00566\ }
\DoxyCodeLine{00567\ \ \ DEFINE\_SIZE\_MIN\ (1);}
\DoxyCodeLine{00568\ \};}
\DoxyCodeLine{00569\ }
\DoxyCodeLine{00570\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_c_f_f_1_1_c_f_f1_string_index}{CFF1StringIndex}}\ :\ \mbox{\hyperlink{struct_c_f_f_1_1_c_f_f_index}{CFF1Index}}}
\DoxyCodeLine{00571\ \{}
\DoxyCodeLine{00572\ \ \ \textcolor{keywordtype}{bool}\ serialize\ (\mbox{\hyperlink{structhb__serialize__context__t}{hb\_serialize\_context\_t}}\ *c,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_c_f_f_1_1_c_f_f1_string_index}{CFF1StringIndex}}\ \&strings,}
\DoxyCodeLine{00573\ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structhb__inc__bimap__t}{hb\_inc\_bimap\_t}}\ \&sidmap)}
\DoxyCodeLine{00574\ \ \ \{}
\DoxyCodeLine{00575\ \ \ \ \ TRACE\_SERIALIZE\ (\textcolor{keyword}{this});}
\DoxyCodeLine{00576\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ ((strings.count\ ==\ 0)\ ||\ (sidmap.get\_population\ ()\ ==\ 0)))}
\DoxyCodeLine{00577\ \ \ \ \ \{}
\DoxyCodeLine{00578\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!c-\/>extend\_min\ (this-\/>count)))}
\DoxyCodeLine{00579\ \ \ \ \ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{00580\ \ \ \ \ \ \ count\ =\ 0;}
\DoxyCodeLine{00581\ \ \ \ \ \ \ return\_trace\ (\textcolor{keyword}{true});}
\DoxyCodeLine{00582\ \ \ \ \ \}}
\DoxyCodeLine{00583\ }
\DoxyCodeLine{00584\ \ \ \ \ \mbox{\hyperlink{structhb__vector__t}{byte\_str\_array\_t}}\ bytesArray;}
\DoxyCodeLine{00585\ \ \ \ \ bytesArray.init\ ();}
\DoxyCodeLine{00586\ \ \ \ \ \textcolor{keywordflow}{if}\ (!bytesArray.resize\ (sidmap.get\_population\ ()))}
\DoxyCodeLine{00587\ \ \ \ \ \ \ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{00588\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ strings.count;\ i++)}
\DoxyCodeLine{00589\ \ \ \ \ \{}
\DoxyCodeLine{00590\ \ \ \ \ \ \ hb\_codepoint\_t\ \ j\ =\ sidmap[i];}
\DoxyCodeLine{00591\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (j\ !=\ HB\_MAP\_VALUE\_INVALID)}
\DoxyCodeLine{00592\ \ \ \ \ bytesArray[j]\ =\ strings[i];}
\DoxyCodeLine{00593\ \ \ \ \ \}}
\DoxyCodeLine{00594\ }
\DoxyCodeLine{00595\ \ \ \ \ \textcolor{keywordtype}{bool}\ result\ =\ CFF1Index::serialize\ (c,\ bytesArray);}
\DoxyCodeLine{00596\ \ \ \ \ bytesArray.fini\ ();}
\DoxyCodeLine{00597\ \ \ \ \ return\_trace\ (result);}
\DoxyCodeLine{00598\ \ \ \}}
\DoxyCodeLine{00599\ \};}
\DoxyCodeLine{00600\ }
\DoxyCodeLine{00601\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_c_f_f_1_1cff1__top__dict__interp__env__t}{cff1\_top\_dict\_interp\_env\_t}}\ :\ \mbox{\hyperlink{struct_c_f_f_1_1interp__env__t}{num\_interp\_env\_t}}}
\DoxyCodeLine{00602\ \{}
\DoxyCodeLine{00603\ \ \ \mbox{\hyperlink{struct_c_f_f_1_1cff1__top__dict__interp__env__t}{cff1\_top\_dict\_interp\_env\_t}}\ ()}
\DoxyCodeLine{00604\ \ \ \ \ :\ \mbox{\hyperlink{struct_c_f_f_1_1interp__env__t}{num\_interp\_env\_t}}(),\ prev\_offset(0),\ last\_offset(0)\ \{\}}
\DoxyCodeLine{00605\ }
\DoxyCodeLine{00606\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ prev\_offset;}
\DoxyCodeLine{00607\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ last\_offset;}
\DoxyCodeLine{00608\ \};}
\DoxyCodeLine{00609\ }
\DoxyCodeLine{00610\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_c_f_f_1_1name__dict__values__t}{name\_dict\_values\_t}}}
\DoxyCodeLine{00611\ \{}
\DoxyCodeLine{00612\ \ \ \textcolor{keyword}{enum}\ name\_dict\_val\_index\_t}
\DoxyCodeLine{00613\ \ \ \{}
\DoxyCodeLine{00614\ \ \ \ \ \ \ version,}
\DoxyCodeLine{00615\ \ \ \ \ \ \ notice,}
\DoxyCodeLine{00616\ \ \ \ \ \ \ copyright,}
\DoxyCodeLine{00617\ \ \ \ \ \ \ fullName,}
\DoxyCodeLine{00618\ \ \ \ \ \ \ familyName,}
\DoxyCodeLine{00619\ \ \ \ \ \ \ weight,}
\DoxyCodeLine{00620\ \ \ \ \ \ \ postscript,}
\DoxyCodeLine{00621\ \ \ \ \ \ \ fontName,}
\DoxyCodeLine{00622\ \ \ \ \ \ \ baseFontName,}
\DoxyCodeLine{00623\ \ \ \ \ \ \ registry,}
\DoxyCodeLine{00624\ \ \ \ \ \ \ ordering,}
\DoxyCodeLine{00625\ }
\DoxyCodeLine{00626\ \ \ \ \ \ \ ValCount}
\DoxyCodeLine{00627\ \ \ \};}
\DoxyCodeLine{00628\ }
\DoxyCodeLine{00629\ \ \ \textcolor{keywordtype}{void}\ init\ ()}
\DoxyCodeLine{00630\ \ \ \{}
\DoxyCodeLine{00631\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ ValCount;\ i++)}
\DoxyCodeLine{00632\ \ \ \ \ \ \ values[i]\ =\ CFF\_UNDEF\_SID;}
\DoxyCodeLine{00633\ \ \ \}}
\DoxyCodeLine{00634\ }
\DoxyCodeLine{00635\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\&\ operator[]\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ i)}
\DoxyCodeLine{00636\ \ \ \{\ assert\ (i\ <\ ValCount);\ \textcolor{keywordflow}{return}\ values[i];\ \}}
\DoxyCodeLine{00637\ }
\DoxyCodeLine{00638\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ operator[]\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ i)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00639\ \textcolor{keyword}{\ \ }\{\ assert\ (i\ <\ ValCount);\ \textcolor{keywordflow}{return}\ values[i];\ \}}
\DoxyCodeLine{00640\ }
\DoxyCodeLine{00641\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{enum}\ name\_dict\_val\_index\_t\ name\_op\_to\_index\ (op\_code\_t\ op)}
\DoxyCodeLine{00642\ \ \ \{}
\DoxyCodeLine{00643\ \ \ \ \ \textcolor{keywordflow}{switch}\ (op)\ \{}
\DoxyCodeLine{00644\ \ \ \ \ \ \ \textcolor{keywordflow}{default}:\ \textcolor{comment}{//\ can't\ happen\ -\/\ just\ make\ some\ compiler\ happy}}
\DoxyCodeLine{00645\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_version:}
\DoxyCodeLine{00646\ \ \ \ \ \textcolor{keywordflow}{return}\ version;}
\DoxyCodeLine{00647\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_Notice:}
\DoxyCodeLine{00648\ \ \ \ \ \textcolor{keywordflow}{return}\ notice;}
\DoxyCodeLine{00649\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_Copyright:}
\DoxyCodeLine{00650\ \ \ \ \ \textcolor{keywordflow}{return}\ copyright;}
\DoxyCodeLine{00651\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_FullName:}
\DoxyCodeLine{00652\ \ \ \ \ \textcolor{keywordflow}{return}\ fullName;}
\DoxyCodeLine{00653\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_FamilyName:}
\DoxyCodeLine{00654\ \ \ \ \ \textcolor{keywordflow}{return}\ familyName;}
\DoxyCodeLine{00655\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_Weight:}
\DoxyCodeLine{00656\ \ \ \ \ \textcolor{keywordflow}{return}\ weight;}
\DoxyCodeLine{00657\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_PostScript:}
\DoxyCodeLine{00658\ \ \ \ \ \textcolor{keywordflow}{return}\ postscript;}
\DoxyCodeLine{00659\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_FontName:}
\DoxyCodeLine{00660\ \ \ \ \ \textcolor{keywordflow}{return}\ fontName;}
\DoxyCodeLine{00661\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_BaseFontName:}
\DoxyCodeLine{00662\ \ \ \ \ \textcolor{keywordflow}{return}\ baseFontName;}
\DoxyCodeLine{00663\ \ \ \ \ \}}
\DoxyCodeLine{00664\ \ \ \}}
\DoxyCodeLine{00665\ }
\DoxyCodeLine{00666\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ \ values[ValCount];}
\DoxyCodeLine{00667\ \};}
\DoxyCodeLine{00668\ }
\DoxyCodeLine{00669\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_c_f_f_1_1cff1__top__dict__val__t}{cff1\_top\_dict\_val\_t}}\ :\ \mbox{\hyperlink{struct_c_f_f_1_1op__str__t}{op\_str\_t}}}
\DoxyCodeLine{00670\ \{}
\DoxyCodeLine{00671\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ \ last\_arg\_offset;}
\DoxyCodeLine{00672\ \};}
\DoxyCodeLine{00673\ }
\DoxyCodeLine{00674\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_c_f_f_1_1cff1__top__dict__values__t}{cff1\_top\_dict\_values\_t}}\ :\ \mbox{\hyperlink{struct_c_f_f_1_1top__dict__values__t}{top\_dict\_values\_t}}<cff1\_top\_dict\_val\_t>}
\DoxyCodeLine{00675\ \{}
\DoxyCodeLine{00676\ \ \ \textcolor{keywordtype}{void}\ init\ ()}
\DoxyCodeLine{00677\ \ \ \{}
\DoxyCodeLine{00678\ \ \ \ \ \mbox{\hyperlink{struct_c_f_f_1_1top__dict__values__t}{top\_dict\_values\_t<cff1\_top\_dict\_val\_t>::init}}\ ();}
\DoxyCodeLine{00679\ }
\DoxyCodeLine{00680\ \ \ \ \ nameSIDs.init\ ();}
\DoxyCodeLine{00681\ \ \ \ \ ros\_supplement\ =\ 0;}
\DoxyCodeLine{00682\ \ \ \ \ cidCount\ =\ 8720;}
\DoxyCodeLine{00683\ \ \ \ \ EncodingOffset\ =\ 0;}
\DoxyCodeLine{00684\ \ \ \ \ CharsetOffset\ =\ 0;}
\DoxyCodeLine{00685\ \ \ \ \ FDSelectOffset\ =\ 0;}
\DoxyCodeLine{00686\ \ \ \ \ privateDictInfo.init\ ();}
\DoxyCodeLine{00687\ \ \ \}}
\DoxyCodeLine{00688\ \ \ \textcolor{keywordtype}{void}\ fini\ ()\ \{\ \mbox{\hyperlink{struct_c_f_f_1_1top__dict__values__t}{top\_dict\_values\_t<cff1\_top\_dict\_val\_t>::fini}}\ ();\ \}}
\DoxyCodeLine{00689\ }
\DoxyCodeLine{00690\ \ \ \textcolor{keywordtype}{bool}\ is\_CID\ ()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00691\ \textcolor{keyword}{\ \ }\{\ \textcolor{keywordflow}{return}\ nameSIDs[name\_dict\_values\_t::registry]\ !=\ CFF\_UNDEF\_SID;\ \}}
\DoxyCodeLine{00692\ }
\DoxyCodeLine{00693\ \ \ \mbox{\hyperlink{struct_c_f_f_1_1name__dict__values__t}{name\_dict\_values\_t}}\ \ nameSIDs;}
\DoxyCodeLine{00694\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ \ \ \ ros\_supplement\_offset;}
\DoxyCodeLine{00695\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ \ \ \ ros\_supplement;}
\DoxyCodeLine{00696\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ \ \ \ cidCount;}
\DoxyCodeLine{00697\ }
\DoxyCodeLine{00698\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ \ \ \ EncodingOffset;}
\DoxyCodeLine{00699\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ \ \ \ CharsetOffset;}
\DoxyCodeLine{00700\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ \ \ \ FDSelectOffset;}
\DoxyCodeLine{00701\ \ \ \mbox{\hyperlink{struct_c_f_f_1_1table__info__t}{table\_info\_t}}\ \ \ \ privateDictInfo;}
\DoxyCodeLine{00702\ \};}
\DoxyCodeLine{00703\ }
\DoxyCodeLine{00704\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_c_f_f_1_1cff1__top__dict__opset__t}{cff1\_top\_dict\_opset\_t}}\ :\ \mbox{\hyperlink{struct_c_f_f_1_1top__dict__opset__t}{top\_dict\_opset\_t}}<cff1\_top\_dict\_val\_t>}
\DoxyCodeLine{00705\ \{}
\DoxyCodeLine{00706\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ process\_op\ (op\_code\_t\ op,\ \mbox{\hyperlink{struct_c_f_f_1_1cff1__top__dict__interp__env__t}{cff1\_top\_dict\_interp\_env\_t}}\&\ env,\ \mbox{\hyperlink{struct_c_f_f_1_1cff1__top__dict__values__t}{cff1\_top\_dict\_values\_t}}\&\ dictval)}
\DoxyCodeLine{00707\ \ \ \{}
\DoxyCodeLine{00708\ \ \ \ \ \mbox{\hyperlink{struct_c_f_f_1_1cff1__top__dict__val__t}{cff1\_top\_dict\_val\_t}}\ \ val;}
\DoxyCodeLine{00709\ \ \ \ \ val.last\_arg\_offset\ =\ (env.last\_offset-\/1)\ -\/\ dictval.opStart;\ \ \textcolor{comment}{/*\ offset\ to\ the\ last\ argument\ */}}
\DoxyCodeLine{00710\ }
\DoxyCodeLine{00711\ \ \ \ \ switch\ (op)\ \{}
\DoxyCodeLine{00712\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_version:}
\DoxyCodeLine{00713\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_Notice:}
\DoxyCodeLine{00714\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_Copyright:}
\DoxyCodeLine{00715\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_FullName:}
\DoxyCodeLine{00716\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_FontName:}
\DoxyCodeLine{00717\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_FamilyName:}
\DoxyCodeLine{00718\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_Weight:}
\DoxyCodeLine{00719\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_PostScript:}
\DoxyCodeLine{00720\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_BaseFontName:}
\DoxyCodeLine{00721\ \ \ \ \ dictval.nameSIDs[name\_dict\_values\_t::name\_op\_to\_index\ (op)]\ =\ env.argStack.pop\_uint\ ();}
\DoxyCodeLine{00722\ \ \ \ \ env.clear\_args\ ();}
\DoxyCodeLine{00723\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00724\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_isFixedPitch:}
\DoxyCodeLine{00725\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_ItalicAngle:}
\DoxyCodeLine{00726\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_UnderlinePosition:}
\DoxyCodeLine{00727\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_UnderlineThickness:}
\DoxyCodeLine{00728\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_PaintType:}
\DoxyCodeLine{00729\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_CharstringType:}
\DoxyCodeLine{00730\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_UniqueID:}
\DoxyCodeLine{00731\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_StrokeWidth:}
\DoxyCodeLine{00732\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_SyntheticBase:}
\DoxyCodeLine{00733\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_CIDFontVersion:}
\DoxyCodeLine{00734\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_CIDFontRevision:}
\DoxyCodeLine{00735\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_CIDFontType:}
\DoxyCodeLine{00736\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_UIDBase:}
\DoxyCodeLine{00737\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_FontBBox:}
\DoxyCodeLine{00738\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_XUID:}
\DoxyCodeLine{00739\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_BaseFontBlend:}
\DoxyCodeLine{00740\ \ \ \ \ env.clear\_args\ ();}
\DoxyCodeLine{00741\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00742\ }
\DoxyCodeLine{00743\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_CIDCount:}
\DoxyCodeLine{00744\ \ \ \ \ dictval.cidCount\ =\ env.argStack.pop\_uint\ ();}
\DoxyCodeLine{00745\ \ \ \ \ env.clear\_args\ ();}
\DoxyCodeLine{00746\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00747\ }
\DoxyCodeLine{00748\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_ROS:}
\DoxyCodeLine{00749\ \ \ \ \ dictval.ros\_supplement\ =\ env.argStack.pop\_uint\ ();}
\DoxyCodeLine{00750\ \ \ \ \ dictval.nameSIDs[name\_dict\_values\_t::ordering]\ =\ env.argStack.pop\_uint\ ();}
\DoxyCodeLine{00751\ \ \ \ \ dictval.nameSIDs[name\_dict\_values\_t::registry]\ =\ env.argStack.pop\_uint\ ();}
\DoxyCodeLine{00752\ \ \ \ \ env.clear\_args\ ();}
\DoxyCodeLine{00753\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00754\ }
\DoxyCodeLine{00755\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_Encoding:}
\DoxyCodeLine{00756\ \ \ \ \ dictval.EncodingOffset\ =\ env.argStack.pop\_uint\ ();}
\DoxyCodeLine{00757\ \ \ \ \ env.clear\_args\ ();}
\DoxyCodeLine{00758\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (dictval.EncodingOffset\ ==\ 0))\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00759\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00760\ }
\DoxyCodeLine{00761\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_charset:}
\DoxyCodeLine{00762\ \ \ \ \ dictval.CharsetOffset\ =\ env.argStack.pop\_uint\ ();}
\DoxyCodeLine{00763\ \ \ \ \ env.clear\_args\ ();}
\DoxyCodeLine{00764\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (dictval.CharsetOffset\ ==\ 0))\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00765\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00766\ }
\DoxyCodeLine{00767\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_FDSelect:}
\DoxyCodeLine{00768\ \ \ \ \ dictval.FDSelectOffset\ =\ env.argStack.pop\_uint\ ();}
\DoxyCodeLine{00769\ \ \ \ \ env.clear\_args\ ();}
\DoxyCodeLine{00770\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00771\ }
\DoxyCodeLine{00772\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_Private:}
\DoxyCodeLine{00773\ \ \ \ \ dictval.privateDictInfo.offset\ =\ env.argStack.pop\_uint\ ();}
\DoxyCodeLine{00774\ \ \ \ \ dictval.privateDictInfo.size\ =\ env.argStack.pop\_uint\ ();}
\DoxyCodeLine{00775\ \ \ \ \ env.clear\_args\ ();}
\DoxyCodeLine{00776\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00777\ }
\DoxyCodeLine{00778\ \ \ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00779\ \ \ \ \ env.last\_offset\ =\ env.str\_ref.offset;}
\DoxyCodeLine{00780\ \ \ \ \ \mbox{\hyperlink{struct_c_f_f_1_1top__dict__opset__t}{top\_dict\_opset\_t<cff1\_top\_dict\_val\_t>::process\_op}}\ (op,\ env,\ dictval);}
\DoxyCodeLine{00781\ \ \ \ \ \textcolor{comment}{/*\ Record\ this\ operand\ below\ if\ stack\ is\ empty,\ otherwise\ done\ */}}
\DoxyCodeLine{00782\ \ \ \ \ \textcolor{keywordflow}{if}\ (!env.argStack.is\_empty\ ())\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00783\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00784\ \ \ \ \ \}}
\DoxyCodeLine{00785\ }
\DoxyCodeLine{00786\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (env.in\_error\ ()))\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00787\ }
\DoxyCodeLine{00788\ \ \ \ \ dictval.add\_op\ (op,\ env.str\_ref,\ val);}
\DoxyCodeLine{00789\ \ \ \}}
\DoxyCodeLine{00790\ \};}
\DoxyCodeLine{00791\ }
\DoxyCodeLine{00792\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_c_f_f_1_1cff1__font__dict__values__t}{cff1\_font\_dict\_values\_t}}\ :\ \mbox{\hyperlink{struct_c_f_f_1_1dict__values__t}{dict\_values\_t}}<op\_str\_t>}
\DoxyCodeLine{00793\ \{}
\DoxyCodeLine{00794\ \ \ \textcolor{keywordtype}{void}\ init\ ()}
\DoxyCodeLine{00795\ \ \ \{}
\DoxyCodeLine{00796\ \ \ \ \ \mbox{\hyperlink{struct_c_f_f_1_1dict__values__t}{dict\_values\_t<op\_str\_t>::init}}\ ();}
\DoxyCodeLine{00797\ \ \ \ \ privateDictInfo.init\ ();}
\DoxyCodeLine{00798\ \ \ \ \ fontName\ =\ CFF\_UNDEF\_SID;}
\DoxyCodeLine{00799\ \ \ \}}
\DoxyCodeLine{00800\ \ \ \textcolor{keywordtype}{void}\ fini\ ()\ \{\ \mbox{\hyperlink{struct_c_f_f_1_1dict__values__t}{dict\_values\_t<op\_str\_t>::fini}}\ ();\ \}}
\DoxyCodeLine{00801\ }
\DoxyCodeLine{00802\ \ \ \mbox{\hyperlink{struct_c_f_f_1_1table__info__t}{table\_info\_t}}\ \ \ \ \ \ \ privateDictInfo;}
\DoxyCodeLine{00803\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ \ \ \ fontName;}
\DoxyCodeLine{00804\ \};}
\DoxyCodeLine{00805\ }
\DoxyCodeLine{00806\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_c_f_f_1_1cff1__font__dict__opset__t}{cff1\_font\_dict\_opset\_t}}\ :\ \mbox{\hyperlink{struct_c_f_f_1_1dict__opset__t}{dict\_opset\_t}}}
\DoxyCodeLine{00807\ \{}
\DoxyCodeLine{00808\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ process\_op\ (op\_code\_t\ op,\ \mbox{\hyperlink{struct_c_f_f_1_1interp__env__t}{num\_interp\_env\_t}}\&\ env,\ \mbox{\hyperlink{struct_c_f_f_1_1cff1__font__dict__values__t}{cff1\_font\_dict\_values\_t}}\&\ dictval)}
\DoxyCodeLine{00809\ \ \ \{}
\DoxyCodeLine{00810\ \ \ \ \ \textcolor{keywordflow}{switch}\ (op)\ \{}
\DoxyCodeLine{00811\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_FontName:}
\DoxyCodeLine{00812\ \ \ \ \ dictval.fontName\ =\ env.argStack.pop\_uint\ ();}
\DoxyCodeLine{00813\ \ \ \ \ env.clear\_args\ ();}
\DoxyCodeLine{00814\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00815\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_FontMatrix:}
\DoxyCodeLine{00816\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_PaintType:}
\DoxyCodeLine{00817\ \ \ \ \ env.clear\_args\ ();}
\DoxyCodeLine{00818\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00819\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_Private:}
\DoxyCodeLine{00820\ \ \ \ \ dictval.privateDictInfo.offset\ =\ env.argStack.pop\_uint\ ();}
\DoxyCodeLine{00821\ \ \ \ \ dictval.privateDictInfo.size\ =\ env.argStack.pop\_uint\ ();}
\DoxyCodeLine{00822\ \ \ \ \ env.clear\_args\ ();}
\DoxyCodeLine{00823\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00824\ }
\DoxyCodeLine{00825\ \ \ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00826\ \ \ \ \ dict\_opset\_t::process\_op\ (op,\ env);}
\DoxyCodeLine{00827\ \ \ \ \ \textcolor{keywordflow}{if}\ (!env.argStack.is\_empty\ ())\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00828\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00829\ \ \ \ \ \}}
\DoxyCodeLine{00830\ }
\DoxyCodeLine{00831\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (env.in\_error\ ()))\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00832\ }
\DoxyCodeLine{00833\ \ \ \ \ dictval.add\_op\ (op,\ env.str\_ref);}
\DoxyCodeLine{00834\ \ \ \}}
\DoxyCodeLine{00835\ \};}
\DoxyCodeLine{00836\ }
\DoxyCodeLine{00837\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ VAL>}
\DoxyCodeLine{00838\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_c_f_f_1_1cff1__private__dict__values__base__t}{cff1\_private\_dict\_values\_base\_t}}\ :\ \mbox{\hyperlink{struct_c_f_f_1_1dict__values__t}{dict\_values\_t}}<VAL>}
\DoxyCodeLine{00839\ \{}
\DoxyCodeLine{00840\ \ \ \textcolor{keywordtype}{void}\ init\ ()}
\DoxyCodeLine{00841\ \ \ \{}
\DoxyCodeLine{00842\ \ \ \ \ \mbox{\hyperlink{struct_c_f_f_1_1dict__values__t}{dict\_values\_t<VAL>::init}}\ ();}
\DoxyCodeLine{00843\ \ \ \ \ subrsOffset\ =\ 0;}
\DoxyCodeLine{00844\ \ \ \ \ localSubrs\ =\ \&\mbox{\hyperlink{struct_null}{Null}}\ (\mbox{\hyperlink{struct_c_f_f_1_1_subrs}{CFF1Subrs}});}
\DoxyCodeLine{00845\ \ \ \}}
\DoxyCodeLine{00846\ \ \ \textcolor{keywordtype}{void}\ fini\ ()\ \{\ \mbox{\hyperlink{struct_c_f_f_1_1dict__values__t}{dict\_values\_t<VAL>::fini}}\ ();\ \}}
\DoxyCodeLine{00847\ }
\DoxyCodeLine{00848\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ \ \ \ \ \ subrsOffset;}
\DoxyCodeLine{00849\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_c_f_f_1_1_subrs}{CFF1Subrs}}\ \ \ \ *localSubrs;}
\DoxyCodeLine{00850\ \};}
\DoxyCodeLine{00851\ }
\DoxyCodeLine{00852\ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{struct_c_f_f_1_1cff1__private__dict__values__base__t}{cff1\_private\_dict\_values\_base\_t<op\_str\_t>}}\ \mbox{\hyperlink{struct_c_f_f_1_1cff1__private__dict__values__base__t}{cff1\_private\_dict\_values\_subset\_t}};}
\DoxyCodeLine{00853\ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{struct_c_f_f_1_1cff1__private__dict__values__base__t}{cff1\_private\_dict\_values\_base\_t<num\_dict\_val\_t>}}\ \mbox{\hyperlink{struct_c_f_f_1_1cff1__private__dict__values__base__t}{cff1\_private\_dict\_values\_t}};}
\DoxyCodeLine{00854\ }
\DoxyCodeLine{00855\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_c_f_f_1_1cff1__private__dict__opset__t}{cff1\_private\_dict\_opset\_t}}\ :\ \mbox{\hyperlink{struct_c_f_f_1_1dict__opset__t}{dict\_opset\_t}}}
\DoxyCodeLine{00856\ \{}
\DoxyCodeLine{00857\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ process\_op\ (op\_code\_t\ op,\ \mbox{\hyperlink{struct_c_f_f_1_1interp__env__t}{num\_interp\_env\_t}}\&\ env,\ \mbox{\hyperlink{struct_c_f_f_1_1cff1__private__dict__values__base__t}{cff1\_private\_dict\_values\_t}}\&\ dictval)}
\DoxyCodeLine{00858\ \ \ \{}
\DoxyCodeLine{00859\ \ \ \ \ \mbox{\hyperlink{struct_c_f_f_1_1dict__val__t}{num\_dict\_val\_t}}\ val;}
\DoxyCodeLine{00860\ \ \ \ \ val.init\ ();}
\DoxyCodeLine{00861\ }
\DoxyCodeLine{00862\ \ \ \ \ \textcolor{keywordflow}{switch}\ (op)\ \{}
\DoxyCodeLine{00863\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_BlueValues:}
\DoxyCodeLine{00864\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_OtherBlues:}
\DoxyCodeLine{00865\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_FamilyBlues:}
\DoxyCodeLine{00866\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_FamilyOtherBlues:}
\DoxyCodeLine{00867\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_StemSnapH:}
\DoxyCodeLine{00868\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_StemSnapV:}
\DoxyCodeLine{00869\ \ \ \ \ env.clear\_args\ ();}
\DoxyCodeLine{00870\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00871\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_StdHW:}
\DoxyCodeLine{00872\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_StdVW:}
\DoxyCodeLine{00873\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_BlueScale:}
\DoxyCodeLine{00874\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_BlueShift:}
\DoxyCodeLine{00875\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_BlueFuzz:}
\DoxyCodeLine{00876\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_ForceBold:}
\DoxyCodeLine{00877\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_LanguageGroup:}
\DoxyCodeLine{00878\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_ExpansionFactor:}
\DoxyCodeLine{00879\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_initialRandomSeed:}
\DoxyCodeLine{00880\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_defaultWidthX:}
\DoxyCodeLine{00881\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_nominalWidthX:}
\DoxyCodeLine{00882\ \ \ \ \ val.single\_val\ =\ env.argStack.pop\_num\ ();}
\DoxyCodeLine{00883\ \ \ \ \ env.clear\_args\ ();}
\DoxyCodeLine{00884\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00885\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_Subrs:}
\DoxyCodeLine{00886\ \ \ \ \ dictval.subrsOffset\ =\ env.argStack.pop\_uint\ ();}
\DoxyCodeLine{00887\ \ \ \ \ env.clear\_args\ ();}
\DoxyCodeLine{00888\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00889\ }
\DoxyCodeLine{00890\ \ \ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00891\ \ \ \ \ dict\_opset\_t::process\_op\ (op,\ env);}
\DoxyCodeLine{00892\ \ \ \ \ \textcolor{keywordflow}{if}\ (!env.argStack.is\_empty\ ())\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00893\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00894\ \ \ \ \ \}}
\DoxyCodeLine{00895\ }
\DoxyCodeLine{00896\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (env.in\_error\ ()))\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00897\ }
\DoxyCodeLine{00898\ \ \ \ \ dictval.add\_op\ (op,\ env.str\_ref,\ val);}
\DoxyCodeLine{00899\ \ \ \}}
\DoxyCodeLine{00900\ \};}
\DoxyCodeLine{00901\ }
\DoxyCodeLine{00902\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_c_f_f_1_1cff1__private__dict__opset__subset}{cff1\_private\_dict\_opset\_subset}}\ :\ \mbox{\hyperlink{struct_c_f_f_1_1dict__opset__t}{dict\_opset\_t}}}
\DoxyCodeLine{00903\ \{}
\DoxyCodeLine{00904\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ process\_op\ (op\_code\_t\ op,\ \mbox{\hyperlink{struct_c_f_f_1_1interp__env__t}{num\_interp\_env\_t}}\&\ env,\ \mbox{\hyperlink{struct_c_f_f_1_1cff1__private__dict__values__base__t}{cff1\_private\_dict\_values\_subset\_t}}\&\ dictval)}
\DoxyCodeLine{00905\ \ \ \{}
\DoxyCodeLine{00906\ \ \ \ \ \textcolor{keywordflow}{switch}\ (op)\ \{}
\DoxyCodeLine{00907\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_BlueValues:}
\DoxyCodeLine{00908\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_OtherBlues:}
\DoxyCodeLine{00909\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_FamilyBlues:}
\DoxyCodeLine{00910\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_FamilyOtherBlues:}
\DoxyCodeLine{00911\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_StemSnapH:}
\DoxyCodeLine{00912\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_StemSnapV:}
\DoxyCodeLine{00913\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_StdHW:}
\DoxyCodeLine{00914\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_StdVW:}
\DoxyCodeLine{00915\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_BlueScale:}
\DoxyCodeLine{00916\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_BlueShift:}
\DoxyCodeLine{00917\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_BlueFuzz:}
\DoxyCodeLine{00918\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_ForceBold:}
\DoxyCodeLine{00919\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_LanguageGroup:}
\DoxyCodeLine{00920\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_ExpansionFactor:}
\DoxyCodeLine{00921\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_initialRandomSeed:}
\DoxyCodeLine{00922\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_defaultWidthX:}
\DoxyCodeLine{00923\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_nominalWidthX:}
\DoxyCodeLine{00924\ \ \ \ \ env.clear\_args\ ();}
\DoxyCodeLine{00925\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00926\ }
\DoxyCodeLine{00927\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ OpCode\_Subrs:}
\DoxyCodeLine{00928\ \ \ \ \ dictval.subrsOffset\ =\ env.argStack.pop\_uint\ ();}
\DoxyCodeLine{00929\ \ \ \ \ env.clear\_args\ ();}
\DoxyCodeLine{00930\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00931\ }
\DoxyCodeLine{00932\ \ \ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00933\ \ \ \ \ dict\_opset\_t::process\_op\ (op,\ env);}
\DoxyCodeLine{00934\ \ \ \ \ \textcolor{keywordflow}{if}\ (!env.argStack.is\_empty\ ())\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00935\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00936\ \ \ \ \ \}}
\DoxyCodeLine{00937\ }
\DoxyCodeLine{00938\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (env.in\_error\ ()))\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00939\ }
\DoxyCodeLine{00940\ \ \ \ \ dictval.add\_op\ (op,\ env.str\_ref);}
\DoxyCodeLine{00941\ \ \ \}}
\DoxyCodeLine{00942\ \};}
\DoxyCodeLine{00943\ }
\DoxyCodeLine{00944\ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{struct_c_f_f_1_1dict__interpreter__t}{dict\_interpreter\_t<cff1\_top\_dict\_opset\_t,\ cff1\_top\_dict\_values\_t,\ cff1\_top\_dict\_interp\_env\_t>}}\ \mbox{\hyperlink{struct_c_f_f_1_1dict__interpreter__t}{cff1\_top\_dict\_interpreter\_t}};}
\DoxyCodeLine{00945\ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{struct_c_f_f_1_1dict__interpreter__t}{dict\_interpreter\_t<cff1\_font\_dict\_opset\_t,\ cff1\_font\_dict\_values\_t>}}\ \mbox{\hyperlink{struct_c_f_f_1_1dict__interpreter__t}{cff1\_font\_dict\_interpreter\_t}};}
\DoxyCodeLine{00946\ }
\DoxyCodeLine{00947\ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{struct_c_f_f_1_1_c_f_f_index}{CFF1Index}}\ \mbox{\hyperlink{struct_c_f_f_1_1_c_f_f_index}{CFF1NameIndex}};}
\DoxyCodeLine{00948\ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{struct_c_f_f_1_1_c_f_f1_index_of}{CFF1IndexOf<TopDict>}}\ \mbox{\hyperlink{struct_c_f_f_1_1_c_f_f1_index_of}{CFF1TopDictIndex}};}
\DoxyCodeLine{00949\ }
\DoxyCodeLine{00950\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_c_f_f_1_1cff1__font__dict__values__mod__t}{cff1\_font\_dict\_values\_mod\_t}}}
\DoxyCodeLine{00951\ \{}
\DoxyCodeLine{00952\ \ \ \mbox{\hyperlink{struct_c_f_f_1_1cff1__font__dict__values__mod__t}{cff1\_font\_dict\_values\_mod\_t}}()\ \{\ init\ ();\ \}}
\DoxyCodeLine{00953\ }
\DoxyCodeLine{00954\ \ \ \textcolor{keywordtype}{void}\ init\ ()\ \{\ init\ (\ \&\mbox{\hyperlink{struct_null}{Null}}\ (\mbox{\hyperlink{struct_c_f_f_1_1cff1__font__dict__values__t}{cff1\_font\_dict\_values\_t}}),\ CFF\_UNDEF\_SID\ );\ \}}
\DoxyCodeLine{00955\ }
\DoxyCodeLine{00956\ \ \ \textcolor{keywordtype}{void}\ init\ (\textcolor{keyword}{const}\ \mbox{\hyperlink{struct_c_f_f_1_1cff1__font__dict__values__t}{cff1\_font\_dict\_values\_t}}\ *base\_,}
\DoxyCodeLine{00957\ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ fontName\_)}
\DoxyCodeLine{00958\ \ \ \{}
\DoxyCodeLine{00959\ \ \ \ \ base\ =\ base\_;}
\DoxyCodeLine{00960\ \ \ \ \ fontName\ =\ fontName\_;}
\DoxyCodeLine{00961\ \ \ \ \ privateDictInfo.init\ ();}
\DoxyCodeLine{00962\ \ \ \}}
\DoxyCodeLine{00963\ }
\DoxyCodeLine{00964\ \ \ \textcolor{keywordtype}{unsigned}\ get\_count\ ()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ base-\/>get\_count\ ();\ \}}
\DoxyCodeLine{00965\ }
\DoxyCodeLine{00966\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_c_f_f_1_1op__str__t}{op\_str\_t}}\ \&operator\ []\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ i)\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ (*base)[i];\ \}}
\DoxyCodeLine{00967\ }
\DoxyCodeLine{00968\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_c_f_f_1_1cff1__font__dict__values__t}{cff1\_font\_dict\_values\_t}}\ \ \ \ *base;}
\DoxyCodeLine{00969\ \ \ \mbox{\hyperlink{struct_c_f_f_1_1table__info__t}{table\_info\_t}}\ \ \ \ \ \ \ \ \ privateDictInfo;}
\DoxyCodeLine{00970\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ \ \ \ \ \ fontName;}
\DoxyCodeLine{00971\ \};}
\DoxyCodeLine{00972\ }
\DoxyCodeLine{00973\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_c_f_f_1_1_c_f_f1_f_d_array}{CFF1FDArray}}\ :\ \mbox{\hyperlink{struct_c_f_f_1_1_f_d_array}{FDArray}}<HBUINT16>}
\DoxyCodeLine{00974\ \{}
\DoxyCodeLine{00975\ \ \ \textcolor{comment}{/*\ FDArray::serialize()\ requires\ this\ partial\ specialization\ to\ compile\ */}}
\DoxyCodeLine{00976\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ ITER,\ \textcolor{keyword}{typename}\ OP\_SERIALIZER>}
\DoxyCodeLine{00977\ \ \ \textcolor{keywordtype}{bool}\ serialize\ (\mbox{\hyperlink{structhb__serialize__context__t}{hb\_serialize\_context\_t}}\ *c,\ ITER\ it,\ OP\_SERIALIZER\&\ opszr)}
\DoxyCodeLine{00978\ \ \ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{struct_c_f_f_1_1_f_d_array}{FDArray<HBUINT16>::serialize<cff1\_font\_dict\_values\_mod\_t,\ cff1\_font\_dict\_values\_mod\_t>}}\ (c,\ it,\ opszr);\ \}}
\DoxyCodeLine{00979\ \};}
\DoxyCodeLine{00980\ }
\DoxyCodeLine{00981\ \}\ \textcolor{comment}{/*\ namespace\ CFF\ */}}
\DoxyCodeLine{00982\ }
\DoxyCodeLine{00983\ \textcolor{keyword}{namespace\ }OT\ \{}
\DoxyCodeLine{00984\ }
\DoxyCodeLine{00985\ \textcolor{keyword}{using\ namespace\ }CFF;}
\DoxyCodeLine{00986\ }
\DoxyCodeLine{00987\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_o_t_1_1cff1}{cff1}}}
\DoxyCodeLine{00988\ \{}
\DoxyCodeLine{00989\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ hb\_tag\_t\ tableTag\ =\ HB\_OT\_TAG\_cff1;}
\DoxyCodeLine{00990\ }
\DoxyCodeLine{00991\ \ \ \textcolor{keywordtype}{bool}\ sanitize\ (\mbox{\hyperlink{structhb__sanitize__context__t}{hb\_sanitize\_context\_t}}\ *c)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00992\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00993\ \ \ \ \ TRACE\_SANITIZE\ (\textcolor{keyword}{this});}
\DoxyCodeLine{00994\ \ \ \ \ return\_trace\ (c-\/>check\_struct\ (\textcolor{keyword}{this})\ \&\&}
\DoxyCodeLine{00995\ \ \ \ \ \ \ \ \ \ \ likely\ (version.major\ ==\ 1));}
\DoxyCodeLine{00996\ \ \ \}}
\DoxyCodeLine{00997\ }
\DoxyCodeLine{00998\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ PRIVOPSET,\ \textcolor{keyword}{typename}\ PRIVDICTVAL>}
\DoxyCodeLine{00999\ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_o_t_1_1cff1_1_1accelerator__templ__t}{accelerator\_templ\_t}}}
\DoxyCodeLine{01000\ \ \ \{}
\DoxyCodeLine{01001\ \ \ \ \ \textcolor{keywordtype}{void}\ init\ (\mbox{\hyperlink{structhb__face__t}{hb\_face\_t}}\ *face)}
\DoxyCodeLine{01002\ \ \ \ \ \{}
\DoxyCodeLine{01003\ \ \ \ \ \ \ topDict.init\ ();}
\DoxyCodeLine{01004\ \ \ \ \ \ \ fontDicts.init\ ();}
\DoxyCodeLine{01005\ \ \ \ \ \ \ privateDicts.init\ ();}
\DoxyCodeLine{01006\ }
\DoxyCodeLine{01007\ \ \ \ \ \ \ this-\/>blob\ =\ sc.reference\_table<\mbox{\hyperlink{struct_o_t_1_1cff1}{cff1}}>\ (face);}
\DoxyCodeLine{01008\ }
\DoxyCodeLine{01009\ \ \ \ \ \ \ \textcolor{comment}{/*\ setup\ for\ run-\/time\ santization\ */}}
\DoxyCodeLine{01010\ \ \ \ \ \ \ sc.init\ (this-\/>blob);}
\DoxyCodeLine{01011\ \ \ \ \ \ \ sc.start\_processing\ ();}
\DoxyCodeLine{01012\ }
\DoxyCodeLine{01013\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1cff1}{OT::cff1}}\ *cff\ =\ this-\/>blob-\/>template\ as<OT::cff1>\ ();}
\DoxyCodeLine{01014\ }
\DoxyCodeLine{01015\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (cff\ ==\ \&\mbox{\hyperlink{struct_null}{Null}}\ (\mbox{\hyperlink{struct_o_t_1_1cff1}{OT::cff1}}))}
\DoxyCodeLine{01016\ \ \ \ \ \ \ \{\ fini\ ();\ \textcolor{keywordflow}{return};\ \}}
\DoxyCodeLine{01017\ }
\DoxyCodeLine{01018\ \ \ \ \ \ \ nameIndex\ =\ \&cff-\/>nameIndex\ (cff);}
\DoxyCodeLine{01019\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((nameIndex\ ==\ \&\mbox{\hyperlink{struct_null}{Null}}\ (\mbox{\hyperlink{struct_c_f_f_1_1_c_f_f_index}{CFF1NameIndex}}))\ ||\ !nameIndex-\/>sanitize\ (\&sc))}
\DoxyCodeLine{01020\ \ \ \ \ \ \ \{\ fini\ ();\ \textcolor{keywordflow}{return};\ \}}
\DoxyCodeLine{01021\ }
\DoxyCodeLine{01022\ \ \ \ \ \ \ topDictIndex\ =\ \&StructAtOffset<CFF1TopDictIndex>\ (nameIndex,\ nameIndex-\/>get\_size\ ());}
\DoxyCodeLine{01023\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((topDictIndex\ ==\ \&\mbox{\hyperlink{struct_null}{Null}}\ (\mbox{\hyperlink{struct_c_f_f_1_1_c_f_f1_index_of}{CFF1TopDictIndex}}))\ ||\ !topDictIndex-\/>sanitize\ (\&sc)\ ||\ (topDictIndex-\/>count\ ==\ 0))}
\DoxyCodeLine{01024\ \ \ \ \ \ \ \{\ fini\ ();\ \textcolor{keywordflow}{return};\ \}}
\DoxyCodeLine{01025\ }
\DoxyCodeLine{01026\ \ \ \ \ \ \ \{\ \textcolor{comment}{/*\ parse\ top\ dict\ */}}
\DoxyCodeLine{01027\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_c_f_f_1_1byte__str__t}{byte\_str\_t}}\ topDictStr\ =\ (*topDictIndex)[0];}
\DoxyCodeLine{01028\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!topDictStr.sanitize\ (\&sc)))\ \{\ fini\ ();\ \textcolor{keywordflow}{return};\ \}}
\DoxyCodeLine{01029\ \ \ \ \ \mbox{\hyperlink{struct_c_f_f_1_1dict__interpreter__t}{cff1\_top\_dict\_interpreter\_t}}\ top\_interp;}
\DoxyCodeLine{01030\ \ \ \ \ top\_interp.env.init\ (topDictStr);}
\DoxyCodeLine{01031\ \ \ \ \ topDict.init\ ();}
\DoxyCodeLine{01032\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!top\_interp.interpret\ (topDict)))\ \{\ fini\ ();\ \textcolor{keywordflow}{return};\ \}}
\DoxyCodeLine{01033\ \ \ \ \ \ \ \}}
\DoxyCodeLine{01034\ }
\DoxyCodeLine{01035\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (is\_predef\_charset\ ())}
\DoxyCodeLine{01036\ \ \ \ \ charset\ =\ \&\mbox{\hyperlink{struct_null}{Null}}\ (\mbox{\hyperlink{struct_c_f_f_1_1_charset}{Charset}});}
\DoxyCodeLine{01037\ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{01038\ \ \ \ \ \ \ \{}
\DoxyCodeLine{01039\ \ \ \ \ charset\ =\ \&StructAtOffsetOrNull<Charset>\ (cff,\ topDict.CharsetOffset);}
\DoxyCodeLine{01040\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ ((charset\ ==\ \&\mbox{\hyperlink{struct_null}{Null}}\ (\mbox{\hyperlink{struct_c_f_f_1_1_charset}{Charset}}))\ ||\ !charset-\/>sanitize\ (\&sc)))\ \{\ fini\ ();\ \textcolor{keywordflow}{return};\ \}}
\DoxyCodeLine{01041\ \ \ \ \ \ \ \}}
\DoxyCodeLine{01042\ }
\DoxyCodeLine{01043\ \ \ \ \ \ \ fdCount\ =\ 1;}
\DoxyCodeLine{01044\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (is\_CID\ ())}
\DoxyCodeLine{01045\ \ \ \ \ \ \ \{}
\DoxyCodeLine{01046\ \ \ \ \ fdArray\ =\ \&StructAtOffsetOrNull<CFF1FDArray>\ (cff,\ topDict.FDArrayOffset);}
\DoxyCodeLine{01047\ \ \ \ \ fdSelect\ =\ \&StructAtOffsetOrNull<CFF1FDSelect>\ (cff,\ topDict.FDSelectOffset);}
\DoxyCodeLine{01048\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ ((fdArray\ ==\ \&\mbox{\hyperlink{struct_null}{Null}}\ (\mbox{\hyperlink{struct_c_f_f_1_1_c_f_f1_f_d_array}{CFF1FDArray}}))\ ||\ !fdArray-\/>sanitize\ (\&sc)\ ||}
\DoxyCodeLine{01049\ \ \ \ \ \ \ \ \ (fdSelect\ ==\ \&\mbox{\hyperlink{struct_null}{Null}}\ (\mbox{\hyperlink{struct_c_f_f_1_1_c_f_f1_f_d_select}{CFF1FDSelect}}))\ ||\ !fdSelect-\/>sanitize\ (\&sc,\ fdArray-\/>count)))}
\DoxyCodeLine{01050\ \ \ \ \ \{\ fini\ ();\ \textcolor{keywordflow}{return};\ \}}
\DoxyCodeLine{01051\ }
\DoxyCodeLine{01052\ \ \ \ \ fdCount\ =\ fdArray-\/>count;}
\DoxyCodeLine{01053\ \ \ \ \ \ \ \}}
\DoxyCodeLine{01054\ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{01055\ \ \ \ \ \ \ \{}
\DoxyCodeLine{01056\ \ \ \ \ fdArray\ =\ \&\mbox{\hyperlink{struct_null}{Null}}\ (\mbox{\hyperlink{struct_c_f_f_1_1_c_f_f1_f_d_array}{CFF1FDArray}});}
\DoxyCodeLine{01057\ \ \ \ \ fdSelect\ =\ \&\mbox{\hyperlink{struct_null}{Null}}\ (\mbox{\hyperlink{struct_c_f_f_1_1_c_f_f1_f_d_select}{CFF1FDSelect}});}
\DoxyCodeLine{01058\ \ \ \ \ \ \ \}}
\DoxyCodeLine{01059\ }
\DoxyCodeLine{01060\ \ \ \ \ \ \ encoding\ =\ \&\mbox{\hyperlink{struct_null}{Null}}\ (\mbox{\hyperlink{struct_c_f_f_1_1_encoding}{Encoding}});}
\DoxyCodeLine{01061\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (is\_CID\ ())}
\DoxyCodeLine{01062\ \ \ \ \ \ \ \{}
\DoxyCodeLine{01063\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (charset\ ==\ \&\mbox{\hyperlink{struct_null}{Null}}\ (\mbox{\hyperlink{struct_c_f_f_1_1_charset}{Charset}})))\ \{\ fini\ ();\ \textcolor{keywordflow}{return};\ \}}
\DoxyCodeLine{01064\ \ \ \ \ \ \ \}}
\DoxyCodeLine{01065\ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{01066\ \ \ \ \ \ \ \{}
\DoxyCodeLine{01067\ \ \ \ \ \textcolor{keywordflow}{if}\ (!is\_predef\_encoding\ ())}
\DoxyCodeLine{01068\ \ \ \ \ \{}
\DoxyCodeLine{01069\ \ \ \ \ \ \ encoding\ =\ \&StructAtOffsetOrNull<Encoding>\ (cff,\ topDict.EncodingOffset);}
\DoxyCodeLine{01070\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ ((encoding\ ==\ \&\mbox{\hyperlink{struct_null}{Null}}\ (\mbox{\hyperlink{struct_c_f_f_1_1_encoding}{Encoding}}))\ ||\ !encoding-\/>sanitize\ (\&sc)))\ \{\ fini\ ();\ \textcolor{keywordflow}{return};\ \}}
\DoxyCodeLine{01071\ \ \ \ \ \}}
\DoxyCodeLine{01072\ \ \ \ \ \ \ \}}
\DoxyCodeLine{01073\ }
\DoxyCodeLine{01074\ \ \ \ \ \ \ stringIndex\ =\ \&StructAtOffset<CFF1StringIndex>\ (topDictIndex,\ topDictIndex-\/>get\_size\ ());}
\DoxyCodeLine{01075\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((stringIndex\ ==\ \&\mbox{\hyperlink{struct_null}{Null}}\ (\mbox{\hyperlink{struct_c_f_f_1_1_c_f_f1_string_index}{CFF1StringIndex}}))\ ||\ !stringIndex-\/>sanitize\ (\&sc))}
\DoxyCodeLine{01076\ \ \ \ \ \ \ \{\ fini\ ();\ \textcolor{keywordflow}{return};\ \}}
\DoxyCodeLine{01077\ }
\DoxyCodeLine{01078\ \ \ \ \ \ \ globalSubrs\ =\ \&StructAtOffset<CFF1Subrs>\ (stringIndex,\ stringIndex-\/>get\_size\ ());}
\DoxyCodeLine{01079\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((globalSubrs\ !=\ \&\mbox{\hyperlink{struct_null}{Null}}\ (\mbox{\hyperlink{struct_c_f_f_1_1_subrs}{CFF1Subrs}}))\ \&\&\ !globalSubrs-\/>sanitize\ (\&sc))}
\DoxyCodeLine{01080\ \ \ \ \ \ \ \{\ fini\ ();\ \textcolor{keywordflow}{return};\ \}}
\DoxyCodeLine{01081\ }
\DoxyCodeLine{01082\ \ \ \ \ \ \ charStrings\ =\ \&StructAtOffsetOrNull<CFF1CharStrings>\ (cff,\ topDict.charStringsOffset);}
\DoxyCodeLine{01083\ }
\DoxyCodeLine{01084\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((charStrings\ ==\ \&\mbox{\hyperlink{struct_null}{Null}}\ (\mbox{\hyperlink{struct_c_f_f_1_1_c_f_f_index}{CFF1CharStrings}}))\ ||\ unlikely\ (!charStrings-\/>sanitize\ (\&sc)))}
\DoxyCodeLine{01085\ \ \ \ \ \ \ \{\ fini\ ();\ \textcolor{keywordflow}{return};\ \}}
\DoxyCodeLine{01086\ }
\DoxyCodeLine{01087\ \ \ \ \ \ \ num\_glyphs\ =\ charStrings-\/>count;}
\DoxyCodeLine{01088\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (num\_glyphs\ !=\ sc.get\_num\_glyphs\ ())}
\DoxyCodeLine{01089\ \ \ \ \ \ \ \{\ fini\ ();\ \textcolor{keywordflow}{return};\ \}}
\DoxyCodeLine{01090\ }
\DoxyCodeLine{01091\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!privateDicts.resize\ (fdCount)))}
\DoxyCodeLine{01092\ \ \ \ \ \ \ \{\ fini\ ();\ \textcolor{keywordflow}{return};\ \}}
\DoxyCodeLine{01093\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ fdCount;\ i++)}
\DoxyCodeLine{01094\ \ \ \ \ privateDicts[i].init\ ();}
\DoxyCodeLine{01095\ }
\DoxyCodeLine{01096\ \ \ \ \ \ \ \textcolor{comment}{//\ parse\ CID\ font\ dicts\ and\ gather\ private\ dicts}}
\DoxyCodeLine{01097\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (is\_CID\ ())}
\DoxyCodeLine{01098\ \ \ \ \ \ \ \{}
\DoxyCodeLine{01099\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ fdCount;\ i++)}
\DoxyCodeLine{01100\ \ \ \ \ \{}
\DoxyCodeLine{01101\ \ \ \ \ \ \ \mbox{\hyperlink{struct_c_f_f_1_1byte__str__t}{byte\_str\_t}}\ fontDictStr\ =\ (*fdArray)[i];}
\DoxyCodeLine{01102\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!fontDictStr.sanitize\ (\&sc)))\ \{\ fini\ ();\ \textcolor{keywordflow}{return};\ \}}
\DoxyCodeLine{01103\ \ \ \ \ \ \ \mbox{\hyperlink{struct_c_f_f_1_1cff1__font__dict__values__t}{cff1\_font\_dict\_values\_t}}\ *font;}
\DoxyCodeLine{01104\ \ \ \ \ \ \ \mbox{\hyperlink{struct_c_f_f_1_1dict__interpreter__t}{cff1\_font\_dict\_interpreter\_t}}\ font\_interp;}
\DoxyCodeLine{01105\ \ \ \ \ \ \ font\_interp.env.init\ (fontDictStr);}
\DoxyCodeLine{01106\ \ \ \ \ \ \ font\ =\ fontDicts.push\ ();}
\DoxyCodeLine{01107\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (font\ ==\ \&Crap\ (\mbox{\hyperlink{struct_c_f_f_1_1cff1__font__dict__values__t}{cff1\_font\_dict\_values\_t}})))\ \{\ fini\ ();\ \textcolor{keywordflow}{return};\ \}}
\DoxyCodeLine{01108\ \ \ \ \ \ \ font-\/>init\ ();}
\DoxyCodeLine{01109\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!font\_interp.interpret\ (*font)))\ \{\ fini\ ();\ \textcolor{keywordflow}{return};\ \}}
\DoxyCodeLine{01110\ \ \ \ \ \ \ PRIVDICTVAL\ *priv\ =\ \&privateDicts[i];}
\DoxyCodeLine{01111\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_c_f_f_1_1byte__str__t}{byte\_str\_t}}\ privDictStr\ (StructAtOffset<UnsizedByteStr>\ (cff,\ font-\/>privateDictInfo.offset),\ font-\/>privateDictInfo.size);}
\DoxyCodeLine{01112\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!privDictStr.sanitize\ (\&sc)))\ \{\ fini\ ();\ \textcolor{keywordflow}{return};\ \}}
\DoxyCodeLine{01113\ \ \ \ \ \ \ \mbox{\hyperlink{struct_c_f_f_1_1dict__interpreter__t}{dict\_interpreter\_t<PRIVOPSET,\ PRIVDICTVAL>}}\ priv\_interp;}
\DoxyCodeLine{01114\ \ \ \ \ \ \ priv\_interp.env.init\ (privDictStr);}
\DoxyCodeLine{01115\ \ \ \ \ \ \ priv-\/>init\ ();}
\DoxyCodeLine{01116\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!priv\_interp.interpret\ (*priv)))\ \{\ fini\ ();\ \textcolor{keywordflow}{return};\ \}}
\DoxyCodeLine{01117\ }
\DoxyCodeLine{01118\ \ \ \ \ \ \ priv-\/>localSubrs\ =\ \&StructAtOffsetOrNull<CFF1Subrs>\ (\&privDictStr,\ priv-\/>subrsOffset);}
\DoxyCodeLine{01119\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (priv-\/>localSubrs\ !=\ \&\mbox{\hyperlink{struct_null}{Null}}\ (\mbox{\hyperlink{struct_c_f_f_1_1_subrs}{CFF1Subrs}})\ \&\&}
\DoxyCodeLine{01120\ \ \ \ \ \ \ \ \ \ \ unlikely\ (!priv-\/>localSubrs-\/>sanitize\ (\&sc)))}
\DoxyCodeLine{01121\ \ \ \ \ \ \ \{\ fini\ ();\ \textcolor{keywordflow}{return};\ \}}
\DoxyCodeLine{01122\ \ \ \ \ \}}
\DoxyCodeLine{01123\ \ \ \ \ \ \ \}}
\DoxyCodeLine{01124\ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \ \textcolor{comment}{/*\ non-\/CID\ */}}
\DoxyCodeLine{01125\ \ \ \ \ \ \ \{}
\DoxyCodeLine{01126\ \ \ \ \ \mbox{\hyperlink{struct_c_f_f_1_1cff1__top__dict__values__t}{cff1\_top\_dict\_values\_t}}\ *font\ =\ \&topDict;}
\DoxyCodeLine{01127\ \ \ \ \ PRIVDICTVAL\ *priv\ =\ \&privateDicts[0];}
\DoxyCodeLine{01128\ }
\DoxyCodeLine{01129\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_c_f_f_1_1byte__str__t}{byte\_str\_t}}\ privDictStr\ (StructAtOffset<UnsizedByteStr>\ (cff,\ font-\/>privateDictInfo.offset),\ font-\/>privateDictInfo.size);}
\DoxyCodeLine{01130\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!privDictStr.sanitize\ (\&sc)))\ \{\ fini\ ();\ \textcolor{keywordflow}{return};\ \}}
\DoxyCodeLine{01131\ \ \ \ \ \mbox{\hyperlink{struct_c_f_f_1_1dict__interpreter__t}{dict\_interpreter\_t<PRIVOPSET,\ PRIVDICTVAL>}}\ priv\_interp;}
\DoxyCodeLine{01132\ \ \ \ \ priv\_interp.env.init\ (privDictStr);}
\DoxyCodeLine{01133\ \ \ \ \ priv-\/>init\ ();}
\DoxyCodeLine{01134\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!priv\_interp.interpret\ (*priv)))\ \{\ fini\ ();\ \textcolor{keywordflow}{return};\ \}}
\DoxyCodeLine{01135\ }
\DoxyCodeLine{01136\ \ \ \ \ priv-\/>localSubrs\ =\ \&StructAtOffsetOrNull<CFF1Subrs>\ (\&privDictStr,\ priv-\/>subrsOffset);}
\DoxyCodeLine{01137\ \ \ \ \ \textcolor{keywordflow}{if}\ (priv-\/>localSubrs\ !=\ \&\mbox{\hyperlink{struct_null}{Null}}\ (\mbox{\hyperlink{struct_c_f_f_1_1_subrs}{CFF1Subrs}})\ \&\&}
\DoxyCodeLine{01138\ \ \ \ \ \ \ \ \ unlikely\ (!priv-\/>localSubrs-\/>sanitize\ (\&sc)))}
\DoxyCodeLine{01139\ \ \ \ \ \{\ fini\ ();\ \textcolor{keywordflow}{return};\ \}}
\DoxyCodeLine{01140\ \ \ \ \ \ \ \}}
\DoxyCodeLine{01141\ \ \ \ \ \}}
\DoxyCodeLine{01142\ }
\DoxyCodeLine{01143\ \ \ \ \ \textcolor{keywordtype}{void}\ fini\ ()}
\DoxyCodeLine{01144\ \ \ \ \ \{}
\DoxyCodeLine{01145\ \ \ \ \ \ \ sc.end\_processing\ ();}
\DoxyCodeLine{01146\ \ \ \ \ \ \ topDict.fini\ ();}
\DoxyCodeLine{01147\ \ \ \ \ \ \ fontDicts.fini\ ();}
\DoxyCodeLine{01148\ \ \ \ \ \ \ privateDicts.fini\ ();}
\DoxyCodeLine{01149\ \ \ \ \ \ \ hb\_blob\_destroy\ (blob);}
\DoxyCodeLine{01150\ \ \ \ \ \ \ blob\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{01151\ \ \ \ \ \}}
\DoxyCodeLine{01152\ }
\DoxyCodeLine{01153\ \ \ \ \ \textcolor{keywordtype}{bool}\ is\_valid\ ()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ blob;\ \}}
\DoxyCodeLine{01154\ \ \ \ \ \textcolor{keywordtype}{bool}\ \ \ is\_CID\ ()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ topDict.is\_CID\ ();\ \}}
\DoxyCodeLine{01155\ }
\DoxyCodeLine{01156\ \ \ \ \ \textcolor{keywordtype}{bool}\ is\_predef\_charset\ ()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ topDict.CharsetOffset\ <=\ ExpertSubsetCharset;\ \}}
\DoxyCodeLine{01157\ }
\DoxyCodeLine{01158\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ std\_code\_to\_glyph\ (hb\_codepoint\_t\ \mbox{\hyperlink{structcode}{code}})\textcolor{keyword}{\ const}}
\DoxyCodeLine{01159\ \textcolor{keyword}{\ \ \ \ }\{}
\DoxyCodeLine{01160\ \ \ \ \ \ \ hb\_codepoint\_t\ sid\ =\ lookup\_standard\_encoding\_for\_sid\ (\mbox{\hyperlink{structcode}{code}});}
\DoxyCodeLine{01161\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (sid\ ==\ CFF\_UNDEF\_SID))}
\DoxyCodeLine{01162\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{01163\ }
\DoxyCodeLine{01164\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (charset\ !=\ \&\mbox{\hyperlink{struct_null}{Null}}\ (\mbox{\hyperlink{struct_c_f_f_1_1_charset}{Charset}}))}
\DoxyCodeLine{01165\ \ \ \ \ \textcolor{keywordflow}{return}\ charset-\/>get\_glyph\ (sid,\ num\_glyphs);}
\DoxyCodeLine{01166\ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ ((topDict.CharsetOffset\ ==\ ISOAdobeCharset)}
\DoxyCodeLine{01167\ \ \ \ \ \ \ \ \ \ \ \&\&\ (\mbox{\hyperlink{structcode}{code}}\ <=\ 228\ \textcolor{comment}{/*zcaron*/}))\ \textcolor{keywordflow}{return}\ sid;}
\DoxyCodeLine{01168\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{01169\ \ \ \ \ \}}
\DoxyCodeLine{01170\ }
\DoxyCodeLine{01171\ \ \ \ \ \textcolor{keywordtype}{bool}\ is\_predef\_encoding\ ()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ topDict.EncodingOffset\ <=\ ExpertEncoding;\ \}}
\DoxyCodeLine{01172\ }
\DoxyCodeLine{01173\ \ \ \ \ hb\_codepoint\_t\ glyph\_to\_code\ (hb\_codepoint\_t\ glyph)\textcolor{keyword}{\ const}}
\DoxyCodeLine{01174\ \textcolor{keyword}{\ \ \ \ }\{}
\DoxyCodeLine{01175\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (encoding\ !=\ \&\mbox{\hyperlink{struct_null}{Null}}\ (\mbox{\hyperlink{struct_c_f_f_1_1_encoding}{Encoding}}))}
\DoxyCodeLine{01176\ \ \ \ \ \textcolor{keywordflow}{return}\ encoding-\/>get\_code\ (glyph);}
\DoxyCodeLine{01177\ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{01178\ \ \ \ \ \ \ \{}
\DoxyCodeLine{01179\ \ \ \ \ hb\_codepoint\_t\ sid\ =\ glyph\_to\_sid\ (glyph);}
\DoxyCodeLine{01180\ \ \ \ \ \textcolor{keywordflow}{if}\ (sid\ ==\ 0)\ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{01181\ \ \ \ \ hb\_codepoint\_t\ \mbox{\hyperlink{structcode}{code}}\ =\ 0;}
\DoxyCodeLine{01182\ \ \ \ \ \textcolor{keywordflow}{switch}\ (topDict.EncodingOffset)}
\DoxyCodeLine{01183\ \ \ \ \ \{}
\DoxyCodeLine{01184\ \ \ \ \ \textcolor{keywordflow}{case}\ StandardEncoding:}
\DoxyCodeLine{01185\ \ \ \ \ \ \ \mbox{\hyperlink{structcode}{code}}\ =\ lookup\_standard\_encoding\_for\_code\ (sid);}
\DoxyCodeLine{01186\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01187\ \ \ \ \ \textcolor{keywordflow}{case}\ ExpertEncoding:}
\DoxyCodeLine{01188\ \ \ \ \ \ \ \mbox{\hyperlink{structcode}{code}}\ =\ lookup\_expert\_encoding\_for\_code\ (sid);}
\DoxyCodeLine{01189\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01190\ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{01191\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01192\ \ \ \ \ \}}
\DoxyCodeLine{01193\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structcode}{code}};}
\DoxyCodeLine{01194\ \ \ \ \ \ \ \}}
\DoxyCodeLine{01195\ \ \ \ \ \}}
\DoxyCodeLine{01196\ }
\DoxyCodeLine{01197\ \ \ \ \ hb\_codepoint\_t\ glyph\_to\_sid\ (hb\_codepoint\_t\ glyph)\textcolor{keyword}{\ const}}
\DoxyCodeLine{01198\ \textcolor{keyword}{\ \ \ \ }\{}
\DoxyCodeLine{01199\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (charset\ !=\ \&\mbox{\hyperlink{struct_null}{Null}}\ (\mbox{\hyperlink{struct_c_f_f_1_1_charset}{Charset}}))}
\DoxyCodeLine{01200\ \ \ \ \ \textcolor{keywordflow}{return}\ charset-\/>get\_sid\ (glyph,\ num\_glyphs);}
\DoxyCodeLine{01201\ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{01202\ \ \ \ \ \ \ \{}
\DoxyCodeLine{01203\ \ \ \ \ hb\_codepoint\_t\ sid\ =\ 0;}
\DoxyCodeLine{01204\ \ \ \ \ \textcolor{keywordflow}{switch}\ (topDict.CharsetOffset)}
\DoxyCodeLine{01205\ \ \ \ \ \{}
\DoxyCodeLine{01206\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ ISOAdobeCharset:}
\DoxyCodeLine{01207\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (glyph\ <=\ 228\ \textcolor{comment}{/*zcaron*/})\ sid\ =\ glyph;}
\DoxyCodeLine{01208\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01209\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ ExpertCharset:}
\DoxyCodeLine{01210\ \ \ \ \ \ \ \ \ sid\ =\ lookup\_expert\_charset\_for\_sid\ (glyph);}
\DoxyCodeLine{01211\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01212\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ ExpertSubsetCharset:}
\DoxyCodeLine{01213\ \ \ \ \ \ \ \ \ \ \ sid\ =\ lookup\_expert\_subset\_charset\_for\_sid\ (glyph);}
\DoxyCodeLine{01214\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01215\ \ \ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{01216\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01217\ \ \ \ \ \}}
\DoxyCodeLine{01218\ \ \ \ \ \textcolor{keywordflow}{return}\ sid;}
\DoxyCodeLine{01219\ \ \ \ \ \ \ \}}
\DoxyCodeLine{01220\ \ \ \ \ \}}
\DoxyCodeLine{01221\ }
\DoxyCodeLine{01222\ \ \ \ \ hb\_codepoint\_t\ sid\_to\_glyph\ (hb\_codepoint\_t\ sid)\textcolor{keyword}{\ const}}
\DoxyCodeLine{01223\ \textcolor{keyword}{\ \ \ \ }\{}
\DoxyCodeLine{01224\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (charset\ !=\ \&\mbox{\hyperlink{struct_null}{Null}}\ (\mbox{\hyperlink{struct_c_f_f_1_1_charset}{Charset}}))}
\DoxyCodeLine{01225\ \ \ \ \ \textcolor{keywordflow}{return}\ charset-\/>get\_glyph\ (sid,\ num\_glyphs);}
\DoxyCodeLine{01226\ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{01227\ \ \ \ \ \ \ \{}
\DoxyCodeLine{01228\ \ \ \ \ hb\_codepoint\_t\ glyph\ =\ 0;}
\DoxyCodeLine{01229\ \ \ \ \ \textcolor{keywordflow}{switch}\ (topDict.CharsetOffset)}
\DoxyCodeLine{01230\ \ \ \ \ \{}
\DoxyCodeLine{01231\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ ISOAdobeCharset:}
\DoxyCodeLine{01232\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (sid\ <=\ 228\ \textcolor{comment}{/*zcaron*/})\ glyph\ =\ sid;}
\DoxyCodeLine{01233\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01234\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ ExpertCharset:}
\DoxyCodeLine{01235\ \ \ \ \ \ \ \ \ glyph\ =\ lookup\_expert\_charset\_for\_glyph\ (sid);}
\DoxyCodeLine{01236\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01237\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ ExpertSubsetCharset:}
\DoxyCodeLine{01238\ \ \ \ \ \ \ \ \ glyph\ =\ lookup\_expert\_subset\_charset\_for\_glyph\ (sid);}
\DoxyCodeLine{01239\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01240\ \ \ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{01241\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01242\ \ \ \ \ \}}
\DoxyCodeLine{01243\ \ \ \ \ \textcolor{keywordflow}{return}\ glyph;}
\DoxyCodeLine{01244\ \ \ \ \ \ \ \}}
\DoxyCodeLine{01245\ \ \ \ \ \}}
\DoxyCodeLine{01246\ }
\DoxyCodeLine{01247\ \ \ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{01248\ \ \ \ \ \mbox{\hyperlink{structhb__blob__t}{hb\_blob\_t}}\ \ \ \ \ \ \ \ \ \ \ \ \ *blob\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{01249\ \ \ \ \ \mbox{\hyperlink{structhb__sanitize__context__t}{hb\_sanitize\_context\_t}}\ \ \ sc;}
\DoxyCodeLine{01250\ }
\DoxyCodeLine{01251\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{01252\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_c_f_f_1_1_encoding}{Encoding}}\ \ \ \ \ \ *encoding\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{01253\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_c_f_f_1_1_charset}{Charset}}\ \ \ \ \ \ \ \ *charset\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{01254\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_c_f_f_1_1_c_f_f_index}{CFF1NameIndex}}\ \ \ \ \ *nameIndex\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{01255\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_c_f_f_1_1_c_f_f1_index_of}{CFF1TopDictIndex}}\ \ *topDictIndex\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{01256\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_c_f_f_1_1_c_f_f1_string_index}{CFF1StringIndex}}\ \ \ *stringIndex\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{01257\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_c_f_f_1_1_subrs}{CFF1Subrs}}\ \ \ \ \ \ \ \ *globalSubrs\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{01258\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_c_f_f_1_1_c_f_f_index}{CFF1CharStrings}}\ \ \ *charStrings\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{01259\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_c_f_f_1_1_c_f_f1_f_d_array}{CFF1FDArray}}\ \ \ \ \ \ \ *fdArray\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{01260\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_c_f_f_1_1_c_f_f1_f_d_select}{CFF1FDSelect}}\ \ \ \ \ \ *fdSelect\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{01261\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ \ \ \ \ \ \ \ \ fdCount\ =\ 0;}
\DoxyCodeLine{01262\ }
\DoxyCodeLine{01263\ \ \ \ \ \mbox{\hyperlink{struct_c_f_f_1_1cff1__top__dict__values__t}{cff1\_top\_dict\_values\_t}}\ \ \ topDict;}
\DoxyCodeLine{01264\ \ \ \ \ \mbox{\hyperlink{structhb__vector__t}{hb\_vector\_t<cff1\_font\_dict\_values\_t>}}}
\DoxyCodeLine{01265\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ fontDicts;}
\DoxyCodeLine{01266\ \ \ \ \ \mbox{\hyperlink{structhb__vector__t}{hb\_vector\_t<PRIVDICTVAL>}}\ privateDicts;}
\DoxyCodeLine{01267\ }
\DoxyCodeLine{01268\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ \ \ \ \ \ \ \ \ num\_glyphs\ =\ 0;}
\DoxyCodeLine{01269\ \ \ \};}
\DoxyCodeLine{01270\ }
\DoxyCodeLine{01271\ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_o_t_1_1cff1_1_1accelerator__t}{accelerator\_t}}\ :\ \mbox{\hyperlink{struct_o_t_1_1cff1_1_1accelerator__templ__t}{accelerator\_templ\_t}}<cff1\_private\_dict\_opset\_t,\ cff1\_private\_dict\_values\_t>}
\DoxyCodeLine{01272\ \ \ \{}
\DoxyCodeLine{01273\ \ \ \ \ \mbox{\hyperlink{struct_o_t_1_1cff1_1_1accelerator__t}{accelerator\_t}}\ (\mbox{\hyperlink{structhb__face__t}{hb\_face\_t}}\ *face)}
\DoxyCodeLine{01274\ \ \ \ \ \{}
\DoxyCodeLine{01275\ \ \ \ \ \ \ SUPER::init\ (face);}
\DoxyCodeLine{01276\ }
\DoxyCodeLine{01277\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!is\_valid\ ())\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{01278\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (is\_CID\ ())\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{01279\ }
\DoxyCodeLine{01280\ \ \ \ \ \ \ \textcolor{comment}{/*\ fill\ glyph\_names\ */}}
\DoxyCodeLine{01281\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (hb\_codepoint\_t\ gid\ =\ 0;\ gid\ <\ num\_glyphs;\ gid++)}
\DoxyCodeLine{01282\ \ \ \ \ \ \ \{}
\DoxyCodeLine{01283\ \ \ \ \ hb\_codepoint\_t\ \ sid\ =\ glyph\_to\_sid\ (gid);}
\DoxyCodeLine{01284\ \ \ \ \ gname\_t\ gname;}
\DoxyCodeLine{01285\ \ \ \ \ gname.sid\ =\ sid;}
\DoxyCodeLine{01286\ \ \ \ \ \textcolor{keywordflow}{if}\ (sid\ <\ cff1\_std\_strings\_length)}
\DoxyCodeLine{01287\ \ \ \ \ \ \ gname.name\ =\ cff1\_std\_strings\ (sid);}
\DoxyCodeLine{01288\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{01289\ \ \ \ \ \{}
\DoxyCodeLine{01290\ \ \ \ \ \ \ \mbox{\hyperlink{struct_c_f_f_1_1byte__str__t}{byte\_str\_t}}\ \ ustr\ =\ (*stringIndex)[sid\ -\/\ cff1\_std\_strings\_length];}
\DoxyCodeLine{01291\ \ \ \ \ \ \ gname.name\ =\ \mbox{\hyperlink{structhb__array__t}{hb\_bytes\_t}}\ ((\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*)ustr.arrayZ,\ ustr.length);}
\DoxyCodeLine{01292\ \ \ \ \ \}}
\DoxyCodeLine{01293\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!gname.name.arrayZ))\ \{\ fini\ ();\ \textcolor{keywordflow}{return};\ \}}
\DoxyCodeLine{01294\ \ \ \ \ glyph\_names.push\ (gname);}
\DoxyCodeLine{01295\ \ \ \ \ \ \ \}}
\DoxyCodeLine{01296\ \ \ \ \ \ \ glyph\_names.qsort\ ();}
\DoxyCodeLine{01297\ \ \ \ \ \}}
\DoxyCodeLine{01298\ \ \ \ \ \mbox{\hyperlink{struct_o_t_1_1cff1_1_1accelerator__t}{\string~accelerator\_t}}\ ()}
\DoxyCodeLine{01299\ \ \ \ \ \{}
\DoxyCodeLine{01300\ \ \ \ \ \ \ glyph\_names.fini\ ();}
\DoxyCodeLine{01301\ }
\DoxyCodeLine{01302\ \ \ \ \ \ \ SUPER::fini\ ();}
\DoxyCodeLine{01303\ \ \ \ \ \}}
\DoxyCodeLine{01304\ }
\DoxyCodeLine{01305\ \ \ \ \ \textcolor{keywordtype}{bool}\ get\_glyph\_name\ (hb\_codepoint\_t\ glyph,}
\DoxyCodeLine{01306\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{char}\ *\mbox{\hyperlink{structbuf}{buf}},\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ buf\_len)\textcolor{keyword}{\ const}}
\DoxyCodeLine{01307\ \textcolor{keyword}{\ \ \ \ }\{}
\DoxyCodeLine{01308\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{structbuf}{buf}})\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{01309\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!is\_valid\ ()))\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{01310\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (is\_CID())\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{01311\ \ \ \ \ \ \ hb\_codepoint\_t\ sid\ =\ glyph\_to\_sid\ (glyph);}
\DoxyCodeLine{01312\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *str;}
\DoxyCodeLine{01313\ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ str\_len;}
\DoxyCodeLine{01314\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (sid\ <\ cff1\_std\_strings\_length)}
\DoxyCodeLine{01315\ \ \ \ \ \ \ \{}
\DoxyCodeLine{01316\ \ \ \ \ \mbox{\hyperlink{structhb__array__t}{hb\_bytes\_t}}\ byte\_str\ =\ cff1\_std\_strings\ (sid);}
\DoxyCodeLine{01317\ \ \ \ \ str\ =\ byte\_str.arrayZ;}
\DoxyCodeLine{01318\ \ \ \ \ str\_len\ =\ byte\_str.length;}
\DoxyCodeLine{01319\ \ \ \ \ \ \ \}}
\DoxyCodeLine{01320\ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{01321\ \ \ \ \ \ \ \{}
\DoxyCodeLine{01322\ \ \ \ \ \mbox{\hyperlink{struct_c_f_f_1_1byte__str__t}{byte\_str\_t}}\ ubyte\_str\ =\ (*stringIndex)[sid\ -\/\ cff1\_std\_strings\_length];}
\DoxyCodeLine{01323\ \ \ \ \ str\ =\ (\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *)ubyte\_str.arrayZ;}
\DoxyCodeLine{01324\ \ \ \ \ str\_len\ =\ ubyte\_str.length;}
\DoxyCodeLine{01325\ \ \ \ \ \ \ \}}
\DoxyCodeLine{01326\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!str\_len)\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{01327\ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ len\ =\ hb\_min\ (buf\_len\ -\/\ 1,\ str\_len);}
\DoxyCodeLine{01328\ \ \ \ \ \ \ strncpy\ (\mbox{\hyperlink{structbuf}{buf}},\ (\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*)str,\ len);}
\DoxyCodeLine{01329\ \ \ \ \ \ \ \mbox{\hyperlink{structbuf}{buf}}[len]\ =\ \textcolor{charliteral}{'\(\backslash\)0'};}
\DoxyCodeLine{01330\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{01331\ \ \ \ \ \}}
\DoxyCodeLine{01332\ }
\DoxyCodeLine{01333\ \ \ \ \ \textcolor{keywordtype}{bool}\ get\_glyph\_from\_name\ (\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *\mbox{\hyperlink{struct_o_t_1_1name}{name}},\ \textcolor{keywordtype}{int}\ len,}
\DoxyCodeLine{01334\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ hb\_codepoint\_t\ *glyph)\textcolor{keyword}{\ const}}
\DoxyCodeLine{01335\ \textcolor{keyword}{\ \ \ \ }\{}
\DoxyCodeLine{01336\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (len\ <\ 0)\ len\ =\ strlen\ (\mbox{\hyperlink{struct_o_t_1_1name}{name}});}
\DoxyCodeLine{01337\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!len))\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{01338\ }
\DoxyCodeLine{01339\ \ \ \ \ \ \ gname\_t\ key\ =\ \{\ \mbox{\hyperlink{structhb__array__t}{hb\_bytes\_t}}\ (\mbox{\hyperlink{struct_o_t_1_1name}{name}},\ len),\ 0\ \};}
\DoxyCodeLine{01340\ \ \ \ \ \ \ \textcolor{keyword}{const}\ gname\_t\ *gname\ =\ glyph\_names.bsearch\ (key);}
\DoxyCodeLine{01341\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!gname)\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{01342\ \ \ \ \ \ \ hb\_codepoint\_t\ gid\ =\ sid\_to\_glyph\ (gname-\/>sid);}
\DoxyCodeLine{01343\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!gid\ \&\&\ gname-\/>sid)\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{01344\ \ \ \ \ \ \ *glyph\ =\ gid;}
\DoxyCodeLine{01345\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{01346\ \ \ \ \ \}}
\DoxyCodeLine{01347\ }
\DoxyCodeLine{01348\ \ \ \ \ HB\_INTERNAL\ \textcolor{keywordtype}{bool}\ get\_extents\ (\mbox{\hyperlink{structhb__font__t}{hb\_font\_t}}\ *font,\ hb\_codepoint\_t\ glyph,\ \mbox{\hyperlink{structhb__glyph__extents__t}{hb\_glyph\_extents\_t}}\ *extents)\ \textcolor{keyword}{const};}
\DoxyCodeLine{01349\ \ \ \ \ HB\_INTERNAL\ \textcolor{keywordtype}{bool}\ get\_seac\_components\ (hb\_codepoint\_t\ glyph,\ hb\_codepoint\_t\ *base,\ hb\_codepoint\_t\ *accent)\ \textcolor{keyword}{const};}
\DoxyCodeLine{01350\ \ \ \ \ HB\_INTERNAL\ \textcolor{keywordtype}{bool}\ get\_path\ (\mbox{\hyperlink{structhb__font__t}{hb\_font\_t}}\ *font,\ hb\_codepoint\_t\ glyph,\ \mbox{\hyperlink{structhb__draw__session__t}{hb\_draw\_session\_t}}\ \&draw\_session)\ \textcolor{keyword}{const};}
\DoxyCodeLine{01351\ }
\DoxyCodeLine{01352\ \ \ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{01353\ \ \ \ \ \textcolor{keyword}{struct\ }gname\_t}
\DoxyCodeLine{01354\ \ \ \ \ \{}
\DoxyCodeLine{01355\ \ \ \ \ \ \ \mbox{\hyperlink{structhb__array__t}{hb\_bytes\_t}}\ \ \mbox{\hyperlink{struct_o_t_1_1name}{name}};}
\DoxyCodeLine{01356\ \ \ \ \ \ \ uint16\_t\ \ \ \ \ \ sid;}
\DoxyCodeLine{01357\ }
\DoxyCodeLine{01358\ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ cmp\ (\textcolor{keyword}{const}\ \textcolor{keywordtype}{void}\ *a\_,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}\ *b\_)}
\DoxyCodeLine{01359\ \ \ \ \ \ \ \{}
\DoxyCodeLine{01360\ \ \ \ \ \textcolor{keyword}{const}\ gname\_t\ *\mbox{\hyperlink{structa}{a}}\ =\ (\textcolor{keyword}{const}\ gname\_t\ *)a\_;}
\DoxyCodeLine{01361\ \ \ \ \ \textcolor{keyword}{const}\ gname\_t\ *b\ =\ (\textcolor{keyword}{const}\ gname\_t\ *)b\_;}
\DoxyCodeLine{01362\ \ \ \ \ \textcolor{keywordtype}{int}\ minlen\ =\ hb\_min\ (\mbox{\hyperlink{structa}{a}}-\/>name.length,\ b-\/>name.length);}
\DoxyCodeLine{01363\ \ \ \ \ \textcolor{keywordtype}{int}\ ret\ =\ strncmp\ (\mbox{\hyperlink{structa}{a}}-\/>name.arrayZ,\ b-\/>name.arrayZ,\ minlen);}
\DoxyCodeLine{01364\ \ \ \ \ \textcolor{keywordflow}{if}\ (ret)\ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{01365\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structa}{a}}-\/>name.length\ -\/\ b-\/>name.length;}
\DoxyCodeLine{01366\ \ \ \ \ \ \ \}}
\DoxyCodeLine{01367\ }
\DoxyCodeLine{01368\ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ cmp\ (\textcolor{keyword}{const}\ gname\_t\ \&\mbox{\hyperlink{structa}{a}})\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ cmp\ (\&\mbox{\hyperlink{structa}{a}},\ \textcolor{keyword}{this});\ \}}
\DoxyCodeLine{01369\ \ \ \ \ \};}
\DoxyCodeLine{01370\ }
\DoxyCodeLine{01371\ \ \ \ \ \mbox{\hyperlink{structhb__vector__t}{hb\_sorted\_vector\_t<gname\_t>}}\ \ glyph\_names;}
\DoxyCodeLine{01372\ }
\DoxyCodeLine{01373\ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{struct_o_t_1_1cff1_1_1accelerator__templ__t}{accelerator\_templ\_t<cff1\_private\_dict\_opset\_t,\ cff1\_private\_dict\_values\_t>}}\ \mbox{\hyperlink{struct_o_t_1_1cff1_1_1accelerator__templ__t}{SUPER}};}
\DoxyCodeLine{01374\ \ \ \};}
\DoxyCodeLine{01375\ }
\DoxyCodeLine{01376\ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_o_t_1_1cff1_1_1accelerator__subset__t}{accelerator\_subset\_t}}\ :\ \mbox{\hyperlink{struct_o_t_1_1cff1_1_1accelerator__templ__t}{accelerator\_templ\_t}}<cff1\_private\_dict\_opset\_subset,\ cff1\_private\_dict\_values\_subset\_t>\ \{\};}
\DoxyCodeLine{01377\ }
\DoxyCodeLine{01378\ \ \ \textcolor{keywordtype}{bool}\ subset\ (\mbox{\hyperlink{structhb__subset__context__t}{hb\_subset\_context\_t}}\ *c)\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ hb\_subset\_cff1\ (c);\ \}}
\DoxyCodeLine{01379\ }
\DoxyCodeLine{01380\ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{01381\ \ \ HB\_INTERNAL\ \textcolor{keyword}{static}\ hb\_codepoint\_t\ lookup\_standard\_encoding\_for\_code\ (hb\_codepoint\_t\ sid);}
\DoxyCodeLine{01382\ \ \ HB\_INTERNAL\ \textcolor{keyword}{static}\ hb\_codepoint\_t\ lookup\_expert\_encoding\_for\_code\ (hb\_codepoint\_t\ sid);}
\DoxyCodeLine{01383\ \ \ HB\_INTERNAL\ \textcolor{keyword}{static}\ hb\_codepoint\_t\ lookup\_expert\_charset\_for\_sid\ (hb\_codepoint\_t\ glyph);}
\DoxyCodeLine{01384\ \ \ HB\_INTERNAL\ \textcolor{keyword}{static}\ hb\_codepoint\_t\ lookup\_expert\_subset\_charset\_for\_sid\ (hb\_codepoint\_t\ glyph);}
\DoxyCodeLine{01385\ \ \ HB\_INTERNAL\ \textcolor{keyword}{static}\ hb\_codepoint\_t\ lookup\_expert\_charset\_for\_glyph\ (hb\_codepoint\_t\ sid);}
\DoxyCodeLine{01386\ \ \ HB\_INTERNAL\ \textcolor{keyword}{static}\ hb\_codepoint\_t\ lookup\_expert\_subset\_charset\_for\_glyph\ (hb\_codepoint\_t\ sid);}
\DoxyCodeLine{01387\ \ \ HB\_INTERNAL\ \textcolor{keyword}{static}\ hb\_codepoint\_t\ lookup\_standard\_encoding\_for\_sid\ (hb\_codepoint\_t\ \mbox{\hyperlink{structcode}{code}});}
\DoxyCodeLine{01388\ }
\DoxyCodeLine{01389\ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{01390\ \ \ \mbox{\hyperlink{struct_o_t_1_1_fixed_version}{FixedVersion<HBUINT8>}}\ version;\ \ \ \ \ \textcolor{comment}{/*\ Version\ of\ CFF\ table.\ set\ to\ 0x0100u\ */}}
\DoxyCodeLine{01391\ \ \ \mbox{\hyperlink{struct_o_t_1_1_offset_to}{NNOffsetTo<CFF1NameIndex,\ HBUINT8>}}\ nameIndex;\ \textcolor{comment}{/*\ headerSize\ =\ Offset\ to\ Name\ INDEX.\ */}}
\DoxyCodeLine{01392\ \ \ \mbox{\hyperlink{struct_o_t_1_1_int_type}{HBUINT8}}\ \ \ \ \ \ \ \ \ \ \ offSize;\ \ \ \textcolor{comment}{/*\ offset\ size\ (unused?)\ */}}
\DoxyCodeLine{01393\ }
\DoxyCodeLine{01394\ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{01395\ \ \ DEFINE\_SIZE\_STATIC\ (4);}
\DoxyCodeLine{01396\ \};}
\DoxyCodeLine{01397\ }
\DoxyCodeLine{01398\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_o_t_1_1cff1__accelerator__t}{cff1\_accelerator\_t}}\ :\ \mbox{\hyperlink{struct_o_t_1_1cff1_1_1accelerator__t}{cff1::accelerator\_t}}\ \{}
\DoxyCodeLine{01399\ \ \ \mbox{\hyperlink{struct_o_t_1_1cff1__accelerator__t}{cff1\_accelerator\_t}}\ (\mbox{\hyperlink{structhb__face__t}{hb\_face\_t}}\ *face)\ :\ \mbox{\hyperlink{struct_o_t_1_1cff1_1_1accelerator__t}{cff1::accelerator\_t}}\ (face)\ \{\}}
\DoxyCodeLine{01400\ \};}
\DoxyCodeLine{01401\ }
\DoxyCodeLine{01402\ \}\ \textcolor{comment}{/*\ namespace\ OT\ */}}
\DoxyCodeLine{01403\ }
\DoxyCodeLine{01404\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ HB\_OT\_CFF1\_TABLE\_HH\ */}\textcolor{preprocessor}{}}

\end{DoxyCode}
