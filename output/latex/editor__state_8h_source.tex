\hypertarget{editor__state_8h_source}{}\doxysection{editor\+\_\+state.\+h}
\label{editor__state_8h_source}\index{AseSprite/aseprite/src/app/ui/editor/editor\_state.h@{AseSprite/aseprite/src/app/ui/editor/editor\_state.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ Aseprite}}
\DoxyCodeLine{00002\ \textcolor{comment}{//\ Copyright\ (C)\ 2019-\/2020\ \ Igara\ Studio\ S.A.}}
\DoxyCodeLine{00003\ \textcolor{comment}{//\ Copyright\ (C)\ 2001-\/2016\ \ David\ Capello}}
\DoxyCodeLine{00004\ \textcolor{comment}{//}}
\DoxyCodeLine{00005\ \textcolor{comment}{//\ This\ program\ is\ distributed\ under\ the\ terms\ of}}
\DoxyCodeLine{00006\ \textcolor{comment}{//\ the\ End-\/User\ License\ Agreement\ for\ Aseprite.}}
\DoxyCodeLine{00007\ }
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#ifndef\ APP\_UI\_EDITOR\_EDITOR\_STATE\_H\_INCLUDED}}
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#define\ APP\_UI\_EDITOR\_EDITOR\_STATE\_H\_INCLUDED}}
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00011\ }
\DoxyCodeLine{00012\ \textcolor{preprocessor}{\#include\ "{}base/disable\_copying.h"{}}}
\DoxyCodeLine{00013\ \textcolor{preprocessor}{\#include\ "{}gfx/fwd.h"{}}}
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}gfx/point.h"{}}}
\DoxyCodeLine{00015\ }
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#include\ <memory>}}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00018\ \textcolor{keyword}{namespace\ }gfx\ \{}
\DoxyCodeLine{00019\ \ \ \textcolor{keyword}{class\ }Region;}
\DoxyCodeLine{00020\ \}}
\DoxyCodeLine{00021\ }
\DoxyCodeLine{00022\ \textcolor{keyword}{namespace\ }ui\ \{}
\DoxyCodeLine{00023\ \ \ \textcolor{keyword}{class\ }KeyMessage;}
\DoxyCodeLine{00024\ \ \ \textcolor{keyword}{class\ }MouseMessage;}
\DoxyCodeLine{00025\ \ \ \textcolor{keyword}{class\ }TouchMessage;}
\DoxyCodeLine{00026\ \}}
\DoxyCodeLine{00027\ }
\DoxyCodeLine{00028\ \textcolor{keyword}{namespace\ }doc\ \{}
\DoxyCodeLine{00029\ \ \ \textcolor{keyword}{class\ }Tag;}
\DoxyCodeLine{00030\ \}}
\DoxyCodeLine{00031\ }
\DoxyCodeLine{00032\ \textcolor{keyword}{namespace\ }app\ \{}
\DoxyCodeLine{00033\ \ \ \textcolor{keyword}{class\ }Editor;}
\DoxyCodeLine{00034\ \ \ \textcolor{keyword}{class\ }EditorDecorator;}
\DoxyCodeLine{00035\ }
\DoxyCodeLine{00036\ \ \ \textcolor{keyword}{namespace\ }tools\ \{}
\DoxyCodeLine{00037\ \ \ \ \ \textcolor{keyword}{class\ }Ink;}
\DoxyCodeLine{00038\ \ \ \ \ \textcolor{keyword}{class\ }Tool;}
\DoxyCodeLine{00039\ \ \ \}}
\DoxyCodeLine{00040\ }
\DoxyCodeLine{00041\ \ \ \textcolor{comment}{//\ Represents\ one\ state\ of\ the\ sprite's\ editor\ (Editor\ class).\ \ This}}
\DoxyCodeLine{00042\ \ \ \textcolor{comment}{//\ is\ a\ base\ class,\ a\ dummy\ state\ that\ ignores\ all\ events\ from\ the}}
\DoxyCodeLine{00043\ \ \ \textcolor{comment}{//\ Editor.\ Subclasses\ overrides\ these\ methods\ to\ customize\ the}}
\DoxyCodeLine{00044\ \ \ \textcolor{comment}{//\ behavior\ of\ the\ Editor\ to\ do\ different\ tasks\ (e.g.\ scrolling,}}
\DoxyCodeLine{00045\ \ \ \textcolor{comment}{//\ drawing\ in\ the\ active\ sprite,\ etc.).}}
\DoxyCodeLine{00046\ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{classapp_1_1_editor_state}{EditorState}}\ \{}
\DoxyCodeLine{00047\ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00048\ \ \ \ \ \textcolor{keyword}{enum}\ LeaveAction\ \{}
\DoxyCodeLine{00049\ \ \ \ \ \ \ DiscardState,}
\DoxyCodeLine{00050\ \ \ \ \ \ \ KeepState}
\DoxyCodeLine{00051\ \ \ \ \ \};}
\DoxyCodeLine{00052\ }
\DoxyCodeLine{00053\ \ \ \ \ \mbox{\hyperlink{classapp_1_1_editor_state}{EditorState}}()\ \{\ \}}
\DoxyCodeLine{00054\ \ \ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{classapp_1_1_editor_state}{\string~EditorState}}()\ \{\ \}}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00056\ \ \ \ \ \textcolor{comment}{//\ Returns\ true\ if\ this\ state\ is\ a\ "{}temporal"{}\ state.\ It\ means\ that}}
\DoxyCodeLine{00057\ \ \ \ \ \textcolor{comment}{//\ this\ state\ doesn't\ go\ to\ other\ state\ than\ the\ previous\ one.}}
\DoxyCodeLine{00058\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ isTemporalState()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};\ \}}
\DoxyCodeLine{00059\ }
\DoxyCodeLine{00060\ \ \ \ \ \textcolor{comment}{//\ Called\ just\ before\ this\ state\ is\ replaced\ by\ a\ new\ state\ in\ the}}
\DoxyCodeLine{00061\ \ \ \ \ \textcolor{comment}{//\ Editor::setState()\ method.\ \ Returns\ true\ if\ this\ state\ should\ be}}
\DoxyCodeLine{00062\ \ \ \ \ \textcolor{comment}{//\ kept\ in\ the\ EditorStatesHistory.}}
\DoxyCodeLine{00063\ \ \ \ \ \textcolor{keyword}{virtual}\ LeaveAction\ onLeaveState(\mbox{\hyperlink{classapp_1_1_editor}{Editor}}*\ editor,\ \mbox{\hyperlink{classapp_1_1_editor_state}{EditorState}}*\ newState)\ \{}
\DoxyCodeLine{00064\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ KeepState;}
\DoxyCodeLine{00065\ \ \ \ \ \}}
\DoxyCodeLine{00066\ }
\DoxyCodeLine{00067\ \ \ \ \ \textcolor{comment}{//\ Called\ when\ this\ instance\ is\ set\ as\ the\ new\ Editor's\ state\ when}}
\DoxyCodeLine{00068\ \ \ \ \ \textcolor{comment}{//\ Editor::setState()\ method\ is\ used.}}
\DoxyCodeLine{00069\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ onEnterState(\mbox{\hyperlink{classapp_1_1_editor}{Editor}}*\ editor)\ \{\ \}}
\DoxyCodeLine{00070\ }
\DoxyCodeLine{00071\ \ \ \ \ \textcolor{comment}{//\ Called\ just\ before\ the\ state\ will\ be\ removed\ from\ the}}
\DoxyCodeLine{00072\ \ \ \ \ \textcolor{comment}{//\ EditorStatesHistory.\ \ This\ event\ is\ useful\ to\ remove\ the}}
\DoxyCodeLine{00073\ \ \ \ \ \textcolor{comment}{//\ decorator\ from\ the\ editor.}}
\DoxyCodeLine{00074\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ onBeforePopState(\mbox{\hyperlink{classapp_1_1_editor}{Editor}}*\ editor)\ \{\ \}}
\DoxyCodeLine{00075\ }
\DoxyCodeLine{00076\ \ \ \ \ \textcolor{comment}{//\ Called\ when\ the\ current\ tool\ in\ the\ tool\ bar\ changes.\ It\ is}}
\DoxyCodeLine{00077\ \ \ \ \ \textcolor{comment}{//\ useful\ for\ states\ which\ depends\ on\ the\ selected\ current\ tool\ (as}}
\DoxyCodeLine{00078\ \ \ \ \ \textcolor{comment}{//\ MovingPixelsState\ which\ drops\ the\ pixels\ in\ case\ the\ user\ selects}}
\DoxyCodeLine{00079\ \ \ \ \ \textcolor{comment}{//\ other\ drawing\ tool).}}
\DoxyCodeLine{00080\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ onActiveToolChange(\mbox{\hyperlink{classapp_1_1_editor}{Editor}}*\ editor,\ \mbox{\hyperlink{classapp_1_1tools_1_1_tool}{tools::Tool}}*\ tool)\ \{\ \}}
\DoxyCodeLine{00081\ }
\DoxyCodeLine{00082\ \ \ \ \ \textcolor{comment}{//\ Called\ when\ the\ editor\ gets\ the\ focus.}}
\DoxyCodeLine{00083\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ onEditorGotFocus(\mbox{\hyperlink{classapp_1_1_editor}{Editor}}*\ editor)\ \{\ \}}
\DoxyCodeLine{00084\ }
\DoxyCodeLine{00085\ \ \ \ \ \textcolor{comment}{//\ Called\ when\ the\ user\ presses\ a\ mouse\ button\ over\ the\ editor.}}
\DoxyCodeLine{00086\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ onMouseDown(\mbox{\hyperlink{classapp_1_1_editor}{Editor}}*\ editor,\ \mbox{\hyperlink{classui_1_1_mouse_message}{ui::MouseMessage}}*\ msg)\ \{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};\ \}}
\DoxyCodeLine{00087\ }
\DoxyCodeLine{00088\ \ \ \ \ \textcolor{comment}{//\ Called\ when\ the\ user\ releases\ a\ mouse\ button.}}
\DoxyCodeLine{00089\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ onMouseUp(\mbox{\hyperlink{classapp_1_1_editor}{Editor}}*\ editor,\ \mbox{\hyperlink{classui_1_1_mouse_message}{ui::MouseMessage}}*\ msg)\ \{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};\ \}}
\DoxyCodeLine{00090\ }
\DoxyCodeLine{00091\ \ \ \ \ \textcolor{comment}{//\ Called\ when\ the\ user\ moves\ the\ mouse\ over\ the\ editor.}}
\DoxyCodeLine{00092\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ onMouseMove(\mbox{\hyperlink{classapp_1_1_editor}{Editor}}*\ editor,\ \mbox{\hyperlink{classui_1_1_mouse_message}{ui::MouseMessage}}*\ msg)\ \{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};\ \}}
\DoxyCodeLine{00093\ }
\DoxyCodeLine{00094\ \ \ \ \ \textcolor{comment}{//\ Called\ when\ the\ user\ moves\ the\ mouse\ wheel\ over\ the\ editor.}}
\DoxyCodeLine{00095\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ onMouseWheel(\mbox{\hyperlink{classapp_1_1_editor}{Editor}}*\ editor,\ \mbox{\hyperlink{classui_1_1_mouse_message}{ui::MouseMessage}}*\ msg)\ \{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};\ \}}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00097\ \ \ \ \ \textcolor{comment}{//\ Called\ when\ the\ user\ wants\ to\ zoom\ in/out\ using\ a\ pinch\ gesture\ in\ the\ trackpad.}}
\DoxyCodeLine{00098\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ onTouchMagnify(\mbox{\hyperlink{classapp_1_1_editor}{Editor}}*\ editor,\ \mbox{\hyperlink{classui_1_1_touch_message}{ui::TouchMessage}}*\ msg)\ \{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};\ \}}
\DoxyCodeLine{00099\ }
\DoxyCodeLine{00100\ \ \ \ \ \textcolor{comment}{//\ Called\ when\ the\ user\ moves\ the\ mouse\ wheel\ over\ the\ editor.}}
\DoxyCodeLine{00101\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ onDoubleClick(\mbox{\hyperlink{classapp_1_1_editor}{Editor}}*\ editor,\ \mbox{\hyperlink{classui_1_1_mouse_message}{ui::MouseMessage}}*\ msg)\ \{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};\ \}}
\DoxyCodeLine{00102\ }
\DoxyCodeLine{00103\ \ \ \ \ \textcolor{comment}{//\ Called\ each\ time\ the\ mouse\ changes\ its\ position\ so\ we\ can\ set\ an}}
\DoxyCodeLine{00104\ \ \ \ \ \textcolor{comment}{//\ appropiated\ cursor\ depending\ on\ the\ new\ coordinates\ of\ the\ mouse}}
\DoxyCodeLine{00105\ \ \ \ \ \textcolor{comment}{//\ pointer.}}
\DoxyCodeLine{00106\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ onSetCursor(\mbox{\hyperlink{classapp_1_1_editor}{Editor}}*\ editor,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classgfx_1_1_point_t}{gfx::Point}}\&\ mouseScreenPos)\ \{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};\ \}}
\DoxyCodeLine{00107\ }
\DoxyCodeLine{00108\ \ \ \ \ \textcolor{comment}{//\ Called\ when\ a\ key\ is\ pressed\ over\ the\ current\ editor.}}
\DoxyCodeLine{00109\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ onKeyDown(\mbox{\hyperlink{classapp_1_1_editor}{Editor}}*\ editor,\ \mbox{\hyperlink{classui_1_1_key_message}{ui::KeyMessage}}*\ msg)\ \{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};\ \}}
\DoxyCodeLine{00110\ }
\DoxyCodeLine{00111\ \ \ \ \ \textcolor{comment}{//\ Called\ when\ a\ key\ is\ released.}}
\DoxyCodeLine{00112\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ onKeyUp(\mbox{\hyperlink{classapp_1_1_editor}{Editor}}*\ editor,\ \mbox{\hyperlink{classui_1_1_key_message}{ui::KeyMessage}}*\ msg)\ \{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};\ \}}
\DoxyCodeLine{00113\ }
\DoxyCodeLine{00114\ \ \ \ \ \textcolor{comment}{//\ Called\ when\ the\ editor\ scroll\ is\ changed.}}
\DoxyCodeLine{00115\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ onScrollChange(\mbox{\hyperlink{classapp_1_1_editor}{Editor}}*\ editor)\ \{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};\ \}}
\DoxyCodeLine{00116\ }
\DoxyCodeLine{00117\ \ \ \ \ \textcolor{comment}{//\ Called\ when\ status\ bar\ needs\ to\ be\ updated.}}
\DoxyCodeLine{00118\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ onUpdateStatusBar(\mbox{\hyperlink{classapp_1_1_editor}{Editor}}*\ editor)\ \{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};\ \}}
\DoxyCodeLine{00119\ }
\DoxyCodeLine{00120\ \ \ \ \ \textcolor{comment}{//\ When\ a\ part\ of\ the\ sprite\ will\ be\ exposed.}}
\DoxyCodeLine{00121\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ onExposeSpritePixels(\textcolor{keyword}{const}\ \mbox{\hyperlink{classgfx_1_1_region}{gfx::Region}}\&\ rgn)\ \{\ \}}
\DoxyCodeLine{00122\ }
\DoxyCodeLine{00123\ \ \ \ \ \textcolor{comment}{//\ Returns\ true\ if\ the\ this\ state\ requires\ the\ brush-\/preview\ as}}
\DoxyCodeLine{00124\ \ \ \ \ \textcolor{comment}{//\ drawing\ cursor.}}
\DoxyCodeLine{00125\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ requireBrushPreview()\ \{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};\ \}}
\DoxyCodeLine{00126\ }
\DoxyCodeLine{00127\ \ \ \ \ \textcolor{comment}{//\ Returns\ true\ if\ this\ state\ allow\ layer\ edges\ and\ cel\ guides}}
\DoxyCodeLine{00128\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ allowLayerEdges()\ \{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};\ \}}
\DoxyCodeLine{00129\ }
\DoxyCodeLine{00130\ \ \ \ \ \textcolor{comment}{//\ Returns\ true\ if\ this\ state\ accept\ the\ given\ quicktool.}}
\DoxyCodeLine{00131\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ acceptQuickTool(\mbox{\hyperlink{classapp_1_1tools_1_1_tool}{tools::Tool}}*\ tool)\ \{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};\ \}}
\DoxyCodeLine{00132\ }
\DoxyCodeLine{00133\ \ \ \ \ \textcolor{comment}{//\ Custom\ ink\ in\ this\ state.}}
\DoxyCodeLine{00134\ \ \ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{classapp_1_1tools_1_1_ink}{tools::Ink}}*\ getStateInk()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{nullptr};\ \}}
\DoxyCodeLine{00135\ }
\DoxyCodeLine{00136\ \ \ \ \ \textcolor{comment}{//\ Called\ when\ a\ tag\ is\ deleted.}}
\DoxyCodeLine{00137\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ onRemoveTag(\mbox{\hyperlink{classapp_1_1_editor}{Editor}}*\ editor,\ \mbox{\hyperlink{classdoc_1_1_tag}{doc::Tag}}*\ tag)\ \{\ \}}
\DoxyCodeLine{00138\ }
\DoxyCodeLine{00139\ \ \ \ \ \textcolor{comment}{//\ Used\ to\ adjust\ the\ grid\ origin\ point\ for\ temporal\ cels\ created}}
\DoxyCodeLine{00140\ \ \ \ \ \textcolor{comment}{//\ by\ states\ like\ DrawingState\ +\ ExpandCelCanvas.}}
\DoxyCodeLine{00141\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ getGridBounds(\mbox{\hyperlink{classapp_1_1_editor}{Editor}}*\ editor,\ \mbox{\hyperlink{classgfx_1_1_rect_t}{gfx::Rect}}\&\ gridBounds)\ \{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};\ \}}
\DoxyCodeLine{00142\ }
\DoxyCodeLine{00143\ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00144\ \ \ \ \ DISABLE\_COPYING(\mbox{\hyperlink{classapp_1_1_editor_state}{EditorState}});}
\DoxyCodeLine{00145\ \ \ \};}
\DoxyCodeLine{00146\ }
\DoxyCodeLine{00147\ \ \ \textcolor{keyword}{using\ }EditorStatePtr\ =\ std::shared\_ptr<EditorState>;}
\DoxyCodeLine{00148\ }
\DoxyCodeLine{00149\ \}\ \textcolor{comment}{//\ namespace\ app}}
\DoxyCodeLine{00150\ }
\DoxyCodeLine{00151\ \textcolor{preprocessor}{\#endif\ \ }\textcolor{comment}{//\ APP\_UI\_EDITOR\_EDITOR\_STATE\_H\_INCLUDED}}

\end{DoxyCode}
