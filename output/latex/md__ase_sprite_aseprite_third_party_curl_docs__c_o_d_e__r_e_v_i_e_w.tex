Anyone and everyone is encouraged and welcome to review code submissions in curl. This is a guide on what to check for and how to perform a successful code review.\hypertarget{md__ase_sprite_aseprite_third_party_curl_docs__c_o_d_e__r_e_v_i_e_w_autotoc_md747}{}\doxysection{All submissions should get reviewed}\label{md__ase_sprite_aseprite_third_party_curl_docs__c_o_d_e__r_e_v_i_e_w_autotoc_md747}
All pull requests and patches submitted to the project should be reviewed by at least one experienced curl maintainer before that code is accepted and merged.\hypertarget{md__ase_sprite_aseprite_third_party_curl_docs__c_o_d_e__r_e_v_i_e_w_autotoc_md748}{}\doxysection{Let the tools and tests take the first rounds}\label{md__ase_sprite_aseprite_third_party_curl_docs__c_o_d_e__r_e_v_i_e_w_autotoc_md748}
On initial pull requests, let the tools and tests do their job first and then start out by helping the submitter understand the test failures and tool alerts.\hypertarget{md__ase_sprite_aseprite_third_party_curl_docs__c_o_d_e__r_e_v_i_e_w_autotoc_md749}{}\doxysection{How to provide feedback to author}\label{md__ase_sprite_aseprite_third_party_curl_docs__c_o_d_e__r_e_v_i_e_w_autotoc_md749}
Be nice. Ask questions. Provide examples or suggestions of improvements. Assume the best intentions. Remember language barriers.

All first-\/time contributors can become regulars. Let\textquotesingle{}s help them go there.\hypertarget{md__ase_sprite_aseprite_third_party_curl_docs__c_o_d_e__r_e_v_i_e_w_autotoc_md750}{}\doxysection{Is this a change we want?}\label{md__ase_sprite_aseprite_third_party_curl_docs__c_o_d_e__r_e_v_i_e_w_autotoc_md750}
If this is not a change that seems to be aligned with the project\textquotesingle{}s path forward and as such cannot be accepted, inform the author about this sooner rather than later. Do it gently and explain why and possibly what could be done to make it more acceptable.\hypertarget{md__ase_sprite_aseprite_third_party_curl_docs__c_o_d_e__r_e_v_i_e_w_autotoc_md751}{}\doxysection{API/\+ABI stability or changed behavior}\label{md__ase_sprite_aseprite_third_party_curl_docs__c_o_d_e__r_e_v_i_e_w_autotoc_md751}
Changing the API and the ABI may be fine in a change but it needs to be done deliberately and carefully. If not, a reviewer must help the author to realize the mistake.

curl and libcurl are similarly very strict on not modifying existing behavior. API and ABI stability is not enough, the behavior should also remain intact as far as possible.\hypertarget{md__ase_sprite_aseprite_third_party_curl_docs__c_o_d_e__r_e_v_i_e_w_autotoc_md752}{}\doxysection{Code style}\label{md__ase_sprite_aseprite_third_party_curl_docs__c_o_d_e__r_e_v_i_e_w_autotoc_md752}
Most code style nits are detected by checksrc but not all. Only leave remarks on style deviation once checksrc doesn\textquotesingle{}t find anymore.

Minor nits from fresh submitters can also be handled by the maintainer when merging, in case it seems like the submitter isn\textquotesingle{}t clear on what to do. We want to make the process fun and exciting for new contributors.\hypertarget{md__ase_sprite_aseprite_third_party_curl_docs__c_o_d_e__r_e_v_i_e_w_autotoc_md753}{}\doxysection{Encourage consistency}\label{md__ase_sprite_aseprite_third_party_curl_docs__c_o_d_e__r_e_v_i_e_w_autotoc_md753}
Make sure new code is written in a similar style as existing code. Naming, logic, conditions, etc.\hypertarget{md__ase_sprite_aseprite_third_party_curl_docs__c_o_d_e__r_e_v_i_e_w_autotoc_md754}{}\doxysection{Are pointers always non-\/\+NULL?}\label{md__ase_sprite_aseprite_third_party_curl_docs__c_o_d_e__r_e_v_i_e_w_autotoc_md754}
If a function or code rely on pointers being non-\/\+NULL, take an extra look if that seems to be a fair assessment.\hypertarget{md__ase_sprite_aseprite_third_party_curl_docs__c_o_d_e__r_e_v_i_e_w_autotoc_md755}{}\doxysection{Asserts}\label{md__ase_sprite_aseprite_third_party_curl_docs__c_o_d_e__r_e_v_i_e_w_autotoc_md755}
Conditions that should never be false can be verified with {\ttfamily DEBUGASSERT()} calls to get caught in tests and debugging easier, while not having an impact on final or release builds.\hypertarget{md__ase_sprite_aseprite_third_party_curl_docs__c_o_d_e__r_e_v_i_e_w_autotoc_md756}{}\doxysection{Memory allocation}\label{md__ase_sprite_aseprite_third_party_curl_docs__c_o_d_e__r_e_v_i_e_w_autotoc_md756}
Can the mallocs be avoided? Do not introduce mallocs in any hot paths. If there are (new) mallocs, can they be combined into fewer calls?

Are all allocations handled in errorpaths to avoid leaks and crashes?\hypertarget{md__ase_sprite_aseprite_third_party_curl_docs__c_o_d_e__r_e_v_i_e_w_autotoc_md757}{}\doxysection{Thread-\/safety}\label{md__ase_sprite_aseprite_third_party_curl_docs__c_o_d_e__r_e_v_i_e_w_autotoc_md757}
We do not like static variables as they break thread-\/safety and prevent functions from being reentrant.\hypertarget{md__ase_sprite_aseprite_third_party_curl_docs__c_o_d_e__r_e_v_i_e_w_autotoc_md758}{}\doxysection{Should features be $<$tt$>$\#ifdef$<$/tt$>$ed?}\label{md__ase_sprite_aseprite_third_party_curl_docs__c_o_d_e__r_e_v_i_e_w_autotoc_md758}
Features and functionality may not be present everywhere and should therefore be {\ttfamily \#ifdef}ed. Additionally, some features should be possible to switch on/off in the build.

Write {\ttfamily \#ifdef}s to be as little of a \char`\"{}maze\char`\"{} as possible.\hypertarget{md__ase_sprite_aseprite_third_party_curl_docs__c_o_d_e__r_e_v_i_e_w_autotoc_md759}{}\doxysection{Does it look portable enough?}\label{md__ase_sprite_aseprite_third_party_curl_docs__c_o_d_e__r_e_v_i_e_w_autotoc_md759}
curl runs \char`\"{}everywhere\char`\"{}. Does the code take a reasonable stance and enough precautions to be possible to build and run on most platforms?

Remember that we live by C89 restrictions.\hypertarget{md__ase_sprite_aseprite_third_party_curl_docs__c_o_d_e__r_e_v_i_e_w_autotoc_md760}{}\doxysection{Tests and testability}\label{md__ase_sprite_aseprite_third_party_curl_docs__c_o_d_e__r_e_v_i_e_w_autotoc_md760}
New features should be added in conjunction with one or more test cases. Ideally, functions should also be written so that unit tests can be done to test individual functions.\hypertarget{md__ase_sprite_aseprite_third_party_curl_docs__c_o_d_e__r_e_v_i_e_w_autotoc_md761}{}\doxysection{Documentation}\label{md__ase_sprite_aseprite_third_party_curl_docs__c_o_d_e__r_e_v_i_e_w_autotoc_md761}
New features or changes to existing functionality {\bfseries{must}} be accompanied by updated documentation. Submitting that in a separate follow-\/up pull request is not OK. \mbox{\hyperlink{class_a}{A}} code review must also verify that the submitted documentation update matches the code submission.

English isn\textquotesingle{}t everyone\textquotesingle{}s first language, be mindful of this and help the submitter improve the text if it needs a rewrite to read better.\hypertarget{md__ase_sprite_aseprite_third_party_curl_docs__c_o_d_e__r_e_v_i_e_w_autotoc_md762}{}\doxysection{Code shouldn\textquotesingle{}t be hard to understand}\label{md__ase_sprite_aseprite_third_party_curl_docs__c_o_d_e__r_e_v_i_e_w_autotoc_md762}
Source code should be written to maximize readability and be easy to understand.\hypertarget{md__ase_sprite_aseprite_third_party_curl_docs__c_o_d_e__r_e_v_i_e_w_autotoc_md763}{}\doxysection{Functions shouldn\textquotesingle{}t be large}\label{md__ase_sprite_aseprite_third_party_curl_docs__c_o_d_e__r_e_v_i_e_w_autotoc_md763}
\mbox{\hyperlink{class_a}{A}} single function should never be large as that makes it hard to follow and understand all the exit points and state changes. Some existing functions in curl certainly violate this ground rule but when reviewing new code we should propose splitting into smaller functions.\hypertarget{md__ase_sprite_aseprite_third_party_curl_docs__c_o_d_e__r_e_v_i_e_w_autotoc_md764}{}\doxysection{Duplication is evil}\label{md__ase_sprite_aseprite_third_party_curl_docs__c_o_d_e__r_e_v_i_e_w_autotoc_md764}
Anything that looks like duplicated code is a red flag. Anything that seems to introduce code that we {\itshape should} already have or provide needs a closer check.\hypertarget{md__ase_sprite_aseprite_third_party_curl_docs__c_o_d_e__r_e_v_i_e_w_autotoc_md765}{}\doxysection{Sensitive data}\label{md__ase_sprite_aseprite_third_party_curl_docs__c_o_d_e__r_e_v_i_e_w_autotoc_md765}
When credentials are involved, take an extra look at what happens with this data. Where it comes from and where it goes.\hypertarget{md__ase_sprite_aseprite_third_party_curl_docs__c_o_d_e__r_e_v_i_e_w_autotoc_md766}{}\doxysection{Variable types differ}\label{md__ase_sprite_aseprite_third_party_curl_docs__c_o_d_e__r_e_v_i_e_w_autotoc_md766}
{\ttfamily size\+\_\+t} is not a fixed size. {\ttfamily time\+\_\+t} can be signed or unsigned and have different sizes. Relying on variable sizes is a red flag.

Also remember that endianness and \texorpdfstring{$>$}{>}= 32 bit accesses to unaligned addresses are problematic areas.\hypertarget{md__ase_sprite_aseprite_third_party_curl_docs__c_o_d_e__r_e_v_i_e_w_autotoc_md767}{}\doxysection{Integer overflows}\label{md__ase_sprite_aseprite_third_party_curl_docs__c_o_d_e__r_e_v_i_e_w_autotoc_md767}
Be careful about integer overflows. Some variable types can be either 32 bit or 64 bit. Integer overflows must be detected and acted on {\itshape before} they happen.\hypertarget{md__ase_sprite_aseprite_third_party_curl_docs__c_o_d_e__r_e_v_i_e_w_autotoc_md768}{}\doxysection{Dangerous use of functions}\label{md__ase_sprite_aseprite_third_party_curl_docs__c_o_d_e__r_e_v_i_e_w_autotoc_md768}
Maybe use of {\ttfamily realloc()} should rather use the dynbuf functions?

Do not allow new code that grows buffers without using dynbuf.

Use of C functions that rely on a terminating zero must only be used on data that really do have a zero terminating zero.\hypertarget{md__ase_sprite_aseprite_third_party_curl_docs__c_o_d_e__r_e_v_i_e_w_autotoc_md769}{}\doxysection{Dangerous \char`\"{}data styles\char`\"{}}\label{md__ase_sprite_aseprite_third_party_curl_docs__c_o_d_e__r_e_v_i_e_w_autotoc_md769}
Make extra precautions and verify that memory buffers that need a terminating zero always have exactly that. Buffers {\itshape without} a zero terminator must not be used as input to string functions.\hypertarget{md__ase_sprite_aseprite_third_party_curl_docs__c_o_d_e__r_e_v_i_e_w_autotoc_md770}{}\doxysection{Commit messages}\label{md__ase_sprite_aseprite_third_party_curl_docs__c_o_d_e__r_e_v_i_e_w_autotoc_md770}
Tightly coupled with a code review is making sure that the commit message is good. It is the responsibility of the person who merges the code to make sure that the commit message follows our standard (detailed in the \mbox{\hyperlink{md__ase_sprite_aseprite_third_party_curl_docs__c_o_n_t_r_i_b_u_t_e}{CONTRIBUTE.md}} document). This includes making sure the PR identifies related issues and giving credit to reporters and helpers. 