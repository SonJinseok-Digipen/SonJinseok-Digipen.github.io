\hypertarget{hb-ot-post-table_8hh_source}{}\doxysection{hb-\/ot-\/post-\/table.hh}
\label{hb-ot-post-table_8hh_source}\index{AseSprite/aseprite/third\_party/harfbuzz/src/hb-\/ot-\/post-\/table.hh@{AseSprite/aseprite/third\_party/harfbuzz/src/hb-\/ot-\/post-\/table.hh}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*}}
\DoxyCodeLine{00002\ \textcolor{comment}{\ *\ Copyright\ Â©\ 2016\ \ Google,\ Inc.}}
\DoxyCodeLine{00003\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00004\ \textcolor{comment}{\ *\ \ This\ is\ part\ of\ HarfBuzz,\ a\ text\ shaping\ library.}}
\DoxyCodeLine{00005\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00006\ \textcolor{comment}{\ *\ Permission\ is\ hereby\ granted,\ without\ written\ agreement\ and\ without}}
\DoxyCodeLine{00007\ \textcolor{comment}{\ *\ license\ or\ royalty\ fees,\ to\ use,\ copy,\ modify,\ and\ distribute\ this}}
\DoxyCodeLine{00008\ \textcolor{comment}{\ *\ software\ and\ its\ documentation\ for\ any\ purpose,\ provided\ that\ the}}
\DoxyCodeLine{00009\ \textcolor{comment}{\ *\ above\ copyright\ notice\ and\ the\ following\ two\ paragraphs\ appear\ in}}
\DoxyCodeLine{00010\ \textcolor{comment}{\ *\ all\ copies\ of\ this\ software.}}
\DoxyCodeLine{00011\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00012\ \textcolor{comment}{\ *\ IN\ NO\ EVENT\ SHALL\ THE\ COPYRIGHT\ HOLDER\ BE\ LIABLE\ TO\ ANY\ PARTY\ FOR}}
\DoxyCodeLine{00013\ \textcolor{comment}{\ *\ DIRECT,\ INDIRECT,\ SPECIAL,\ INCIDENTAL,\ OR\ CONSEQUENTIAL\ DAMAGES}}
\DoxyCodeLine{00014\ \textcolor{comment}{\ *\ ARISING\ OUT\ OF\ THE\ USE\ OF\ THIS\ SOFTWARE\ AND\ ITS\ DOCUMENTATION,\ EVEN}}
\DoxyCodeLine{00015\ \textcolor{comment}{\ *\ IF\ THE\ COPYRIGHT\ HOLDER\ HAS\ BEEN\ ADVISED\ OF\ THE\ POSSIBILITY\ OF\ SUCH}}
\DoxyCodeLine{00016\ \textcolor{comment}{\ *\ DAMAGE.}}
\DoxyCodeLine{00017\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00018\ \textcolor{comment}{\ *\ THE\ COPYRIGHT\ HOLDER\ SPECIFICALLY\ DISCLAIMS\ ANY\ WARRANTIES,\ INCLUDING,}}
\DoxyCodeLine{00019\ \textcolor{comment}{\ *\ BUT\ NOT\ LIMITED\ TO,\ THE\ IMPLIED\ WARRANTIES\ OF\ MERCHANTABILITY\ AND}}
\DoxyCodeLine{00020\ \textcolor{comment}{\ *\ FITNESS\ FOR\ A\ PARTICULAR\ PURPOSE.\ \ THE\ SOFTWARE\ PROVIDED\ HEREUNDER\ IS}}
\DoxyCodeLine{00021\ \textcolor{comment}{\ *\ ON\ AN\ "{}AS\ IS"{}\ BASIS,\ AND\ THE\ COPYRIGHT\ HOLDER\ HAS\ NO\ OBLIGATION\ TO}}
\DoxyCodeLine{00022\ \textcolor{comment}{\ *\ PROVIDE\ MAINTENANCE,\ SUPPORT,\ UPDATES,\ ENHANCEMENTS,\ OR\ MODIFICATIONS.}}
\DoxyCodeLine{00023\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00024\ \textcolor{comment}{\ *\ Google\ Author(s):\ Behdad\ Esfahbod}}
\DoxyCodeLine{00025\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00027\ \textcolor{preprocessor}{\#ifndef\ HB\_OT\_POST\_TABLE\_HH}}
\DoxyCodeLine{00028\ \textcolor{preprocessor}{\#define\ HB\_OT\_POST\_TABLE\_HH}}
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00030\ \textcolor{preprocessor}{\#include\ "{}hb-\/open-\/type.hh"{}}}
\DoxyCodeLine{00031\ }
\DoxyCodeLine{00032\ \textcolor{preprocessor}{\#define\ HB\_STRING\_ARRAY\_NAME\ format1\_names}}
\DoxyCodeLine{00033\ \textcolor{preprocessor}{\#define\ HB\_STRING\_ARRAY\_LIST\ "{}hb-\/ot-\/post-\/macroman.hh"{}}}
\DoxyCodeLine{00034\ \textcolor{preprocessor}{\#include\ "{}hb-\/string-\/array.hh"{}}}
\DoxyCodeLine{00035\ \textcolor{preprocessor}{\#undef\ HB\_STRING\_ARRAY\_LIST}}
\DoxyCodeLine{00036\ \textcolor{preprocessor}{\#undef\ HB\_STRING\_ARRAY\_NAME}}
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00038\ \textcolor{comment}{/*}}
\DoxyCodeLine{00039\ \textcolor{comment}{\ *\ post\ -\/-\/\ PostScript}}
\DoxyCodeLine{00040\ \textcolor{comment}{\ *\ https://docs.microsoft.com/en-\/us/typography/opentype/spec/post}}
\DoxyCodeLine{00041\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00042\ \textcolor{preprocessor}{\#define\ HB\_OT\_TAG\_post\ HB\_TAG('p','o','s','t')}}
\DoxyCodeLine{00043\ }
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00045\ \textcolor{keyword}{namespace\ }OT\ \{}
\DoxyCodeLine{00046\ }
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00048\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_o_t_1_1post_v2_tail}{postV2Tail}}}
\DoxyCodeLine{00049\ \{}
\DoxyCodeLine{00050\ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_o_t_1_1post}{post}};}
\DoxyCodeLine{00051\ }
\DoxyCodeLine{00052\ \ \ \textcolor{keywordtype}{bool}\ sanitize\ (\mbox{\hyperlink{structhb__sanitize__context__t}{hb\_sanitize\_context\_t}}\ *c)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00053\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00054\ \ \ \ \ TRACE\_SANITIZE\ (\textcolor{keyword}{this});}
\DoxyCodeLine{00055\ \ \ \ \ return\_trace\ (glyphNameIndex.sanitize\ (c));}
\DoxyCodeLine{00056\ \ \ \}}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00058\ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Iterator>}
\DoxyCodeLine{00059\ \ \ \textcolor{keywordtype}{bool}\ serialize\ (\mbox{\hyperlink{structhb__serialize__context__t}{hb\_serialize\_context\_t}}\ *c,}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Iterator\ it,}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}*\ \_post)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00062\ }
\DoxyCodeLine{00063\ \ \ \textcolor{keywordtype}{bool}\ subset\ (\mbox{\hyperlink{structhb__subset__context__t}{hb\_subset\_context\_t}}\ *c)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00065\ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00066\ \ \ \mbox{\hyperlink{struct_o_t_1_1_array_of}{Array16Of<HBUINT16>}}\ \ \ \ glyphNameIndex;\ \textcolor{comment}{/*\ This\ is\ not\ an\ offset,\ but\ is\ the}}
\DoxyCodeLine{00067\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ ordinal\ number\ of\ the\ glyph\ in\ 'post'}}
\DoxyCodeLine{00068\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ string\ tables.\ */}}
\DoxyCodeLine{00069\ \textcolor{comment}{/*UnsizedArrayOf<HBUINT8>}}
\DoxyCodeLine{00070\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ namesX;*/}\ \ \ \textcolor{comment}{/*\ Glyph\ names\ with\ length\ bytes\ [variable]}}
\DoxyCodeLine{00071\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ (a\ Pascal\ string).\ */}}
\DoxyCodeLine{00072\ }
\DoxyCodeLine{00073\ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00074\ \ \ DEFINE\_SIZE\_ARRAY\ (2,\ glyphNameIndex);}
\DoxyCodeLine{00075\ \};}
\DoxyCodeLine{00076\ }
\DoxyCodeLine{00077\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_o_t_1_1post}{post}}}
\DoxyCodeLine{00078\ \{}
\DoxyCodeLine{00079\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ hb\_tag\_t\ tableTag\ =\ HB\_OT\_TAG\_post;}
\DoxyCodeLine{00080\ }
\DoxyCodeLine{00081\ \ \ \textcolor{keywordtype}{bool}\ serialize\ (\mbox{\hyperlink{structhb__serialize__context__t}{hb\_serialize\_context\_t}}\ *c,\ \textcolor{keywordtype}{bool}\ glyph\_names)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00082\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00083\ \ \ \ \ TRACE\_SERIALIZE\ (\textcolor{keyword}{this});}
\DoxyCodeLine{00084\ \ \ \ \ \mbox{\hyperlink{struct_o_t_1_1post}{post}}\ *post\_prime\ =\ c-\/>allocate\_min<\mbox{\hyperlink{struct_o_t_1_1post}{post}}>\ ();}
\DoxyCodeLine{00085\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!post\_prime))\ \ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{00086\ }
\DoxyCodeLine{00087\ \ \ \ \ memcpy\ (post\_prime,\ \textcolor{keyword}{this},\ post::min\_size);}
\DoxyCodeLine{00088\ \ \ \ \ \textcolor{keywordflow}{if}\ (!glyph\_names)}
\DoxyCodeLine{00089\ \ \ \ \ \ \ return\_trace\ (c-\/>check\_assign\ (post\_prime-\/>version.major,\ 3,}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ HB\_SERIALIZE\_ERROR\_INT\_OVERFLOW));\ \textcolor{comment}{//\ Version\ 3\ does\ not\ have\ any\ glyph\ names.}}
\DoxyCodeLine{00091\ }
\DoxyCodeLine{00092\ \ \ \ \ return\_trace\ (\textcolor{keyword}{true});}
\DoxyCodeLine{00093\ \ \ \}}
\DoxyCodeLine{00094\ }
\DoxyCodeLine{00095\ \ \ \textcolor{keywordtype}{bool}\ subset\ (\mbox{\hyperlink{structhb__subset__context__t}{hb\_subset\_context\_t}}\ *c)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00096\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00097\ \ \ \ \ TRACE\_SUBSET\ (\textcolor{keyword}{this});}
\DoxyCodeLine{00098\ \ \ \ \ \mbox{\hyperlink{struct_o_t_1_1post}{post}}\ *post\_prime\ =\ c-\/>serializer-\/>start\_embed<\mbox{\hyperlink{struct_o_t_1_1post}{post}}>\ ();}
\DoxyCodeLine{00099\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!post\_prime))\ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{00100\ }
\DoxyCodeLine{00101\ \ \ \ \ \textcolor{keywordtype}{bool}\ glyph\_names\ =\ c-\/>plan-\/>flags\ \&\ HB\_SUBSET\_FLAGS\_GLYPH\_NAMES;}
\DoxyCodeLine{00102\ \ \ \ \ \textcolor{keywordflow}{if}\ (!serialize\ (c-\/>serializer,\ glyph\_names))}
\DoxyCodeLine{00103\ \ \ \ \ \ \ return\_trace\ (\textcolor{keyword}{false});}
\DoxyCodeLine{00104\ }
\DoxyCodeLine{00105\ \ \ \ \ \textcolor{keywordflow}{if}\ (glyph\_names\ \&\&\ version.major\ ==\ 2)}
\DoxyCodeLine{00106\ \ \ \ \ \ \ return\_trace\ (v2X.subset\ (c));}
\DoxyCodeLine{00107\ }
\DoxyCodeLine{00108\ \ \ \ \ return\_trace\ (\textcolor{keyword}{true});}
\DoxyCodeLine{00109\ \ \ \}}
\DoxyCodeLine{00110\ }
\DoxyCodeLine{00111\ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_o_t_1_1post_1_1accelerator__t}{accelerator\_t}}}
\DoxyCodeLine{00112\ \ \ \{}
\DoxyCodeLine{00113\ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_o_t_1_1post_v2_tail}{postV2Tail}};}
\DoxyCodeLine{00114\ }
\DoxyCodeLine{00115\ \ \ \ \ \mbox{\hyperlink{struct_o_t_1_1post_1_1accelerator__t}{accelerator\_t}}\ (\mbox{\hyperlink{structhb__face__t}{hb\_face\_t}}\ *face)}
\DoxyCodeLine{00116\ \ \ \ \ \{}
\DoxyCodeLine{00117\ \ \ \ \ \ \ table\ =\ \mbox{\hyperlink{structhb__sanitize__context__t}{hb\_sanitize\_context\_t}}\ ().reference\_table<\mbox{\hyperlink{struct_o_t_1_1post}{post}}>\ (face);}
\DoxyCodeLine{00118\ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ table\_length\ =\ table.get\_length\ ();}
\DoxyCodeLine{00119\ }
\DoxyCodeLine{00120\ \ \ \ \ \ \ version\ =\ table-\/>version.to\_int\ ();}
\DoxyCodeLine{00121\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (version\ !=\ 0x00020000)\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00122\ }
\DoxyCodeLine{00123\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1post_v2_tail}{postV2Tail}}\ \&v2\ =\ table-\/>v2X;}
\DoxyCodeLine{00124\ }
\DoxyCodeLine{00125\ \ \ \ \ \ \ glyphNameIndex\ =\ \&v2.glyphNameIndex;}
\DoxyCodeLine{00126\ \ \ \ \ \ \ pool\ =\ \&StructAfter<uint8\_t>\ (v2.glyphNameIndex);}
\DoxyCodeLine{00127\ }
\DoxyCodeLine{00128\ \ \ \ \ \ \ \textcolor{keyword}{const}\ uint8\_t\ *end\ =\ (\textcolor{keyword}{const}\ uint8\_t\ *)\ (\textcolor{keyword}{const}\ \textcolor{keywordtype}{void}\ *)\ table\ +\ table\_length;}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{const}\ uint8\_t\ *\mbox{\hyperlink{structdata}{data}}\ =\ pool;}
\DoxyCodeLine{00130\ \ \ \ \ \ \ \ index\_to\_offset.length\ <\ 65535\ \&\&\ \mbox{\hyperlink{structdata}{data}}\ <\ end\ \&\&\ \mbox{\hyperlink{structdata}{data}}\ +\ *\mbox{\hyperlink{structdata}{data}}\ <\ end;}
\DoxyCodeLine{00131\ \ \ \ \ \ \ \ \mbox{\hyperlink{structdata}{data}}\ +=\ 1\ +\ *\mbox{\hyperlink{structdata}{data}})}
\DoxyCodeLine{00132\ \ \ \ \ index\_to\_offset.push\ (\mbox{\hyperlink{structdata}{data}}\ -\/\ pool);}
\DoxyCodeLine{00133\ \ \ \ \ \}}
\DoxyCodeLine{00134\ \ \ \ \ \mbox{\hyperlink{struct_o_t_1_1post_1_1accelerator__t}{\string~accelerator\_t}}\ ()}
\DoxyCodeLine{00135\ \ \ \ \ \{}
\DoxyCodeLine{00136\ \ \ \ \ \ \ hb\_free\ (gids\_sorted\_by\_name.get\ ());}
\DoxyCodeLine{00137\ \ \ \ \ \ \ table.destroy\ ();}
\DoxyCodeLine{00138\ \ \ \ \ \}}
\DoxyCodeLine{00139\ }
\DoxyCodeLine{00140\ \ \ \ \ \textcolor{keywordtype}{bool}\ get\_glyph\_name\ (hb\_codepoint\_t\ glyph,}
\DoxyCodeLine{00141\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{char}\ *\mbox{\hyperlink{structbuf}{buf}},\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ buf\_len)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00142\ \textcolor{keyword}{\ \ \ \ }\{}
\DoxyCodeLine{00143\ \ \ \ \ \ \ \mbox{\hyperlink{structhb__array__t}{hb\_bytes\_t}}\ s\ =\ find\_glyph\_name\ (glyph);}
\DoxyCodeLine{00144\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!s.length)\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00145\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!buf\_len)\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00146\ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ len\ =\ hb\_min\ (buf\_len\ -\/\ 1,\ s.length);}
\DoxyCodeLine{00147\ \ \ \ \ \ \ strncpy\ (\mbox{\hyperlink{structbuf}{buf}},\ s.arrayZ,\ len);}
\DoxyCodeLine{00148\ \ \ \ \ \ \ \mbox{\hyperlink{structbuf}{buf}}[len]\ =\ \textcolor{charliteral}{'\(\backslash\)0'};}
\DoxyCodeLine{00149\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00150\ \ \ \ \ \}}
\DoxyCodeLine{00151\ }
\DoxyCodeLine{00152\ \ \ \ \ \textcolor{keywordtype}{bool}\ get\_glyph\_from\_name\ (\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *\mbox{\hyperlink{struct_o_t_1_1name}{name}},\ \textcolor{keywordtype}{int}\ len,}
\DoxyCodeLine{00153\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ hb\_codepoint\_t\ *glyph)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00154\ \textcolor{keyword}{\ \ \ \ }\{}
\DoxyCodeLine{00155\ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ count\ =\ get\_glyph\_count\ ();}
\DoxyCodeLine{00156\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!count))\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00157\ }
\DoxyCodeLine{00158\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (len\ <\ 0)\ len\ =\ strlen\ (\mbox{\hyperlink{struct_o_t_1_1name}{name}});}
\DoxyCodeLine{00159\ }
\DoxyCodeLine{00160\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!len))\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00161\ }
\DoxyCodeLine{00162\ \ \ \ \ retry:}
\DoxyCodeLine{00163\ \ \ \ \ \ \ uint16\_t\ *gids\ =\ gids\_sorted\_by\_name.get\ ();}
\DoxyCodeLine{00164\ }
\DoxyCodeLine{00165\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!gids))}
\DoxyCodeLine{00166\ \ \ \ \ \ \ \{}
\DoxyCodeLine{00167\ \ \ \ \ gids\ =\ (uint16\_t\ *)\ hb\_malloc\ (count\ *\ \textcolor{keyword}{sizeof}\ (gids[0]));}
\DoxyCodeLine{00168\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!gids))}
\DoxyCodeLine{00169\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};\ \textcolor{comment}{/*\ Anything\ better?!\ */}}
\DoxyCodeLine{00170\ }
\DoxyCodeLine{00171\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ count;\ i++)}
\DoxyCodeLine{00172\ \ \ \ \ \ \ gids[i]\ =\ i;}
\DoxyCodeLine{00173\ \ \ \ \ hb\_qsort\ (gids,\ count,\ \textcolor{keyword}{sizeof}\ (gids[0]),\ cmp\_gids,\ (\textcolor{keywordtype}{void}\ *)\ \textcolor{keyword}{this});}
\DoxyCodeLine{00174\ }
\DoxyCodeLine{00175\ \ \ \ \ \textcolor{keywordflow}{if}\ (unlikely\ (!gids\_sorted\_by\_name.cmpexch\ (\textcolor{keyword}{nullptr},\ gids)))}
\DoxyCodeLine{00176\ \ \ \ \ \{}
\DoxyCodeLine{00177\ \ \ \ \ \ \ hb\_free\ (gids);}
\DoxyCodeLine{00178\ \ \ \ \ \ \ \textcolor{keywordflow}{goto}\ retry;}
\DoxyCodeLine{00179\ \ \ \ \ \}}
\DoxyCodeLine{00180\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00181\ }
\DoxyCodeLine{00182\ \ \ \ \ \ \ \mbox{\hyperlink{structhb__array__t}{hb\_bytes\_t}}\ st\ (\mbox{\hyperlink{struct_o_t_1_1name}{name}},\ len);}
\DoxyCodeLine{00183\ \ \ \ \ \ \ \textcolor{keyword}{auto}*\ gid\ =\ hb\_bsearch\ (st,\ gids,\ count,\ \textcolor{keyword}{sizeof}\ (gids[0]),\ cmp\_key,\ (\textcolor{keywordtype}{void}\ *)\ \textcolor{keyword}{this});}
\DoxyCodeLine{00184\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (gid)}
\DoxyCodeLine{00185\ \ \ \ \ \ \ \{}
\DoxyCodeLine{00186\ \ \ \ \ *glyph\ =\ *gid;}
\DoxyCodeLine{00187\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00188\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00189\ }
\DoxyCodeLine{00190\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00191\ \ \ \ \ \}}
\DoxyCodeLine{00192\ }
\DoxyCodeLine{00193\ \ \ \ \ \mbox{\hyperlink{structhb__blob__ptr__t}{hb\_blob\_ptr\_t<post>}}\ table;}
\DoxyCodeLine{00194\ }
\DoxyCodeLine{00195\ \ \ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00196\ }
\DoxyCodeLine{00197\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ get\_glyph\_count\ ()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00198\ \textcolor{keyword}{\ \ \ \ }\{}
\DoxyCodeLine{00199\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (version\ ==\ 0x00010000)}
\DoxyCodeLine{00200\ \ \ \ \ \textcolor{keywordflow}{return}\ format1\_names\_length;}
\DoxyCodeLine{00201\ }
\DoxyCodeLine{00202\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (version\ ==\ 0x00020000)}
\DoxyCodeLine{00203\ \ \ \ \ \textcolor{keywordflow}{return}\ glyphNameIndex-\/>len;}
\DoxyCodeLine{00204\ }
\DoxyCodeLine{00205\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00206\ \ \ \ \ \}}
\DoxyCodeLine{00207\ }
\DoxyCodeLine{00208\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ cmp\_gids\ (\textcolor{keyword}{const}\ \textcolor{keywordtype}{void}\ *pa,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}\ *pb,\ \textcolor{keywordtype}{void}\ *arg)}
\DoxyCodeLine{00209\ \ \ \ \ \{}
\DoxyCodeLine{00210\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1post_1_1accelerator__t}{accelerator\_t}}\ *thiz\ =\ (\textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1post_1_1accelerator__t}{accelerator\_t}}\ *)\ arg;}
\DoxyCodeLine{00211\ \ \ \ \ \ \ uint16\_t\ \mbox{\hyperlink{structa}{a}}\ =\ *\ (\textcolor{keyword}{const}\ uint16\_t\ *)\ pa;}
\DoxyCodeLine{00212\ \ \ \ \ \ \ uint16\_t\ b\ =\ *\ (\textcolor{keyword}{const}\ uint16\_t\ *)\ pb;}
\DoxyCodeLine{00213\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ thiz-\/>find\_glyph\_name\ (b).cmp\ (thiz-\/>find\_glyph\_name\ (\mbox{\hyperlink{structa}{a}}));}
\DoxyCodeLine{00214\ \ \ \ \ \}}
\DoxyCodeLine{00215\ }
\DoxyCodeLine{00216\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ cmp\_key\ (\textcolor{keyword}{const}\ \textcolor{keywordtype}{void}\ *pk,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}\ *po,\ \textcolor{keywordtype}{void}\ *arg)}
\DoxyCodeLine{00217\ \ \ \ \ \{}
\DoxyCodeLine{00218\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1post_1_1accelerator__t}{accelerator\_t}}\ *thiz\ =\ (\textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1post_1_1accelerator__t}{accelerator\_t}}\ *)\ arg;}
\DoxyCodeLine{00219\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structhb__array__t}{hb\_bytes\_t}}\ *key\ =\ (\textcolor{keyword}{const}\ \mbox{\hyperlink{structhb__array__t}{hb\_bytes\_t}}\ *)\ pk;}
\DoxyCodeLine{00220\ \ \ \ \ \ \ uint16\_t\ o\ =\ *\ (\textcolor{keyword}{const}\ uint16\_t\ *)\ po;}
\DoxyCodeLine{00221\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ thiz-\/>find\_glyph\_name\ (o).cmp\ (*key);}
\DoxyCodeLine{00222\ \ \ \ \ \}}
\DoxyCodeLine{00223\ }
\DoxyCodeLine{00224\ \ \ \ \ \mbox{\hyperlink{structhb__array__t}{hb\_bytes\_t}}\ find\_glyph\_name\ (hb\_codepoint\_t\ glyph)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00225\ \textcolor{keyword}{\ \ \ \ }\{}
\DoxyCodeLine{00226\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (version\ ==\ 0x00010000)}
\DoxyCodeLine{00227\ \ \ \ \ \ \ \{}
\DoxyCodeLine{00228\ \ \ \ \ \textcolor{keywordflow}{if}\ (glyph\ >=\ format1\_names\_length)}
\DoxyCodeLine{00229\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structhb__array__t}{hb\_bytes\_t}}\ ();}
\DoxyCodeLine{00230\ }
\DoxyCodeLine{00231\ \ \ \ \ \textcolor{keywordflow}{return}\ format1\_names\ (glyph);}
\DoxyCodeLine{00232\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00233\ }
\DoxyCodeLine{00234\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (version\ !=\ 0x00020000\ ||\ glyph\ >=\ glyphNameIndex-\/>len)}
\DoxyCodeLine{00235\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structhb__array__t}{hb\_bytes\_t}}\ ();}
\DoxyCodeLine{00236\ }
\DoxyCodeLine{00237\ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ index\ =\ glyphNameIndex-\/>arrayZ[glyph];}
\DoxyCodeLine{00238\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (index\ <\ format1\_names\_length)}
\DoxyCodeLine{00239\ \ \ \ \ \textcolor{keywordflow}{return}\ format1\_names\ (index);}
\DoxyCodeLine{00240\ \ \ \ \ \ \ index\ -\/=\ format1\_names\_length;}
\DoxyCodeLine{00241\ }
\DoxyCodeLine{00242\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (index\ >=\ index\_to\_offset.length)}
\DoxyCodeLine{00243\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structhb__array__t}{hb\_bytes\_t}}\ ();}
\DoxyCodeLine{00244\ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ offset\ =\ index\_to\_offset[index];}
\DoxyCodeLine{00245\ }
\DoxyCodeLine{00246\ \ \ \ \ \ \ \textcolor{keyword}{const}\ uint8\_t\ *\mbox{\hyperlink{structdata}{data}}\ =\ pool\ +\ offset;}
\DoxyCodeLine{00247\ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ name\_length\ =\ *\mbox{\hyperlink{structdata}{data}};}
\DoxyCodeLine{00248\ \ \ \ \ \ \ \mbox{\hyperlink{structdata}{data}}++;}
\DoxyCodeLine{00249\ }
\DoxyCodeLine{00250\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structhb__array__t}{hb\_bytes\_t}}\ ((\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *)\ \mbox{\hyperlink{structdata}{data}},\ name\_length);}
\DoxyCodeLine{00251\ \ \ \ \ \}}
\DoxyCodeLine{00252\ }
\DoxyCodeLine{00253\ \ \ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00254\ \ \ \ \ uint32\_t\ version;}
\DoxyCodeLine{00255\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_o_t_1_1_array_of}{Array16Of<HBUINT16>}}\ *glyphNameIndex\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00256\ \ \ \ \ \mbox{\hyperlink{structhb__vector__t}{hb\_vector\_t<uint32\_t>}}\ index\_to\_offset;}
\DoxyCodeLine{00257\ \ \ \ \ \textcolor{keyword}{const}\ uint8\_t\ *pool\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00258\ \ \ \ \ \mbox{\hyperlink{structhb__atomic__ptr__t}{hb\_atomic\_ptr\_t<uint16\_t\ *>}}\ gids\_sorted\_by\_name;}
\DoxyCodeLine{00259\ \ \ \};}
\DoxyCodeLine{00260\ }
\DoxyCodeLine{00261\ \ \ \textcolor{keywordtype}{bool}\ has\_data\ ()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ version.to\_int\ ();\ \}}
\DoxyCodeLine{00262\ }
\DoxyCodeLine{00263\ \ \ \textcolor{keywordtype}{bool}\ sanitize\ (\mbox{\hyperlink{structhb__sanitize__context__t}{hb\_sanitize\_context\_t}}\ *c)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00264\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00265\ \ \ \ \ TRACE\_SANITIZE\ (\textcolor{keyword}{this});}
\DoxyCodeLine{00266\ \ \ \ \ return\_trace\ (likely\ (c-\/>check\_struct\ (\textcolor{keyword}{this})\ \&\&}
\DoxyCodeLine{00267\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (version.to\_int\ ()\ ==\ 0x00010000\ ||}
\DoxyCodeLine{00268\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (version.to\_int\ ()\ ==\ 0x00020000\ \&\&\ v2X.sanitize\ (c))\ ||}
\DoxyCodeLine{00269\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ version.to\_int\ ()\ ==\ 0x00030000)));}
\DoxyCodeLine{00270\ \ \ \}}
\DoxyCodeLine{00271\ }
\DoxyCodeLine{00272\ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00273\ \ \ FixedVersion<>version;\ \ \ \ \ \ \ \ \textcolor{comment}{/*\ 0x00010000\ for\ version\ 1.0}}
\DoxyCodeLine{00274\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ 0x00020000\ for\ version\ 2.0}}
\DoxyCodeLine{00275\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ 0x00025000\ for\ version\ 2.5\ (deprecated)}}
\DoxyCodeLine{00276\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ 0x00030000\ for\ version\ 3.0\ */}}
\DoxyCodeLine{00277\ \ \ HBFixed\ \ \ italicAngle;\ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Italic\ angle\ in\ counter-\/clockwise\ degrees}}
\DoxyCodeLine{00278\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ from\ the\ vertical.\ Zero\ for\ upright\ text,}}
\DoxyCodeLine{00279\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ negative\ for\ text\ that\ leans\ to\ the\ right}}
\DoxyCodeLine{00280\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ (forward).\ */}}
\DoxyCodeLine{00281\ \ \ FWORD\ \ \ \ \ underlinePosition;\ \ \textcolor{comment}{/*\ This\ is\ the\ suggested\ distance\ of\ the\ top}}
\DoxyCodeLine{00282\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ of\ the\ underline\ from\ the\ baseline}}
\DoxyCodeLine{00283\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ (negative\ values\ indicate\ below\ baseline).}}
\DoxyCodeLine{00284\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ The\ PostScript\ definition\ of\ this\ FontInfo}}
\DoxyCodeLine{00285\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ dictionary\ key\ (the\ y\ coordinate\ of\ the}}
\DoxyCodeLine{00286\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ center\ of\ the\ stroke)\ is\ not\ used\ for}}
\DoxyCodeLine{00287\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ historical\ reasons.\ The\ value\ of\ the}}
\DoxyCodeLine{00288\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ PostScript\ key\ may\ be\ calculated\ by}}
\DoxyCodeLine{00289\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ subtracting\ half\ the\ underlineThickness}}
\DoxyCodeLine{00290\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ from\ the\ value\ of\ this\ field.\ */}}
\DoxyCodeLine{00291\ \ \ FWORD\ \ \ \ \ underlineThickness;\ \textcolor{comment}{/*\ Suggested\ values\ for\ the\ underline}}
\DoxyCodeLine{00292\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ thickness.\ */}}
\DoxyCodeLine{00293\ \ \ HBUINT32\ \ isFixedPitch;\ \ \ \ \ \ \ \textcolor{comment}{/*\ Set\ to\ 0\ if\ the\ font\ is\ proportionally}}
\DoxyCodeLine{00294\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ spaced,\ non-\/zero\ if\ the\ font\ is\ not}}
\DoxyCodeLine{00295\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ proportionally\ spaced\ (i.e.\ monospaced).\ */}}
\DoxyCodeLine{00296\ \ \ HBUINT32\ \ minMemType42;\ \ \ \ \ \ \ \textcolor{comment}{/*\ Minimum\ memory\ usage\ when\ an\ OpenType\ font}}
\DoxyCodeLine{00297\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ is\ downloaded.\ */}}
\DoxyCodeLine{00298\ \ \ HBUINT32\ \ maxMemType42;\ \ \ \ \ \ \ \textcolor{comment}{/*\ Maximum\ memory\ usage\ when\ an\ OpenType\ font}}
\DoxyCodeLine{00299\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ is\ downloaded.\ */}}
\DoxyCodeLine{00300\ \ \ HBUINT32\ \ minMemType1;\ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Minimum\ memory\ usage\ when\ an\ OpenType\ font}}
\DoxyCodeLine{00301\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ is\ downloaded\ as\ a\ Type\ 1\ font.\ */}}
\DoxyCodeLine{00302\ \ \ HBUINT32\ \ maxMemType1;\ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Maximum\ memory\ usage\ when\ an\ OpenType\ font}}
\DoxyCodeLine{00303\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ is\ downloaded\ as\ a\ Type\ 1\ font.\ */}}
\DoxyCodeLine{00304\ \ \ postV2Tail\ \ \ \ v2X;}
\DoxyCodeLine{00305\ \ \ DEFINE\_SIZE\_MIN\ (32);}
\DoxyCodeLine{00306\ \};}
\DoxyCodeLine{00307\ }
\DoxyCodeLine{00308\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_o_t_1_1post__accelerator__t}{post\_accelerator\_t}}\ :\ \mbox{\hyperlink{struct_o_t_1_1post_1_1accelerator__t}{post::accelerator\_t}}\ \{}
\DoxyCodeLine{00309\ \ \ \mbox{\hyperlink{struct_o_t_1_1post__accelerator__t}{post\_accelerator\_t}}\ (\mbox{\hyperlink{structhb__face__t}{hb\_face\_t}}\ *face)\ :\ \mbox{\hyperlink{struct_o_t_1_1post_1_1accelerator__t}{post::accelerator\_t}}\ (face)\ \{\}}
\DoxyCodeLine{00310\ \};}
\DoxyCodeLine{00311\ }
\DoxyCodeLine{00312\ }
\DoxyCodeLine{00313\ \}\ \textcolor{comment}{/*\ namespace\ OT\ */}}
\DoxyCodeLine{00314\ }
\DoxyCodeLine{00315\ }
\DoxyCodeLine{00316\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ HB\_OT\_POST\_TABLE\_HH\ */}\textcolor{preprocessor}{}}

\end{DoxyCode}
